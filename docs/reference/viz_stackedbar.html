<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a Stacked Bar Chart ‚Äî viz_stackedbar ‚Ä¢ dashboardr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create a Stacked Bar Chart ‚Äî viz_stackedbar"><meta name="description" content="A unified function for creating stacked bar charts that supports two modes:
Mode 1: Grouped/Crosstab Mode (use x_var + stack_var)
Creates a stacked bar chart from long/tidy data where one column provides
the x-axis categories and another column provides the stack segments.
This is ideal for cross-tabulating responses by demographic groups.
Mode 2: Multi-Variable/Battery Mode (use x_vars)
Creates a stacked bar chart from wide data where multiple columns become
the x-axis bars, and their values become the stacks. This is ideal for
comparing response distributions across multiple survey questions.
The function automatically detects which mode to use based on the parameters
provided."><meta property="og:description" content="A unified function for creating stacked bar charts that supports two modes:
Mode 1: Grouped/Crosstab Mode (use x_var + stack_var)
Creates a stacked bar chart from long/tidy data where one column provides
the x-axis categories and another column provides the stack segments.
This is ideal for cross-tabulating responses by demographic groups.
Mode 2: Multi-Variable/Battery Mode (use x_vars)
Creates a stacked bar chart from wide data where multiple columns become
the x-axis bars, and their values become the stacks. This is ideal for
comparing response distributions across multiple survey questions.
The function automatically detects which mode to use based on the parameters
provided."><meta property="og:image" content="https://favstats.github.io/dashboardr/logo.svg"><style>
/* Navbar logo */
.navbar-brand img {
  max-height: 30px;
  width: auto;
  object-fit: contain;
}
/* Home page logo - limit size */
.page-header .logo {
  max-width: 150px;
  height: auto;
}
/* Also target the img in the README content */
#dashboardr- img[src*="logo"] {
  max-width: 150px;
  height: auto;
  float: right;
  margin-left: 20px;
}
</style></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dashboardr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting-started.html">üöÄ Getting Started</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üìñ Core Concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/content-collections.html">- Content</a></li>
    <li><a class="dropdown-item" href="../articles/pages.html">- Pages</a></li>
    <li><a class="dropdown-item" href="../articles/dashboards.html">- Dashboards</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/advanced-features.html">‚öôÔ∏è Advanced Features</a></li>
    <li><a class="dropdown-item" href="../articles/publishing_dashboards.html">üåê Publishing Dashboards</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üìä Visualization Types</h6></li>
    <li><a class="dropdown-item" href="../articles/bar_vignette.html">- Bar Charts</a></li>
    <li><a class="dropdown-item" href="../articles/timeline_vignette.html">- Timelines</a></li>
    <li><a class="dropdown-item" href="../articles/stackedbar_vignette.html">- Stacked Bars</a></li>
    <li><a class="dropdown-item" href="../articles/heatmap_vignette.html">- Heatmaps</a></li>
    <li><a class="dropdown-item" href="../articles/histogram_vignette.html">- Histograms</a></li>
    <li><a class="dropdown-item" href="../articles/density_vignette.html">- Density Plots</a></li>
    <li><a class="dropdown-item" href="../articles/boxplot_vignette.html">- Box Plots</a></li>
    <li><a class="dropdown-item" href="../articles/scatter_vignette.html">- Scatter Plots</a></li>
    <li><a class="dropdown-item" href="../articles/treemap_vignette.html">- Treemaps</a></li>
    <li><a class="dropdown-item" href="../articles/map_vignette.html">- Maps</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown--live-demos" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">üéØ Live Demos</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown--live-demos"><li><a class="dropdown-item" href="../articles/demos.html">üìö About the Demos</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../live-demos/tutorial/index.html">üéì Tutorial Dashboard</a></li>
    <li><a class="dropdown-item" href="../live-demos/showcase/index.html">üöÄ Showcase Dashboard</a></li>
    <li><a class="external-link dropdown-item" href="https://www.digiqmonitor.nl/">üåç DigIQ Monitor</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üé® Tabset Themes</h6></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/pills/index.html">   Pills</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/modern/index.html">   Modern</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/minimal/index.html">   Minimal</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/classic/index.html">   Classic</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/underline/index.html">   Underline</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/segmented/index.html">   Segmented</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../live-demos/inputs/index.html">üéõÔ∏è Interactive Inputs</a></li>
    <li><a class="dropdown-item" href="../live-demos/sidebar/index.html">üìã Sidebar Filters</a></li>
    <li><a class="dropdown-item" href="../live-demos/overlay/index.html">üé≠ Loading Overlays</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Create a Stacked Bar Chart</h1>

      <div class="d-none name"><code>viz_stackedbar.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A unified function for creating stacked bar charts that supports two modes:</p>
<p><strong>Mode 1: Grouped/Crosstab Mode</strong> (use <code>x_var</code> + <code>stack_var</code>)</p>
<p>Creates a stacked bar chart from long/tidy data where one column provides
the x-axis categories and another column provides the stack segments.
This is ideal for cross-tabulating responses by demographic groups.</p>
<p><strong>Mode 2: Multi-Variable/Battery Mode</strong> (use <code>x_vars</code>)</p>
<p>Creates a stacked bar chart from wide data where multiple columns become
the x-axis bars, and their values become the stacks. This is ideal for
comparing response distributions across multiple survey questions.</p>
<p>The function automatically detects which mode to use based on the parameters
provided.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">viz_stackedbar</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  x_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  response_levels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  show_var_tooltip <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"counts"</span>, <span class="st">"percent"</span>, <span class="st">"normal"</span><span class="op">)</span>,</span>
<span>  tooltip <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  x_tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  na_label_x <span class="op">=</span> <span class="st">"(Missing)"</span>,</span>
<span>  na_label_stack <span class="op">=</span> <span class="st">"(Missing)"</span>,</span>
<span>  x_breaks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_bin_labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_map_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stack_breaks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stack_bin_labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stack_map_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  horizontal <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  weight_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_labels_enabled <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cross_tab_filter_vars <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame containing the survey data.</p></dd>


<dt id="arg-x-var">x_var<a class="anchor" aria-label="anchor" href="#arg-x-var"></a></dt>
<dd><p>String. Name of the column for X-axis categories. Use this
together with <code>stack_var</code> for crosstab-style charts.</p></dd>


<dt id="arg-y-var">y_var<a class="anchor" aria-label="anchor" href="#arg-y-var"></a></dt>
<dd><p>Optional string. Name of a pre-computed count column. If NULL
(default), the function counts occurrences.</p></dd>


<dt id="arg-stack-var">stack_var<a class="anchor" aria-label="anchor" href="#arg-stack-var"></a></dt>
<dd><p>String. Name of the column whose values define the stacks.
Required when using <code>x_var</code>.</p></dd>


<dt id="arg-x-vars">x_vars<a class="anchor" aria-label="anchor" href="#arg-x-vars"></a></dt>
<dd><p>Character vector of column names to compare. Each column becomes
a bar on the x-axis, and the values within each column become the stacks.
Use this for comparing multiple survey questions with the same response scale.</p></dd>


<dt id="arg-x-var-labels">x_var_labels<a class="anchor" aria-label="anchor" href="#arg-x-var-labels"></a></dt>
<dd><p>Optional character vector of display labels for the variables.
Must be the same length as <code>x_vars</code>. If NULL, column names are used.</p></dd>


<dt id="arg-response-levels">response_levels<a class="anchor" aria-label="anchor" href="#arg-response-levels"></a></dt>
<dd><p>Optional character vector of factor levels for the
response categories (e.g., <code>c("Strongly Disagree", ..., "Strongly Agree")</code>).
This sets the order of the stacks in multi-variable mode.</p></dd>


<dt id="arg-show-var-tooltip">show_var_tooltip<a class="anchor" aria-label="anchor" href="#arg-show-var-tooltip"></a></dt>
<dd><p>Logical. If TRUE (default), shows enhanced tooltips
with variable labels in multi-variable mode.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>Optional string. Main chart title.</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>Optional string. Chart subtitle.</p></dd>


<dt id="arg-x-label">x_label<a class="anchor" aria-label="anchor" href="#arg-x-label"></a></dt>
<dd><p>Optional string. X-axis label. Defaults to empty in crosstab mode
or "Variable" in multi-variable mode.</p></dd>


<dt id="arg-y-label">y_label<a class="anchor" aria-label="anchor" href="#arg-y-label"></a></dt>
<dd><p>Optional string. Y-axis label. Defaults to "Count" or "Percentage".</p></dd>


<dt id="arg-stack-label">stack_label<a class="anchor" aria-label="anchor" href="#arg-stack-label"></a></dt>
<dd><p>Optional string. Title for the stack legend.
Set to NULL, NA, FALSE, or "" to hide the legend title.</p></dd>


<dt id="arg-stacked-type">stacked_type<a class="anchor" aria-label="anchor" href="#arg-stacked-type"></a></dt>
<dd><p>One of "normal", "counts" (both show raw counts), or
"percent" (100% stacked). Defaults to "counts".</p></dd>


<dt id="arg-tooltip">tooltip<a class="anchor" aria-label="anchor" href="#arg-tooltip"></a></dt>
<dd><p>A tooltip configuration created with <code><a href="tooltip.html">tooltip()</a></code>,
OR a format string with {placeholders}. Available placeholders:
<code>{category}</code>, <code>{value}</code>, <code>{series}</code>, <code>{percent}</code>.</p></dd>


<dt id="arg-tooltip-prefix">tooltip_prefix<a class="anchor" aria-label="anchor" href="#arg-tooltip-prefix"></a></dt>
<dd><p>Optional string prepended to tooltip values.</p></dd>


<dt id="arg-tooltip-suffix">tooltip_suffix<a class="anchor" aria-label="anchor" href="#arg-tooltip-suffix"></a></dt>
<dd><p>Optional string appended to tooltip values.</p></dd>


<dt id="arg-x-tooltip-suffix">x_tooltip_suffix<a class="anchor" aria-label="anchor" href="#arg-x-tooltip-suffix"></a></dt>
<dd><p>Optional string appended to x-axis values in tooltips.</p></dd>


<dt id="arg-color-palette">color_palette<a class="anchor" aria-label="anchor" href="#arg-color-palette"></a></dt>
<dd><p>Optional character vector of colors for the stacks.</p></dd>


<dt id="arg-stack-order">stack_order<a class="anchor" aria-label="anchor" href="#arg-stack-order"></a></dt>
<dd><p>Optional character vector specifying order of stack levels.</p></dd>


<dt id="arg-x-order">x_order<a class="anchor" aria-label="anchor" href="#arg-x-order"></a></dt>
<dd><p>Optional character vector specifying order of x-axis levels.</p></dd>


<dt id="arg-include-na">include_na<a class="anchor" aria-label="anchor" href="#arg-include-na"></a></dt>
<dd><p>Logical. If TRUE, NA values are shown as explicit categories.
If FALSE (default), rows with NA are excluded.</p></dd>


<dt id="arg-na-label-x">na_label_x<a class="anchor" aria-label="anchor" href="#arg-na-label-x"></a></dt>
<dd><p>String. Label for NA values on x-axis. Default "(Missing)".</p></dd>


<dt id="arg-na-label-stack">na_label_stack<a class="anchor" aria-label="anchor" href="#arg-na-label-stack"></a></dt>
<dd><p>String. Label for NA values in stacks. Default "(Missing)".</p></dd>


<dt id="arg-x-breaks">x_breaks<a class="anchor" aria-label="anchor" href="#arg-x-breaks"></a></dt>
<dd><p>Optional numeric vector of cut points for binning <code>x_var</code>.</p></dd>


<dt id="arg-x-bin-labels">x_bin_labels<a class="anchor" aria-label="anchor" href="#arg-x-bin-labels"></a></dt>
<dd><p>Optional character vector of labels for <code>x_breaks</code> bins.</p></dd>


<dt id="arg-x-map-values">x_map_values<a class="anchor" aria-label="anchor" href="#arg-x-map-values"></a></dt>
<dd><p>Optional named list to remap x-axis values for display.</p></dd>


<dt id="arg-stack-breaks">stack_breaks<a class="anchor" aria-label="anchor" href="#arg-stack-breaks"></a></dt>
<dd><p>Optional numeric vector of cut points for binning stack variable.</p></dd>


<dt id="arg-stack-bin-labels">stack_bin_labels<a class="anchor" aria-label="anchor" href="#arg-stack-bin-labels"></a></dt>
<dd><p>Optional character vector of labels for <code>stack_breaks</code> bins.</p></dd>


<dt id="arg-stack-map-values">stack_map_values<a class="anchor" aria-label="anchor" href="#arg-stack-map-values"></a></dt>
<dd><p>Optional named list to remap stack values for display.</p></dd>


<dt id="arg-horizontal">horizontal<a class="anchor" aria-label="anchor" href="#arg-horizontal"></a></dt>
<dd><p>Logical. If TRUE, creates horizontal bars. Default FALSE.</p></dd>


<dt id="arg-weight-var">weight_var<a class="anchor" aria-label="anchor" href="#arg-weight-var"></a></dt>
<dd><p>Optional string. Name of a weight variable for weighted counts.</p></dd>


<dt id="arg-data-labels-enabled">data_labels_enabled<a class="anchor" aria-label="anchor" href="#arg-data-labels-enabled"></a></dt>
<dd><p>Logical. If TRUE, show value labels on bars. Default TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An interactive <code>highcharter</code> bar chart plot object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>Choosing the Right Mode:</strong></p>
<p>Use <strong>Mode 1</strong> (<code>x_var</code> + <code>stack_var</code>) when you want to:</p><ul><li><p>Show how one variable breaks down by another (e.g., education by gender)</p></li>
<li><p>Create a cross-tabulation visualization</p></li>
<li><p>Your data is already in long/tidy format</p></li>
</ul><p>Use <strong>Mode 2</strong> (<code>x_vars</code>) when you want to:</p><ul><li><p>Compare response distributions across multiple survey questions</p></li>
<li><p>Visualize a Likert scale battery</p></li>
<li><p>Your questions share the same response categories</p></li>
<li><p>Your data is in wide format (one column per question)</p></li>
</ul><p><strong>Data Handling Features:</strong></p><ul><li><p>Automatically handles <code>haven_labelled</code> columns from SPSS/Stata/SAS</p></li>
<li><p>Supports value mapping to rename categories for display</p></li>
<li><p>Supports binning of continuous variables</p></li>
<li><p>Handles missing values explicitly or implicitly</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="mode-parameters-grouped-crosstab-">Mode 1 Parameters (Grouped/Crosstab)<a class="anchor" aria-label="anchor" href="#mode-parameters-grouped-crosstab-"></a></h2>



    </div>
    <div class="section level2">
    <h2 id="mode-parameters-multi-variable-battery-">Mode 2 Parameters (Multi-Variable/Battery)<a class="anchor" aria-label="anchor" href="#mode-parameters-multi-variable-battery-"></a></h2>



    </div>
    <div class="section level2">
    <h2 id="common-parameters">Common Parameters<a class="anchor" aria-label="anchor" href="#common-parameters"></a></h2>



    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="viz_bar.html">viz_bar</a></code> for simple (non-stacked) bar charts</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kjhealy/gssr" class="external-link">gssr</a></span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>package 'gssr' was built under R version 4.4.3</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Package loaded. To attach the GSS data, type data(gss_all) at the console.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> For the panel data and documentation, type e.g. data(gss_panel08_long) and data(gss_panel_doc).</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> For help on a specific GSS variable, type ?varname at the console.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ============================================================</span></span></span>
<span class="r-in"><span><span class="co"># MODE 1: Grouped/Crosstab - One variable broken down by another</span></span></span>
<span class="r-in"><span><span class="co"># ============================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Education by Gender (counts)</span></span></span>
<span class="r-in"><span><span class="va">plot1</span> <span class="op">&lt;-</span> <span class="fu">viz_stackedbar</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">gss_panel20</span>,</span></span>
<span class="r-in"><span>  x_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span></span>
<span class="r-in"><span>  stack_var <span class="op">=</span> <span class="st">"sex_1a"</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"Educational Attainment by Gender"</span>,</span></span>
<span class="r-in"><span>  x_label <span class="op">=</span> <span class="st">"Highest Degree"</span>,</span></span>
<span class="r-in"><span>  stack_label <span class="op">=</span> <span class="st">"Gender"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Happiness by Education (percentages)</span></span></span>
<span class="r-in"><span><span class="va">plot2</span> <span class="op">&lt;-</span> <span class="fu">viz_stackedbar</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">gss_panel20</span>,</span></span>
<span class="r-in"><span>  x_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span></span>
<span class="r-in"><span>  stack_var <span class="op">=</span> <span class="st">"happy_1a"</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"Happiness by Education Level"</span>,</span></span>
<span class="r-in"><span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span></span>
<span class="r-in"><span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ============================================================</span></span></span>
<span class="r-in"><span><span class="co"># MODE 2: Multi-Variable/Battery - Compare multiple questions</span></span></span>
<span class="r-in"><span><span class="co"># ============================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Compare multiple attitude questions</span></span></span>
<span class="r-in"><span><span class="va">plot3</span> <span class="op">&lt;-</span> <span class="fu">viz_stackedbar</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">gss_panel20</span>,</span></span>
<span class="r-in"><span>  x_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trust_1a"</span>, <span class="st">"fair_1a"</span>, <span class="st">"helpful_1a"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x_var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Trust Others"</span>, <span class="st">"Others Are Fair"</span>, <span class="st">"Others Are Helpful"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"Social Trust Battery"</span>,</span></span>
<span class="r-in"><span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span></span>
<span class="r-in"><span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>`trust_1a` and `fair_1a` have conflicting value labels.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>`trust_1a` and `helpful_1a` have conflicting value labels.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4: Single question horizontal (compact display)</span></span></span>
<span class="r-in"><span><span class="va">plot4</span> <span class="op">&lt;-</span> <span class="fu">viz_stackedbar</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">gss_panel20</span>,</span></span>
<span class="r-in"><span>  x_vars <span class="op">=</span> <span class="st">"happy_1a"</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"General Happiness"</span>,</span></span>
<span class="r-in"><span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span></span>
<span class="r-in"><span>  horizontal <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fabio Votta, Alexandra Pafford, Max Paulus, Ernesto de Le√≥n.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

