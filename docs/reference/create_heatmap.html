<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a Heatmap — create_heatmap • dashboardr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a Heatmap — create_heatmap"><meta property="og:description" content="This function creates a heatmap for bivariate data, visualizing
the relationship between two categorical variables and a numeric value
using color intensity. It handles ordered factors, ensures all combinations
are plotted, and allows for extensive customization. It also includes
robust handling of missing values (NA) by allowing them to be displayed
as explicit categories."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dashboardr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/heatmap_vignette.html">Creating Interactive Heatmaps with `create_heatmap`</a>
    </li>
    <li>
      <a href="../articles/stackedbar_vignette.html">Creating Interactive Stacked Bar Charts with `create_stackedbar`</a>
    </li>
    <li>
      <a href="../articles/stackedbars_vignette.html">Getting Started With `create_stackedbars()`</a>
    </li>
    <li>
      <a href="../articles/timeline_vignette.html">Getting Started With `create_timeline()`</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a Heatmap</h1>

    <div class="hidden name"><code>create_heatmap.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function creates a heatmap for bivariate data, visualizing
the relationship between two categorical variables and a numeric value
using color intensity. It handles ordered factors, ensures all combinations
are plotted, and allows for extensive customization. It also includes
robust handling of missing values (NA) by allowing them to be displayed
as explicit categories.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_heatmap</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">x_var</span>,</span>
<span>  <span class="va">y_var</span>,</span>
<span>  <span class="va">value_var</span>,</span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  value_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  x_tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  y_tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  x_tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  y_tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  x_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  color_min <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  color_max <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#FFFFFF"</span>, <span class="st">"#7CB5EC"</span><span class="op">)</span>,</span>
<span>  na_color <span class="op">=</span> <span class="st">"transparent"</span>,</span>
<span>  data_labels_enabled <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  data_labels_format <span class="op">=</span> <span class="st">"{point.value}"</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  na_label_x <span class="op">=</span> <span class="st">"(Missing)"</span>,</span>
<span>  na_label_y <span class="op">=</span> <span class="st">"(Missing)"</span>,</span>
<span>  x_map_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_map_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  agg_fun <span class="op">=</span> <span class="va">mean</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame containing the variables to plot.</p></dd>


<dt id="arg-x-var">x_var<a class="anchor" aria-label="anchor" href="#arg-x-var"></a></dt>
<dd><p>String. Name of the column for the X-axis categories.</p></dd>


<dt id="arg-y-var">y_var<a class="anchor" aria-label="anchor" href="#arg-y-var"></a></dt>
<dd><p>String. Name of the column for the Y-axis categories.</p></dd>


<dt id="arg-value-var">value_var<a class="anchor" aria-label="anchor" href="#arg-value-var"></a></dt>
<dd><p>String. Name of the numeric column whose values will
determine the color intensity.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>Optional string. Main chart title.</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>Optional string. Chart subtitle.</p></dd>


<dt id="arg-x-label">x_label<a class="anchor" aria-label="anchor" href="#arg-x-label"></a></dt>
<dd><p>Optional string. X-axis label. Defaults to <code>x_var</code>.</p></dd>


<dt id="arg-y-label">y_label<a class="anchor" aria-label="anchor" href="#arg-y-label"></a></dt>
<dd><p>Optional string. Y-axis label. Defaults to <code>y_var</code>.</p></dd>


<dt id="arg-value-label">value_label<a class="anchor" aria-label="anchor" href="#arg-value-label"></a></dt>
<dd><p>Optional string. Label for the color axis. Defaults to <code>value_var</code>.</p></dd>


<dt id="arg-tooltip-prefix">tooltip_prefix<a class="anchor" aria-label="anchor" href="#arg-tooltip-prefix"></a></dt>
<dd><p>Optional string prepended in the tooltip value.</p></dd>


<dt id="arg-tooltip-suffix">tooltip_suffix<a class="anchor" aria-label="anchor" href="#arg-tooltip-suffix"></a></dt>
<dd><p>Optional string appended in the tooltip value.</p></dd>


<dt id="arg-x-tooltip-suffix">x_tooltip_suffix<a class="anchor" aria-label="anchor" href="#arg-x-tooltip-suffix"></a></dt>
<dd><p>Optional string appended to x value in tooltip.</p></dd>


<dt id="arg-y-tooltip-suffix">y_tooltip_suffix<a class="anchor" aria-label="anchor" href="#arg-y-tooltip-suffix"></a></dt>
<dd><p>Optional string appended to y value in tooltip.</p></dd>


<dt id="arg-x-tooltip-prefix">x_tooltip_prefix<a class="anchor" aria-label="anchor" href="#arg-x-tooltip-prefix"></a></dt>
<dd><p>Optional string prepended to x value in tooltip.</p></dd>


<dt id="arg-y-tooltip-prefix">y_tooltip_prefix<a class="anchor" aria-label="anchor" href="#arg-y-tooltip-prefix"></a></dt>
<dd><p>Optional string prepended to y value in tooltip.</p></dd>


<dt id="arg-x-order">x_order<a class="anchor" aria-label="anchor" href="#arg-x-order"></a></dt>
<dd><p>Optional character vector to order the factor levels of <code>x_var</code>.</p></dd>


<dt id="arg-y-order">y_order<a class="anchor" aria-label="anchor" href="#arg-y-order"></a></dt>
<dd><p>Optional character vector to order the factor levels of <code>y_var</code>.</p></dd>


<dt id="arg-color-min">color_min<a class="anchor" aria-label="anchor" href="#arg-color-min"></a></dt>
<dd><p>Optional numeric. Minimum value for the color axis. If NULL, defaults to data min.</p></dd>


<dt id="arg-color-max">color_max<a class="anchor" aria-label="anchor" href="#arg-color-max"></a></dt>
<dd><p>Optional numeric. Maximum value for the color axis. If NULL, defaults to data max.</p></dd>


<dt id="arg-color-palette">color_palette<a class="anchor" aria-label="anchor" href="#arg-color-palette"></a></dt>
<dd><p>Optional character vector of colors for the color gradient.
Example: <code>c("#FFFFFF", "#7CB5EC")</code> for white to light blue. Can also be a single color for gradient start.</p></dd>


<dt id="arg-na-color">na_color<a class="anchor" aria-label="anchor" href="#arg-na-color"></a></dt>
<dd><p>Optional string. Color for NA values in <code>value_var</code> cells. Default "transparent".</p></dd>


<dt id="arg-data-labels-enabled">data_labels_enabled<a class="anchor" aria-label="anchor" href="#arg-data-labels-enabled"></a></dt>
<dd><p>Logical. If TRUE, display data labels on each cell. Default TRUE.</p></dd>


<dt id="arg-data-labels-format">data_labels_format<a class="anchor" aria-label="anchor" href="#arg-data-labels-format"></a></dt>
<dd><p>Optional string. Format for data labels. Default "point.value".</p></dd>


<dt id="arg-include-na">include_na<a class="anchor" aria-label="anchor" href="#arg-include-na"></a></dt>
<dd><p>Logical. If TRUE, treats NA values in <code>x_var</code> or <code>y_var</code>
as explicit categories using <code>na_label_x</code> and <code>na_label_y</code>. If FALSE (default),
rows with NA in <code>x_var</code> or <code>y_var</code> are excluded from aggregation.</p></dd>


<dt id="arg-na-label-x">na_label_x<a class="anchor" aria-label="anchor" href="#arg-na-label-x"></a></dt>
<dd><p>Optional string. Custom label for NA values in <code>x_var</code>. Defaults to "(Missing)".</p></dd>


<dt id="arg-na-label-y">na_label_y<a class="anchor" aria-label="anchor" href="#arg-na-label-y"></a></dt>
<dd><p>Optional string. Custom label for NA values in <code>y_var</code>. Defaults to "(Missing)".</p></dd>


<dt id="arg-x-map-values">x_map_values<a class="anchor" aria-label="anchor" href="#arg-x-map-values"></a></dt>
<dd><p>Optional named list to recode x_var values for display.</p></dd>


<dt id="arg-y-map-values">y_map_values<a class="anchor" aria-label="anchor" href="#arg-y-map-values"></a></dt>
<dd><p>Optional named list to recode y_var values for display.</p></dd>


<dt id="arg-agg-fun">agg_fun<a class="anchor" aria-label="anchor" href="#arg-agg-fun"></a></dt>
<dd><p>Function to aggregate duplicate x/y combinations. Default is <code>mean</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code>highcharter</code> heatmap object.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function performs the following steps:</p><ol><li><p><strong>Input validation:</strong> Checks <code>data</code>, <code>x_var</code>, <code>y_var</code>, and <code>value_var</code>.</p></li>
<li><p><strong>Data Preparation:</strong></p><ul><li><p>Handles <code>haven_labelled</code> columns by converting them to factors.</p></li>
<li><p>Applies value mapping if <code>x_map_values</code> or <code>y_map_values</code> (new parameter) are provided.</p></li>
<li><p>Processes NA values in <code>x_var</code> and <code>y_var</code>: if <code>include_na = TRUE</code>, NAs are converted to a specified label; otherwise, rows with NAs in these variables are filtered out.</p></li>
<li><p>Converts <code>x_var</code> and <code>y_var</code> to factors and applies <code>x_order</code> and <code>y_order</code>.</p></li>
<li><p>Uses <code><a href="https://tidyr.tidyverse.org/reference/complete.html" class="external-link">tidyr::complete</a></code> to ensure all <code>x_var</code>/<code>y_var</code> combinations are present,
filling missing <code>value_var</code> with <code>NA_real_</code> (which will appear as <code>na_color</code> in the heatmap).</p></li>
</ul></li>
<li><p><strong>Chart Construction:</strong></p><ul><li><p>Initializes a <code>highchart</code> object.</p></li>
<li><p>Configures <code>title</code>, <code>subtitle</code>, axis labels.</p></li>
<li><p>Sets up <code>hc_colorAxis</code> based on <code>color_min</code>, <code>color_max</code>, and <code>color_palette</code>.</p></li>
<li><p>Adds the heatmap series using <code>hc_add_series</code>, mapping <code>x_var</code>, <code>y_var</code>, and <code>value_var</code>.</p></li>
<li><p>Customizes <code>plotOptions</code> for heatmap, including data labels and <code>nullColor</code>.</p></li>
</ul></li>
<li><p><strong>Tooltip Customization:</strong> Defines a JavaScript <code>tooltip.formatter</code> for detailed hover information.</p></li>
</ol></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

