<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a Heatmap â€” create_heatmap â€¢ dashboardr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="â€image/svg+xmlâ€" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.9/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create a Heatmap â€” create_heatmap"><meta name="description" content="This function creates a heatmap for bivariate data, visualizing
the relationship between two categorical variables and a numeric value
using color intensity. It handles ordered factors, ensures all combinations
are plotted, and allows for extensive customization. It also includes
robust handling of missing values (NA) by allowing them to be displayed
as explicit categories."><meta property="og:description" content="This function creates a heatmap for bivariate data, visualizing
the relationship between two categorical variables and a numeric value
using color intensity. It handles ordered factors, ensures all combinations
are plotted, and allows for extensive customization. It also includes
robust handling of missing values (NA) by allowing them to be displayed
as explicit categories."><meta property="og:image" content="https://favstats.github.io/dashboardr/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dashboardr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-features.html">Advanced Features</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Visualization Types</h6></li>
    <li><a class="dropdown-item" href="../articles/bar_vignette.html">Bar Charts</a></li>
    <li><a class="dropdown-item" href="../articles/timeline_vignette.html">Timelines</a></li>
    <li><a class="dropdown-item" href="../articles/stackedbar_vignette.html">Stacked Bars</a></li>
    <li><a class="dropdown-item" href="../articles/stackedbars_vignette.html">Stacked Bars (Multiple)</a></li>
    <li><a class="dropdown-item" href="../articles/heatmap_vignette.html">Heatmaps</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown--live-demos" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">ðŸŽ¯ Live Demos</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown--live-demos"><li><a class="dropdown-item" href="../articles/demos.html">ðŸ“š About the Demos</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../live-demos/tutorial/docs/index.html">ðŸŽ“ Tutorial Dashboard</a></li>
    <li><a class="dropdown-item" href="../live-demos/showcase/docs/index.html">ðŸš€ Showcase Dashboard</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Create a Heatmap</h1>

      <div class="d-none name"><code>create_heatmap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates a heatmap for bivariate data, visualizing
the relationship between two categorical variables and a numeric value
using color intensity. It handles ordered factors, ensures all combinations
are plotted, and allows for extensive customization. It also includes
robust handling of missing values (NA) by allowing them to be displayed
as explicit categories.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_heatmap</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">x_var</span>,</span>
<span>  <span class="va">y_var</span>,</span>
<span>  <span class="va">value_var</span>,</span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  value_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  x_tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  y_tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  x_tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  y_tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  x_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  color_min <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  color_max <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#FFFFFF"</span>, <span class="st">"#7CB5EC"</span><span class="op">)</span>,</span>
<span>  na_color <span class="op">=</span> <span class="st">"transparent"</span>,</span>
<span>  data_labels_enabled <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  data_labels_format <span class="op">=</span> <span class="st">"{point.value}"</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  na_label_x <span class="op">=</span> <span class="st">"(Missing)"</span>,</span>
<span>  na_label_y <span class="op">=</span> <span class="st">"(Missing)"</span>,</span>
<span>  x_map_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_map_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  agg_fun <span class="op">=</span> <span class="va">mean</span>,</span>
<span>  weight_var <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame containing the variables to plot.</p></dd>


<dt id="arg-x-var">x_var<a class="anchor" aria-label="anchor" href="#arg-x-var"></a></dt>
<dd><p>String. Name of the column for the X-axis categories.</p></dd>


<dt id="arg-y-var">y_var<a class="anchor" aria-label="anchor" href="#arg-y-var"></a></dt>
<dd><p>String. Name of the column for the Y-axis categories.</p></dd>


<dt id="arg-value-var">value_var<a class="anchor" aria-label="anchor" href="#arg-value-var"></a></dt>
<dd><p>String. Name of the numeric column whose values will
determine the color intensity.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>Optional string. Main chart title.</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>Optional string. Chart subtitle.</p></dd>


<dt id="arg-x-label">x_label<a class="anchor" aria-label="anchor" href="#arg-x-label"></a></dt>
<dd><p>Optional string. X-axis label. Defaults to <code>x_var</code>.</p></dd>


<dt id="arg-y-label">y_label<a class="anchor" aria-label="anchor" href="#arg-y-label"></a></dt>
<dd><p>Optional string. Y-axis label. Defaults to <code>y_var</code>.</p></dd>


<dt id="arg-value-label">value_label<a class="anchor" aria-label="anchor" href="#arg-value-label"></a></dt>
<dd><p>Optional string. Label for the color axis. Defaults to <code>value_var</code>.</p></dd>


<dt id="arg-tooltip-prefix">tooltip_prefix<a class="anchor" aria-label="anchor" href="#arg-tooltip-prefix"></a></dt>
<dd><p>Optional string prepended in the tooltip value.</p></dd>


<dt id="arg-tooltip-suffix">tooltip_suffix<a class="anchor" aria-label="anchor" href="#arg-tooltip-suffix"></a></dt>
<dd><p>Optional string appended in the tooltip value.</p></dd>


<dt id="arg-x-tooltip-suffix">x_tooltip_suffix<a class="anchor" aria-label="anchor" href="#arg-x-tooltip-suffix"></a></dt>
<dd><p>Optional string appended to x value in tooltip.</p></dd>


<dt id="arg-y-tooltip-suffix">y_tooltip_suffix<a class="anchor" aria-label="anchor" href="#arg-y-tooltip-suffix"></a></dt>
<dd><p>Optional string appended to y value in tooltip.</p></dd>


<dt id="arg-x-tooltip-prefix">x_tooltip_prefix<a class="anchor" aria-label="anchor" href="#arg-x-tooltip-prefix"></a></dt>
<dd><p>Optional string prepended to x value in tooltip.</p></dd>


<dt id="arg-y-tooltip-prefix">y_tooltip_prefix<a class="anchor" aria-label="anchor" href="#arg-y-tooltip-prefix"></a></dt>
<dd><p>Optional string prepended to y value in tooltip.</p></dd>


<dt id="arg-x-order">x_order<a class="anchor" aria-label="anchor" href="#arg-x-order"></a></dt>
<dd><p>Optional character vector to order the factor levels of <code>x_var</code>.</p></dd>


<dt id="arg-y-order">y_order<a class="anchor" aria-label="anchor" href="#arg-y-order"></a></dt>
<dd><p>Optional character vector to order the factor levels of <code>y_var</code>.</p></dd>


<dt id="arg-color-min">color_min<a class="anchor" aria-label="anchor" href="#arg-color-min"></a></dt>
<dd><p>Optional numeric. Minimum value for the color axis. If NULL, defaults to data min.</p></dd>


<dt id="arg-color-max">color_max<a class="anchor" aria-label="anchor" href="#arg-color-max"></a></dt>
<dd><p>Optional numeric. Maximum value for the color axis. If NULL, defaults to data max.</p></dd>


<dt id="arg-color-palette">color_palette<a class="anchor" aria-label="anchor" href="#arg-color-palette"></a></dt>
<dd><p>Optional character vector of colors for the color gradient.
Example: <code>c("#FFFFFF", "#7CB5EC")</code> for white to light blue. Can also be a single color for gradient start.</p></dd>


<dt id="arg-na-color">na_color<a class="anchor" aria-label="anchor" href="#arg-na-color"></a></dt>
<dd><p>Optional string. Color for NA values in <code>value_var</code> cells. Default "transparent".</p></dd>


<dt id="arg-data-labels-enabled">data_labels_enabled<a class="anchor" aria-label="anchor" href="#arg-data-labels-enabled"></a></dt>
<dd><p>Logical. If TRUE, display data labels on each cell. Default TRUE.</p></dd>


<dt id="arg-data-labels-format">data_labels_format<a class="anchor" aria-label="anchor" href="#arg-data-labels-format"></a></dt>
<dd><p>Optional string. Format for data labels. Default "point.value".</p></dd>


<dt id="arg-include-na">include_na<a class="anchor" aria-label="anchor" href="#arg-include-na"></a></dt>
<dd><p>Logical. If TRUE, treats NA values in <code>x_var</code> or <code>y_var</code>
as explicit categories using <code>na_label_x</code> and <code>na_label_y</code>. If FALSE (default),
rows with NA in <code>x_var</code> or <code>y_var</code> are excluded from aggregation.</p></dd>


<dt id="arg-na-label-x">na_label_x<a class="anchor" aria-label="anchor" href="#arg-na-label-x"></a></dt>
<dd><p>Optional string. Custom label for NA values in <code>x_var</code>. Defaults to "(Missing)".</p></dd>


<dt id="arg-na-label-y">na_label_y<a class="anchor" aria-label="anchor" href="#arg-na-label-y"></a></dt>
<dd><p>Optional string. Custom label for NA values in <code>y_var</code>. Defaults to "(Missing)".</p></dd>


<dt id="arg-x-map-values">x_map_values<a class="anchor" aria-label="anchor" href="#arg-x-map-values"></a></dt>
<dd><p>Optional named list to recode x_var values for display.</p></dd>


<dt id="arg-y-map-values">y_map_values<a class="anchor" aria-label="anchor" href="#arg-y-map-values"></a></dt>
<dd><p>Optional named list to recode y_var values for display.</p></dd>


<dt id="arg-agg-fun">agg_fun<a class="anchor" aria-label="anchor" href="#arg-agg-fun"></a></dt>
<dd><p>Function to aggregate duplicate x/y combinations. Default is <code>mean</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>highcharter</code> heatmap object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function performs the following steps:</p><ol><li><p><strong>Input validation:</strong> Checks <code>data</code>, <code>x_var</code>, <code>y_var</code>, and <code>value_var</code>.</p></li>
<li><p><strong>Data Preparation:</strong></p><ul><li><p>Handles <code>haven_labelled</code> columns by converting them to factors.</p></li>
<li><p>Applies value mapping if <code>x_map_values</code> or <code>y_map_values</code> (new parameter) are provided.</p></li>
<li><p>Processes NA values in <code>x_var</code> and <code>y_var</code>: if <code>include_na = TRUE</code>, NAs are converted to a specified label; otherwise, rows with NAs in these variables are filtered out.</p></li>
<li><p>Converts <code>x_var</code> and <code>y_var</code> to factors and applies <code>x_order</code> and <code>y_order</code>.</p></li>
<li><p>Uses <code><a href="https://tidyr.tidyverse.org/reference/complete.html" class="external-link">tidyr::complete</a></code> to ensure all <code>x_var</code>/<code>y_var</code> combinations are present,
filling missing <code>value_var</code> with <code>NA_real_</code> (which will appear as <code>na_color</code> in the heatmap).</p></li>
</ul></li>
<li><p><strong>Chart Construction:</strong></p><ul><li><p>Initializes a <code>highchart</code> object.</p></li>
<li><p>Configures <code>title</code>, <code>subtitle</code>, axis labels.</p></li>
<li><p>Sets up <code>hc_colorAxis</code> based on <code>color_min</code>, <code>color_max</code>, and <code>color_palette</code>.</p></li>
<li><p>Adds the heatmap series using <code>hc_add_series</code>, mapping <code>x_var</code>, <code>y_var</code>, and <code>value_var</code>.</p></li>
<li><p>Customizes <code>plotOptions</code> for heatmap, including data labels and <code>nullColor</code>.</p></li>
</ul></li>
<li><p><strong>Tooltip Customization:</strong> Defines a JavaScript <code>tooltip.formatter</code> for detailed hover information.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#TODO: something is off here so will comment out for now</span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Average Age by Education and Gender</span></span></span>
<span class="r-in"><span><span class="co"># Let's create a heatmap showing the average age across education levels and gender.</span></span></span>
<span class="r-in"><span><span class="co"># We will use the GSS dataset from 2020</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Step 1: Prepare data for heatmap</span></span></span>
<span class="r-in"><span><span class="co">#age_education_data &lt;- gss_clean %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   filter(!is.na(degree_3), !is.na(sex_3), !is.na(age_3)) %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   group_by(degree_3, sex_3) %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   summarise(avg_age = mean(age_3, na.rm = TRUE), .groups = 'drop')</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Step 2: Create basic heatmap</span></span></span>
<span class="r-in"><span><span class="co"># plot1 &lt;- create_heatmap(</span></span></span>
<span class="r-in"><span><span class="co">#   data = age_education_data,</span></span></span>
<span class="r-in"><span><span class="co">#   x_var = "degree_3",</span></span></span>
<span class="r-in"><span><span class="co">#   y_var = "sex_3",</span></span></span>
<span class="r-in"><span><span class="co">#   value_var = "avg_age",</span></span></span>
<span class="r-in"><span><span class="co">#   title = "Average Age by Education Level and Gender",</span></span></span>
<span class="r-in"><span><span class="co">#   subtitle = "GSS Panel 2020 - Wave 3",</span></span></span>
<span class="r-in"><span><span class="co">#   x_label = "Education Level",</span></span></span>
<span class="r-in"><span><span class="co">#   y_label = "Gender",</span></span></span>
<span class="r-in"><span><span class="co">#   value_label = "Average Age",</span></span></span>
<span class="r-in"><span><span class="co">#   color_palette = c("#ffffff", "#2E86AB")</span></span></span>
<span class="r-in"><span><span class="co"># )</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">plot1</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'plot1' not found</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

