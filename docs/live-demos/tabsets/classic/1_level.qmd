---
title: "{{< iconify ph rows >}} 1 Level"
format: html
---

```{r, echo=FALSE, results='asis', message=FALSE, warning=FALSE}
dashboardr::.page_config(accessibility = TRUE)
```

## Single Level Tabs

Each visualization gets a **different** tabgroup name, creating separate top-level tabs:

```r
add_viz(..., tabgroup = "age") %>%
add_viz(..., tabgroup = "education") %>%
add_viz(..., tabgroup = "region")
```

```{r setup}
#| echo: false
#| warning: false
#| message: false
#| error: false
#| results: 'hide'

# Load dashboardr (includes dplyr, highcharter as dependencies)
library(dashboardr)

# Global chunk options
knitr::opts_chunk$set(
  echo = FALSE,
  warning = FALSE,
  message = FALSE,
  error = FALSE,
  fig.width = 12,
  fig.height = 8,
  dpi = 300
)

# Load data
data <- readRDS('dataset_2000obs.rds')

# Data summary
cat('Dataset loaded:', nrow(data), 'rows,', ncol(data), 'columns\n')

```


::: {.panel-tabset}

### By Age


```{r age}
# Satisfaction by Age
result <- viz_stackedbar(
  data = data,
  title = "Satisfaction by Age",
  x_var = "age_group",
  stack_var = "satisfaction",
  subtitle = "How different generations feel",
  x_label = "Age Group",
  y_label = "Percentage",
  stack_label = "Satisfaction",
  stacked_type = "percent",
  x_order = c("18-29", "30-44", "45-59", "60+"),
  stack_order = c("Very Satisfied", "Satisfied", "Neutral", "Dissatisfied"),
  color_palette = c("#22C55E", "#84CC16", "#EAB308", "#EF4444"),
  tooltip_suffix = "%"
)

# Set chart height
if (inherits(result, 'highchart')) {
  result <- highcharter::hc_size(result, height = 500)
}

# Force container height with explicit wrapper
result <- htmltools::div(
  style = 'height: 500px !important; min-height: 500px !important; width: 100%; overflow: visible;',
  result
)

result
```


### By Education


```{r education}
# Satisfaction by Education
result <- viz_stackedbar(
  data = data,
  title = "Satisfaction by Education",
  x_var = "education",
  stack_var = "satisfaction",
  subtitle = "Education level and satisfaction",
  x_label = "Education Level",
  y_label = "Percentage",
  stack_label = "Satisfaction",
  stacked_type = "percent",
  x_order = c("High School", "Bachelor's", "Graduate"),
  stack_order = c("Very Satisfied", "Satisfied", "Neutral", "Dissatisfied"),
  color_palette = c("#22C55E", "#84CC16", "#EAB308", "#EF4444"),
  tooltip_suffix = "%"
)

# Set chart height
if (inherits(result, 'highchart')) {
  result <- highcharter::hc_size(result, height = 500)
}

# Force container height with explicit wrapper
result <- htmltools::div(
  style = 'height: 500px !important; min-height: 500px !important; width: 100%; overflow: visible;',
  result
)

result
```


### By Region


```{r region}
# Satisfaction by Region
result <- viz_stackedbar(
  data = data,
  title = "Satisfaction by Region",
  x_var = "region",
  stack_var = "satisfaction",
  subtitle = "Regional patterns",
  x_label = "Region",
  y_label = "Percentage",
  stack_label = "Satisfaction",
  stacked_type = "percent",
  x_order = c("North", "South", "East", "West"),
  stack_order = c("Very Satisfied", "Satisfied", "Neutral", "Dissatisfied"),
  color_palette = c("#22C55E", "#84CC16", "#EAB308", "#EF4444"),
  tooltip_suffix = "%",
  horizontal = TRUE
)

# Set chart height
if (inherits(result, 'highchart')) {
  result <- highcharter::hc_size(result, height = 500)
}

# Force container height with explicit wrapper
result <- htmltools::div(
  style = 'height: 500px !important; min-height: 500px !important; width: 100%; overflow: visible;',
  result
)

result
```


:::

