<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Multi-Question Stacked Bar Charts (Legacy Reference) ‚Ä¢ dashboardr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Multi-Question Stacked Bar Charts (Legacy Reference)">
<style>
/* Navbar logo */
.navbar-brand img {
  max-height: 30px;
  width: auto;
  object-fit: contain;
}
/* Home page logo - limit size */
.page-header .logo {
  max-width: 150px;
  height: auto;
}
/* Also target the img in the README content */
#dashboardr- img[src*="logo"] {
  max-width: 150px;
  height: auto;
  float: right;
  margin-left: 20px;
}
</style>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dashboardr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">üöÄ Getting Started</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üìñ Core Concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/content-collections.html">- Content</a></li>
    <li><a class="dropdown-item" href="../articles/pages.html">- Pages</a></li>
    <li><a class="dropdown-item" href="../articles/dashboards.html">- Dashboards</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/advanced-features.html">‚öôÔ∏è Advanced Features</a></li>
    <li><a class="dropdown-item" href="../articles/publishing_dashboards.html">üåê Publishing Dashboards</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üìä Visualization Types</h6></li>
    <li><a class="dropdown-item" href="../articles/bar_vignette.html">- Bar Charts</a></li>
    <li><a class="dropdown-item" href="../articles/timeline_vignette.html">- Timelines</a></li>
    <li><a class="dropdown-item" href="../articles/stackedbar_vignette.html">- Stacked Bars</a></li>
    <li><a class="dropdown-item" href="../articles/heatmap_vignette.html">- Heatmaps</a></li>
    <li><a class="dropdown-item" href="../articles/histogram_vignette.html">- Histograms</a></li>
    <li><a class="dropdown-item" href="../articles/density_vignette.html">- Density Plots</a></li>
    <li><a class="dropdown-item" href="../articles/boxplot_vignette.html">- Box Plots</a></li>
    <li><a class="dropdown-item" href="../articles/scatter_vignette.html">- Scatter Plots</a></li>
    <li><a class="dropdown-item" href="../articles/treemap_vignette.html">- Treemaps</a></li>
    <li><a class="dropdown-item" href="../articles/map_vignette.html">- Maps</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown--live-demos" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">üéØ Live Demos</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown--live-demos">
<li><a class="dropdown-item" href="../articles/demos.html">üìö About the Demos</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../live-demos/tutorial/index.html">üéì Tutorial Dashboard</a></li>
    <li><a class="dropdown-item" href="../live-demos/showcase/index.html">üöÄ Showcase Dashboard</a></li>
    <li><a class="external-link dropdown-item" href="https://www.digiqmonitor.nl/">üåç DigIQ Monitor</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üé® Tabset Themes</h6></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/pills/index.html">   Pills</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/modern/index.html">   Modern</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/minimal/index.html">   Minimal</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/classic/index.html">   Classic</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/underline/index.html">   Underline</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/segmented/index.html">   Segmented</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../live-demos/inputs/index.html">üéõÔ∏è Interactive Inputs</a></li>
    <li><a class="dropdown-item" href="../live-demos/sidebar/index.html">üìã Sidebar Filters</a></li>
    <li><a class="dropdown-item" href="../live-demos/overlay/index.html">üé≠ Loading Overlays</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="stackedbars_vignette_files/htmltools-fill-0.5.9/fill.css" rel="stylesheet">
<script src="stackedbars_vignette_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="stackedbars_vignette_files/proj4js-2.3.15/proj4.js"></script><link href="stackedbars_vignette_files/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="stackedbars_vignette_files/highcharts-9.3.1/highcharts.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/highcharts-3d.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/highcharts-more.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/stock.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/map.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/data.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/exporting.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/drilldown.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/item-series.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/annotations.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/export-data.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/funnel.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/heatmap.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/treemap.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/sankey.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/organization.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/streamgraph.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/sunburst.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/vector.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/wordcloud.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/xrange.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/tilemap.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/venn.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/gantt.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/timeline.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/bullet.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/coloraxis.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/dumbbell.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/lollipop.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/series-label.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/plugins/motion.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/custom/reset.js"></script><script src="stackedbars_vignette_files/highcharts-9.3.1/modules/boost.js"></script><script src="stackedbars_vignette_files/highchart-binding-0.9.4/highchart.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Multi-Question Stacked Bar Charts (Legacy Reference)</h1>
                        <h4 data-toc-skip class="author">Alexandra
Pafford</h4>
            
            <h4 data-toc-skip class="date">14/08/2025</h4>
      

      <div class="d-none name"><code>stackedbars_vignette.Rmd</code></div>
    </div>

    
    
<blockquote>
<p><strong>Note:</strong> This functionality is now part of the unified
<code><a href="../reference/viz_stackedbar.html">viz_stackedbar()</a></code> function. You can use
<code>viz_stackedbar(data, x_vars = ...)</code> for the same
functionality shown here. See the <a href="stackedbar_vignette.html">main stackedbar vignette</a> for
comprehensive documentation.</p>
<p>The examples below still work with <code><a href="../reference/viz_stackedbars.html">viz_stackedbars()</a></code> for
backward compatibility, but we recommend using
<code><a href="../reference/viz_stackedbar.html">viz_stackedbar()</a></code> for new code.</p>
</blockquote>
<p>This guide covers visualizing responses to multiple Likert-type
questions simultaneously.</p>
<p>The multi-variable mode transforms wide survey data (where each
question is a separate column) into an elegant stacked bar chart where:
- Each bar represents a different survey question - Each stack within a
bar represents a response category (e.g., ‚ÄúStrongly Agree‚Äù, ‚ÄúAgree‚Äù,
etc.) - Colors show the distribution of responses across all
questions</p>
<p>This approach is particularly valuable for: - <strong>Comparing
response patterns</strong> across multiple related questions -
<strong>Identifying questions</strong> with similar or different
response distributions - <strong>Visualizing survey batteries</strong>
(sets of questions with the same response scale) - <strong>Showing
institutional confidence</strong>, satisfaction measures, or attitude
scales</p>
<p>The function handles many data preparation tasks automatically,
including pivoting from wide to long format, managing
<code>haven_labelled</code> variables from SPSS data, and creating
publication-ready interactive visualizations.</p>
<div class="section level3">
<h3 id="migration-to-unified-function">Migration to Unified Function<a class="anchor" aria-label="anchor" href="#migration-to-unified-function"></a>
</h3>
<p>To migrate from <code><a href="../reference/viz_stackedbars.html">viz_stackedbars()</a></code> to
<code><a href="../reference/viz_stackedbar.html">viz_stackedbar()</a></code>, simply change the function name:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Old way (still works)</span></span>
<span><span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span><span class="va">data</span>, x_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"q1"</span>, <span class="st">"q2"</span>, <span class="st">"q3"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># New preferred way</span></span>
<span><span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span><span class="va">data</span>, x_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"q1"</span>, <span class="st">"q2"</span>, <span class="st">"q3"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>All parameters work the same way. The unified
<code><a href="../reference/viz_stackedbar.html">viz_stackedbar()</a></code> also supports crosstab-style charts using
<code>x_var</code> + <code>stack_var</code> parameters.</p>
</div>
<div class="section level3">
<h3 id="getting-started">‚öôÔ∏è Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<p>Let‚Äôs load the necessary libraries and examine our dataset. For this
demonstration, we will be using the 2020 wave from the GSS dataset.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kjhealy/gssr" class="external-link">gssr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'gssr' was built under R version 4.4.3</span></span></code></pre>
<pre><code><span><span class="co">## Package loaded. To attach the GSS data, type data(gss_all) at the console.</span></span>
<span><span class="co">## For the panel data and documentation, type e.g. data(gss_panel08_long) and data(gss_panel_doc).</span></span>
<span><span class="co">## For help on a specific GSS variable, type ?varname at the console.</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jkunst.com/highcharter/" class="external-link">highcharter</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Registered S3 method overwritten by 'quantmod':</span></span>
<span><span class="co">##   method            from</span></span>
<span><span class="co">##   as.zoo.data.frame zoo</span></span></code></pre>
<pre><code><span><span class="co">## Highcharts (www.highcharts.com) is a Highsoft software product which is</span></span></code></pre>
<pre><code><span><span class="co">## not free for commercial and Governmental use</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'tidyr' was built under R version 4.4.3</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://favstats.github.io/dashboardr/">dashboardr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load GSS Panel 2020 data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-preparation">üìã Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h3>
<p>Let‚Äôs identify and prepare Likert-type questions from the 2016 wave
(<code>_1a</code> variables) for ease of use in this practical.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Look for confidence-related questions (common Likert-type questions in GSS)</span></span>
<span><span class="va">confidence_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^con.*_1a$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Confidence variables found:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Confidence variables found:</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">confidence_vars</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "conarmy_1a"  "conbus_1a"   "conclerg_1a" "condom_1a"   "condrift_1a"</span></span>
<span><span class="co">##  [6] "coneduc_1a"  "confed_1a"   "confinan_1a" "coninc_1a"   "conjudge_1a"</span></span>
<span><span class="co">## [11] "conlabor_1a" "conlegis_1a" "conmedic_1a" "conpress_1a" "conrinc_1a" </span></span>
<span><span class="co">## [16] "consci_1a"   "consent_1a"  "contv_1a"    "conbiz_1a"   "conchurh_1a"</span></span>
<span><span class="co">## [21] "concong_1a"  "concourt_1a" "condemnd_1a" "conf2f_1a"   "conschls_1a"</span></span>
<span><span class="co">## [26] "conwkday_1a"</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Look for other attitude/satisfaction variables</span></span>
<span><span class="va">attitude_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"(trust|fair|helpful|happy).*_1a$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nAttitude variables found:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attitude variables found:</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">attitude_vars</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "fair_1a"      "happy_1a"     "helpful_1a"   "trust_1a"     "befair_1a"   </span></span>
<span><span class="co">##  [6] "cantrust_1a"  "fairearn_1a"  "spvtrfair_1a" "trustman_1a"  "trustsci_1a" </span></span>
<span><span class="co">## [11] "unhappy_1a"</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a working dataset with key Likert-type variables</span></span>
<span><span class="va">gss_likert</span> <span class="op">&lt;-</span> <span class="va">gss_panel20</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="co"># Confidence in institutions (if available)</span></span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">any_of</a></span><span class="op">(</span><span class="va">confidence_vars</span><span class="op">)</span>,</span>
<span>    <span class="co"># Individual attitudes</span></span>
<span>    <span class="va">trust_1a</span>, <span class="va">fair_1a</span>, <span class="va">helpful_1a</span>, <span class="va">happy_1a</span>,</span>
<span>    <span class="co"># Additional context variables</span></span>
<span>    <span class="va">age_1a</span>, <span class="va">sex_1a</span>, <span class="va">degree_1a</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Remove completely empty rows</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_any</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">~</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine the response patterns for key variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Trust responses:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Trust responses:</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_likert</span><span class="op">$</span><span class="va">trust_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##    1    2    3 &lt;NA&gt; </span></span>
<span><span class="co">##  623 1244   79  921</span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nFair responses:\n"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Fair responses:</span></span></code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_likert</span><span class="op">$</span><span class="va">fair_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##    1    2    3 &lt;NA&gt; </span></span>
<span><span class="co">##  797 1028  114  928</span></span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nHelpful responses:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Helpful responses:</span></span></code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_likert</span><span class="op">$</span><span class="va">helpful_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##    1    2    3 &lt;NA&gt; </span></span>
<span><span class="co">##  917  892  137  921</span></span></code></pre>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nHappy responses:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Happy responses:</span></span></code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_likert</span><span class="op">$</span><span class="va">happy_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##    1    2    3 &lt;NA&gt; </span></span>
<span><span class="co">##  806 1601  452    8</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="basic-multi-question-charts">üìä Basic Multi-Question Charts<a class="anchor" aria-label="anchor" href="#basic-multi-question-charts"></a>
</h2>
<div class="section level3">
<h3 id="example-1-social-trust-and-attitudes">Example 1: Social Trust and Attitudes<a class="anchor" aria-label="anchor" href="#example-1-social-trust-and-attitudes"></a>
</h3>
<p>Now that we have our simplified data set, let‚Äôs create our first
multi-question chart using social attitude variables.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define our questions and labels</span></span>
<span><span class="va">social_questions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trust_1a"</span>, <span class="st">"fair_1a"</span>, <span class="st">"helpful_1a"</span><span class="op">)</span></span>
<span><span class="va">social_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Interpersonal Trust"</span>,</span>
<span>  <span class="st">"Fairness of Others"</span>, </span>
<span>  <span class="st">"Helpfulness of Others"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create basic multi-question chart</span></span>
<span><span class="va">plot1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_likert</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="va">social_labels</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Attitudes and Trust"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"GSS Panel 2016 - Distribution of responses across social attitude questions"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Social Attitude Dimension"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response Level"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"normal"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note: viz_stackedbars() is now part of viz_stackedbar().</span></span>
<span><span class="co">## You can use viz_stackedbar(data, x_vars = ...) for the same functionality.</span></span>
<span><span class="co">## viz_stackedbars() will continue to work but consider updating your code.</span></span></code></pre>
<pre><code><span><span class="co">## Warning: `trust_1a` and `fair_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: `trust_1a` and `helpful_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot1</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Attitudes and Trust"},"yAxis":{"title":{"text":"Count"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"normal","dataLabels":{"enabled":true,"format":"{point.y:.0f}","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't trust","n":623,"y":623,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"can't trust","n":797,"y":797,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"can't trust","n":917,"y":917,"name":"Helpfulness of Others"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"can't be too careful","n":892,"y":892,"name":"Helpfulness of Others"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"depends","n":79,"y":79,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"depends","n":114,"y":114,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"depends","n":137,"y":137,"name":"Helpfulness of Others"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Social Attitude Dimension"},"categories":["Interpersonal Trust","Fairness of Others","Helpfulness of Others"]},"subtitle":{"text":"GSS Panel 2016 - Distribution of responses across social attitude questions"},"legend":{"title":{"text":"Response Level"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-2-percentage-based-comparison">Example 2: Percentage-Based Comparison<a class="anchor" aria-label="anchor" href="#example-2-percentage-based-comparison"></a>
</h3>
<p>Now let‚Äôs create a percentage-based chart to better compare response
patterns across questions.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create percentage-based chart with custom colors</span></span>
<span><span class="va">plot2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_likert</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="va">social_labels</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Attitudes - Response Distribution"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Percentage breakdown showing response patterns across questions"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Social Attitude Dimension"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response Category"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#d7191c"</span>, <span class="st">"#fdae61"</span>, <span class="st">"#ffffbf"</span>, <span class="st">"#abdda4"</span>, <span class="st">"#2b83ba"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `trust_1a` and `fair_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: `trust_1a` and `helpful_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot2</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Attitudes - Response Distribution"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't trust","n":623,"y":623,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"can't trust","n":797,"y":797,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"can't trust","n":917,"y":917,"name":"Helpfulness of Others"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"can't be too careful","n":892,"y":892,"name":"Helpfulness of Others"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"depends","n":79,"y":79,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"depends","n":114,"y":114,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"depends","n":137,"y":137,"name":"Helpfulness of Others"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Social Attitude Dimension"},"categories":["Interpersonal Trust","Fairness of Others","Helpfulness of Others"]},"subtitle":{"text":"Percentage breakdown showing response patterns across questions"},"legend":{"title":{"text":"Response Category"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="advanced-customization">üé® Advanced Customization<a class="anchor" aria-label="anchor" href="#advanced-customization"></a>
</h2>
<div class="section level3">
<h3 id="example-3-custom-response-ordering-and-mapping">Example 3: Custom Response Ordering and Mapping<a class="anchor" aria-label="anchor" href="#example-3-custom-response-ordering-and-mapping"></a>
</h3>
<p>Let‚Äôs create a more sophisticated chart with custom response ordering
and cleaner labels.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, let's examine what the actual response values are</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Unique trust responses:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Unique trust responses:</span></span></code></pre>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">gss_likert</span><span class="op">$</span><span class="va">trust_1a</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] NA  "3" "1" "2"</span></span></code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nUnique fair responses:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Unique fair responses:</span></span></code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">gss_likert</span><span class="op">$</span><span class="va">fair_1a</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] NA  "1" "2" "3"</span></span></code></pre>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#TODO: There is a "Series 4" I think for NA values, that needs to be dealt with, i.e. ideally that has its own value?</span></span>
<span><span class="co"># Create response mapping for cleaner labels</span></span>
<span><span class="va">response_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"can't trust"</span> <span class="op">=</span> <span class="st">"High Trust/Positive"</span>, <span class="co"># I know this doesn't make sense, let's just pretend for the sake of the demo</span></span>
<span>  <span class="st">"can't be too careful"</span> <span class="op">=</span> <span class="st">"Low Trust/Negative"</span>, </span>
<span>  <span class="st">"depends"</span> <span class="op">=</span> <span class="st">"Situational/Neutral"</span>,</span>
<span>  <span class="st">"would try to be fair"</span> <span class="op">=</span> <span class="st">"High Trust/Positive"</span>,</span>
<span>  <span class="st">"would take advantage of you"</span> <span class="op">=</span> <span class="st">"Low Trust/Negative"</span>,</span>
<span>  <span class="st">"depends"</span> <span class="op">=</span> <span class="st">"Situational/Neutral"</span>,</span>
<span>  <span class="st">"try to be helpful"</span> <span class="op">=</span> <span class="st">"High Trust/Positive"</span>,</span>
<span>  <span class="st">"looking out for themselves"</span> <span class="op">=</span> <span class="st">"Low Trust/Negative"</span>,</span>
<span>  <span class="st">"depends"</span> <span class="op">=</span> <span class="st">"Situational/Neutral"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define response order (from negative to positive)</span></span>
<span><span class="va">response_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low Trust/Negative"</span>, <span class="st">"Situational/Neutral"</span>, <span class="st">"High Trust/Positive"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create chart with custom mapping and ordering</span></span>
<span><span class="va">plot3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_likert</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="va">social_labels</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Trust Dimensions with Standardized Responses"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Responses mapped to consistent positive/negative categories"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Trust Dimension"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Trust Level"</span>,</span>
<span>  stack_map_values <span class="op">=</span> <span class="va">response_map</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="va">response_order</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#d62728"</span>, <span class="st">"#ffbb78"</span>, <span class="st">"#2ca02c"</span>, <span class="st">"grey"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `trust_1a` and `fair_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: `trust_1a` and `helpful_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: stack_order provided with stack_map_values. Ensure stack_order refers</span></span>
<span><span class="co">## to the *new* mapped labels.</span></span></code></pre>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot3</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Trust Dimensions with Standardized Responses"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"Low Trust/Negative","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"Low Trust/Negative","n":1244,"y":1244,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"Low Trust/Negative","n":1028,"y":1028,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"Low Trust/Negative","n":892,"y":892,"name":"Helpfulness of Others"}],"type":"column"},{"name":"Situational/Neutral","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"Situational/Neutral","n":79,"y":79,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"Situational/Neutral","n":114,"y":114,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"Situational/Neutral","n":137,"y":137,"name":"Helpfulness of Others"}],"type":"column"},{"name":"High Trust/Positive","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"High Trust/Positive","n":623,"y":623,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"High Trust/Positive","n":797,"y":797,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"High Trust/Positive","n":917,"y":917,"name":"Helpfulness of Others"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Trust Dimension"},"categories":["Interpersonal Trust","Fairness of Others","Helpfulness of Others"]},"subtitle":{"text":"Responses mapped to consistent positive/negative categories"},"legend":{"title":{"text":"Trust Level"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#d62728","#ffbb78","#2ca02c","grey"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-4-including-missing-values">Example 4: Including Missing Values<a class="anchor" aria-label="anchor" href="#example-4-including-missing-values"></a>
</h3>
<p>Let‚Äôs create a chart that explicitly shows missing data patterns.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create chart including NA values</span></span>
<span><span class="va">plot4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_likert</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="va">social_labels</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Attitudes Including Non-Responses"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Showing missing data patterns explicitly"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Social Attitude Question"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response"</span>,</span>
<span>  stack_map_values <span class="op">=</span> <span class="va">response_map</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_label_stack <span class="op">=</span> <span class="st">"No Answer/Not Asked"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"forestgreen"</span>, <span class="st">"darkred"</span>, <span class="st">"grey"</span>, <span class="st">"yellow"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `trust_1a` and `fair_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: `trust_1a` and `helpful_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot4</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Attitudes Including Non-Responses"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"High Trust/Positive","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"High Trust/Positive","n":623,"y":623,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"High Trust/Positive","n":797,"y":797,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"High Trust/Positive","n":917,"y":917,"name":"Helpfulness of Others"}],"type":"column"},{"name":"Low Trust/Negative","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"Low Trust/Negative","n":1244,"y":1244,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"Low Trust/Negative","n":1028,"y":1028,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"Low Trust/Negative","n":892,"y":892,"name":"Helpfulness of Others"}],"type":"column"},{"name":"Situational/Neutral","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"Situational/Neutral","n":79,"y":79,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"Situational/Neutral","n":114,"y":114,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"Situational/Neutral","n":137,"y":137,"name":"Helpfulness of Others"}],"type":"column"},{"name":"No Answer/Not Asked","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"No Answer/Not Asked","n":921,"y":921,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"No Answer/Not Asked","n":928,"y":928,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"No Answer/Not Asked","n":921,"y":921,"name":"Helpfulness of Others"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Social Attitude Question"},"categories":["Interpersonal Trust","Fairness of Others","Helpfulness of Others"]},"subtitle":{"text":"Showing missing data patterns explicitly"},"legend":{"title":{"text":"Response"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["forestgreen","darkred","grey","yellow"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="working-with-different-question-types">üìù Working with Different Question Types<a class="anchor" aria-label="anchor" href="#working-with-different-question-types"></a>
</h2>
<div class="section level3">
<h3 id="example-5-happiness-and-life-satisfaction">Example 5: Happiness and Life Satisfaction<a class="anchor" aria-label="anchor" href="#example-5-happiness-and-life-satisfaction"></a>
</h3>
<p>Let‚Äôs work with happiness as a different type of Likert scale.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a happiness-focused analysis</span></span>
<span><span class="va">happiness_questions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"happy_1a"</span><span class="op">)</span></span>
<span><span class="va">happiness_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"General Happiness"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check happiness response values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Happiness responses:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Happiness responses:</span></span></code></pre>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_likert</span><span class="op">$</span><span class="va">happy_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##    1    2    3 &lt;NA&gt; </span></span>
<span><span class="co">##  806 1601  452    8</span></span></code></pre>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create happiness chart</span></span>
<span><span class="va">plot5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_likert</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="st">"happy_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"General Happiness Distribution"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Well-being Measure"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Happiness Level"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2E8B57"</span>, <span class="st">"#FFD700"</span>, <span class="st">"#CD5C5C"</span>, <span class="st">"grey"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot5</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-1fb4450895fe099f74a1" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"General Happiness Distribution"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"very happy","data":[{".x_var_col":"happy_1a",".stack_var_col":"very happy","n":806,"y":806,"name":"happy_1a"}],"type":"column"},{"name":"pretty happy","data":[{".x_var_col":"happy_1a",".stack_var_col":"pretty happy","n":1601,"y":1601,"name":"happy_1a"}],"type":"column"},{"name":"not too happy","data":[{".x_var_col":"happy_1a",".stack_var_col":"not too happy","n":452,"y":452,"name":"happy_1a"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Well-being Measure"},"categories":"happy_1a"},"legend":{"title":{"text":"Happiness Level"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#2E8B57","#FFD700","#CD5C5C","grey"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-6-combining-different-question-types">Example 6: Combining Different Question Types<a class="anchor" aria-label="anchor" href="#example-6-combining-different-question-types"></a>
</h3>
<p>Let‚Äôs create a comprehensive chart combining different types of
attitude questions. In general, we recommend to have one battery per
chart. But, if you really want to have different responses in the same
chart, then you‚Äôll need to standardize the response labels before
charting, especially if using SPSS data.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#TODO: this chart I dont get it has so many different scales, I think ideally should only be used with same scale?</span></span>
<span><span class="co"># Standardize responses before charting</span></span>
<span><span class="va">gss_standardized</span> <span class="op">&lt;-</span> <span class="va">gss_likert</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="co"># Convert haven_labelled to character with labels first</span></span>
<span>    trust_1a_char <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">trust_1a</span>, levels <span class="op">=</span> <span class="st">"labels"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    fair_1a_char <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">fair_1a</span>, levels <span class="op">=</span> <span class="st">"labels"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    helpful_1a_char <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">helpful_1a</span>, levels <span class="op">=</span> <span class="st">"labels"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    happy_1a_char <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">happy_1a</span>, levels <span class="op">=</span> <span class="st">"labels"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Now do the case_when with the actual text labels</span></span>
<span>    trust_1a_std <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">trust_1a_char</span> <span class="op">==</span> <span class="st">"Can Trust"</span> <span class="op">~</span> <span class="st">"Positive"</span>,</span>
<span>      <span class="va">trust_1a_char</span> <span class="op">==</span> <span class="st">"Can't Be Too Careful"</span> <span class="op">~</span> <span class="st">"Negative"</span>, </span>
<span>      <span class="va">trust_1a_char</span> <span class="op">==</span> <span class="st">"Depends"</span> <span class="op">~</span> <span class="st">"Neutral"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">trust_1a_char</span></span>
<span>    <span class="op">)</span>,</span>
<span>    fair_1a_std <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">fair_1a_char</span> <span class="op">==</span> <span class="st">"Most People Try to Be Fair"</span> <span class="op">~</span> <span class="st">"Positive"</span>,</span>
<span>      <span class="va">fair_1a_char</span> <span class="op">==</span> <span class="st">"Most People Try to Take Advantage"</span> <span class="op">~</span> <span class="st">"Negative"</span>,</span>
<span>      <span class="va">fair_1a_char</span> <span class="op">==</span> <span class="st">"Depends"</span> <span class="op">~</span> <span class="st">"Neutral"</span>,  <span class="co"># Fixed: was trust_1a</span></span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">fair_1a_char</span></span>
<span>    <span class="op">)</span>,</span>
<span>    helpful_1a_std <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">helpful_1a_char</span> <span class="op">==</span> <span class="st">"Most People Try to Be Helpful"</span> <span class="op">~</span> <span class="st">"Positive"</span>,</span>
<span>      <span class="va">helpful_1a_char</span> <span class="op">==</span> <span class="st">"Most People Look Out for Themselves"</span> <span class="op">~</span> <span class="st">"Negative"</span>,</span>
<span>      <span class="va">helpful_1a_char</span> <span class="op">==</span> <span class="st">"Depends"</span> <span class="op">~</span> <span class="st">"Neutral"</span>,  <span class="co"># Fixed: was trust_1a</span></span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">helpful_1a_char</span></span>
<span>    <span class="op">)</span>,</span>
<span>    happy_1a_std <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">happy_1a_char</span> <span class="op">==</span> <span class="st">"Very Happy"</span> <span class="op">~</span> <span class="st">"Positive"</span>,</span>
<span>      <span class="va">happy_1a_char</span> <span class="op">==</span> <span class="st">"Pretty Happy"</span> <span class="op">~</span> <span class="st">"Neutral"</span>,</span>
<span>      <span class="va">happy_1a_char</span> <span class="op">==</span> <span class="st">"Not Too Happy"</span> <span class="op">~</span> <span class="st">"Negative"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">happy_1a_char</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check what the actual labels are after conversion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Trust labels:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Trust labels:</span></span></code></pre>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_standardized</span><span class="op">$</span><span class="va">trust_1a_char</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## can't be too careful          can't trust              depends </span></span>
<span><span class="co">##                 1244                  623                   79 </span></span>
<span><span class="co">##                 &lt;NA&gt; </span></span>
<span><span class="co">##                  921</span></span></code></pre>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nFair labels:\n"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Fair labels:</span></span></code></pre>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_standardized</span><span class="op">$</span><span class="va">fair_1a_char</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##                     depends would take advantage of you </span></span>
<span><span class="co">##                         114                         797 </span></span>
<span><span class="co">##        would try to be fair                        &lt;NA&gt; </span></span>
<span><span class="co">##                        1028                         928</span></span></code></pre>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nHelpful labels:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Helpful labels:</span></span></code></pre>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_standardized</span><span class="op">$</span><span class="va">helpful_1a_char</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##                    depends looking out for themselves </span></span>
<span><span class="co">##                        137                        892 </span></span>
<span><span class="co">##          try to be helpful                       &lt;NA&gt; </span></span>
<span><span class="co">##                        917                        921</span></span></code></pre>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nHappy labels:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Happy labels:</span></span></code></pre>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_standardized</span><span class="op">$</span><span class="va">happy_1a_char</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## not too happy  pretty happy    very happy          &lt;NA&gt; </span></span>
<span><span class="co">##           452          1601           806             8</span></span></code></pre>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Then use the standardized versions</span></span>
<span><span class="va">standardized_questions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trust_1a_std"</span>, <span class="st">"fair_1a_std"</span>, <span class="st">"helpful_1a_std"</span>, <span class="st">"happy_1a_std"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write the question labels</span></span>
<span><span class="va">standardized_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Can People Be Trusted?"</span>,</span>
<span>  <span class="st">"Are People Generally Fair?"</span>, </span>
<span>  <span class="st">"Are People Generally Helpful?"</span>,</span>
<span>  <span class="st">"How Happy Are You?"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create comprehensive chart</span></span>
<span><span class="va">plot6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_standardized</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">standardized_questions</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="va">standardized_labels</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Attitudes and Well-being Battery"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Multiple dimensions of social trust and personal happiness"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Question Domain"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">"Response: "</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"% of respondents"</span>,</span>
<span>  x_tooltip_suffix <span class="op">=</span> <span class="st">" question"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot6</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-10b3b7155e8045a1b2ad" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-10b3b7155e8045a1b2ad">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Attitudes and Well-being Battery"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't be too careful","data":[{".x_var_col":"Can People Be Trusted?",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Can People Be Trusted?"}],"type":"column"},{"name":"can't trust","data":[{".x_var_col":"Can People Be Trusted?",".stack_var_col":"can't trust","n":623,"y":623,"name":"Can People Be Trusted?"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Can People Be Trusted?",".stack_var_col":"depends","n":79,"y":79,"name":"Can People Be Trusted?"},{".x_var_col":"Are People Generally Fair?",".stack_var_col":"depends","n":114,"y":114,"name":"Are People Generally Fair?"},{".x_var_col":"Are People Generally Helpful?",".stack_var_col":"depends","n":137,"y":137,"name":"Are People Generally Helpful?"}],"type":"column"},{"name":"looking out for themselves","data":[{".x_var_col":"Are People Generally Helpful?",".stack_var_col":"looking out for themselves","n":892,"y":892,"name":"Are People Generally Helpful?"}],"type":"column"},{"name":"not too happy","data":[{".x_var_col":"How Happy Are You?",".stack_var_col":"not too happy","n":452,"y":452,"name":"How Happy Are You?"}],"type":"column"},{"name":"pretty happy","data":[{".x_var_col":"How Happy Are You?",".stack_var_col":"pretty happy","n":1601,"y":1601,"name":"How Happy Are You?"}],"type":"column"},{"name":"try to be helpful","data":[{".x_var_col":"Are People Generally Helpful?",".stack_var_col":"try to be helpful","n":917,"y":917,"name":"Are People Generally Helpful?"}],"type":"column"},{"name":"very happy","data":[{".x_var_col":"How Happy Are You?",".stack_var_col":"very happy","n":806,"y":806,"name":"How Happy Are You?"}],"type":"column"},{"name":"would take advantage of you","data":[{".x_var_col":"Are People Generally Fair?",".stack_var_col":"would take advantage of you","n":797,"y":797,"name":"Are People Generally Fair?"}],"type":"column"},{"name":"would try to be fair","data":[{".x_var_col":"Are People Generally Fair?",".stack_var_col":"would try to be fair","n":1028,"y":1028,"name":"Are People Generally Fair?"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Question Domain"},"categories":["Can People Be Trusted?","Are People Generally Fair?","Are People Generally Helpful?","How Happy Are You?"]},"subtitle":{"text":"Multiple dimensions of social trust and personal happiness"},"legend":{"title":{"text":"Response"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="advanced-analysis-techniques">üî¨ Advanced Analysis Techniques<a class="anchor" aria-label="anchor" href="#advanced-analysis-techniques"></a>
</h2>
<div class="section level3">
<h3 id="example-7-demographic-subgroup-analysis">Example 7: Demographic Subgroup Analysis<a class="anchor" aria-label="anchor" href="#example-7-demographic-subgroup-analysis"></a>
</h3>
<p>Let‚Äôs create separate charts for different demographic groups.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## TODO: maybe we dont need the if logic here? I think is confusing for the tutorial.</span></span>
<span><span class="co"># You probably noticed one of the response labels is incorrect. Let's fix that first. We can do this easily using mapping in the `viz_barcharts` function.</span></span>
<span><span class="va">trust_fix_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"can't trust"</span> <span class="op">=</span> <span class="st">"can trust"</span></span>
<span>  <span class="co"># Add other mappings if needed</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Next, let's examine what degree values actually exist</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Degree values in data:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Degree values in data:</span></span></code></pre>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_likert</span><span class="op">$</span><span class="va">degree_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##    0    1    2    3    4 &lt;NA&gt; </span></span>
<span><span class="co">##  328 1461  216  536  318    8</span></span></code></pre>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert degree to factor with labels to see what we're working with</span></span>
<span><span class="va">degree_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">gss_likert</span><span class="op">$</span><span class="va">degree_1a</span>, levels <span class="op">=</span> <span class="st">"labels"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nDegree labels:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Degree labels:</span></span></code></pre>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">degree_labels</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## degree_labels</span></span>
<span><span class="co">## associate/junior college               bachelor's                 graduate </span></span>
<span><span class="co">##                      216                      536                      318 </span></span>
<span><span class="co">##              high school    less than high school                     &lt;NA&gt; </span></span>
<span><span class="co">##                     1461                      328                        8</span></span></code></pre>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create education groups based on actual data</span></span>
<span><span class="va">gss_education</span> <span class="op">&lt;-</span> <span class="va">gss_likert</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    degree_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">degree_1a</span>, levels <span class="op">=</span> <span class="st">"labels"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    education_group <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">degree_label</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"less than high school"</span>, <span class="st">"high school"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"High School or Less"</span>,</span>
<span>      <span class="va">degree_label</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"associate/junior college"</span>, <span class="st">"bachelor's"</span>, <span class="st">"graduate"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"College or More"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Other/Missing"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">education_group</span> <span class="op">!=</span> <span class="st">"Other/Missing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the groups</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nEducation groups:\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Education groups:</span></span></code></pre>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_education</span><span class="op">$</span><span class="va">education_group</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##     College or More High School or Less                &lt;NA&gt; </span></span>
<span><span class="co">##                1070                1789                   0</span></span></code></pre>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter for college or more</span></span>
<span><span class="va">college_data</span> <span class="op">&lt;-</span> <span class="va">gss_education</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">education_group</span> <span class="op">==</span> <span class="st">"College or More"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCollege data rows:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">college_data</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## College data rows: 1070</span></span></code></pre>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter for high school or less  </span></span>
<span><span class="va">high_school_data</span> <span class="op">&lt;-</span> <span class="va">gss_education</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">education_group</span> <span class="op">==</span> <span class="st">"High School or Less"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"High school data rows:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">high_school_data</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## High school data rows: 1789</span></span></code></pre>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Only create charts if we have sufficient data</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">college_data</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">50</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">plot8a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">college_data</span>,</span>
<span>    x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>    x_var_labels <span class="op">=</span> <span class="va">social_labels</span>,</span>
<span>    stack_map_values <span class="op">=</span> <span class="va">trust_fix_map</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Social Attitudes Among College-Educated"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Junior college, bachelor's, and graduate degree holders (n="</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">college_data</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span>,</span>
<span>    x_label <span class="op">=</span> <span class="st">"Social Attitude Dimension"</span>,</span>
<span>    stack_label <span class="op">=</span> <span class="st">"Response"</span>,</span>
<span>    stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>    include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    na_label_stack <span class="op">=</span> <span class="st">"No Answer"</span>,</span>
<span>    tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>    color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2166ac"</span>, <span class="st">"#762a83"</span>, <span class="st">"#5aae61"</span>, <span class="st">"darkgrey"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"College-educated chart:"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">plot8a</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Not enough college-educated respondents for analysis\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `trust_1a` and `fair_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: `trust_1a` and `helpful_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## [1] "College-educated chart:"</span></span></code></pre>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">high_school_data</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">50</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">plot8b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">high_school_data</span>,</span>
<span>    x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>    x_var_labels <span class="op">=</span> <span class="va">social_labels</span>,</span>
<span>    stack_map_values <span class="op">=</span> <span class="va">trust_fix_map</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Social Attitudes Among High School Educated"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"High school diploma or less (n="</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">high_school_data</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span>,</span>
<span>    x_label <span class="op">=</span> <span class="st">"Social Attitude Dimension"</span>, </span>
<span>    stack_label <span class="op">=</span> <span class="st">"Response"</span>,</span>
<span>    stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>    include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    na_label_stack <span class="op">=</span> <span class="st">"No Answer"</span>,</span>
<span>    tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>    color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2166ac"</span>, <span class="st">"#762a83"</span>, <span class="st">"#5aae61"</span>, <span class="st">"darkgrey"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"High school educated chart:"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">plot8b</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Not enough high school educated respondents for analysis\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `trust_1a` and `fair_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span>
<span><span class="co">## `trust_1a` and `helpful_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## [1] "High school educated chart:"</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="working-with-survey-batteries">üìã Working with Survey Batteries<a class="anchor" aria-label="anchor" href="#working-with-survey-batteries"></a>
</h2>
<div class="section level3">
<h3 id="example-9-creating-question-batteries">Example 9: Creating Question Batteries<a class="anchor" aria-label="anchor" href="#example-9-creating-question-batteries"></a>
</h3>
<p>Let‚Äôs demonstrate how to work with related sets of questions (survey
batteries).</p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a social trust battery</span></span>
<span><span class="va">trust_battery</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trust_1a"</span>, <span class="st">"fair_1a"</span>, <span class="st">"helpful_1a"</span><span class="op">)</span></span>
<span><span class="va">trust_battery_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Interpersonal Trust"</span>,</span>
<span>  <span class="st">"Perceived Fairness"</span>,</span>
<span>  <span class="st">"Perceived Helpfulness"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a comprehensive battery analysis</span></span>
<span><span class="va">plot9</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_likert</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">trust_battery</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="va">trust_battery_labels</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Trust Battery - Complete Analysis"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Comprehensive view of social trust dimensions with enhanced tooltips"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Trust Dimension"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response Category"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">"Percentage: "</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"% of respondents"</span>,</span>
<span>  show_var_tooltip <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_label_stack<span class="op">=</span> <span class="st">"No answer"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#8c510a"</span>, <span class="st">"#d8b365"</span>, <span class="st">"#f6e8c3"</span>, <span class="st">"darkgrey"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `trust_1a` and `fair_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: `trust_1a` and `helpful_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot9</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-25c3e940e6859592f801" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-25c3e940e6859592f801">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Trust Battery - Complete Analysis"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't trust","n":623,"y":623,"name":"Interpersonal Trust"},{".x_var_col":"Perceived Fairness",".stack_var_col":"can't trust","n":797,"y":797,"name":"Perceived Fairness"},{".x_var_col":"Perceived Helpfulness",".stack_var_col":"can't trust","n":917,"y":917,"name":"Perceived Helpfulness"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Interpersonal Trust"},{".x_var_col":"Perceived Fairness",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Perceived Fairness"},{".x_var_col":"Perceived Helpfulness",".stack_var_col":"can't be too careful","n":892,"y":892,"name":"Perceived Helpfulness"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"depends","n":79,"y":79,"name":"Interpersonal Trust"},{".x_var_col":"Perceived Fairness",".stack_var_col":"depends","n":114,"y":114,"name":"Perceived Fairness"},{".x_var_col":"Perceived Helpfulness",".stack_var_col":"depends","n":137,"y":137,"name":"Perceived Helpfulness"}],"type":"column"},{"name":"No answer","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"No answer","n":921,"y":921,"name":"Interpersonal Trust"},{".x_var_col":"Perceived Fairness",".stack_var_col":"No answer","n":928,"y":928,"name":"Perceived Fairness"},{".x_var_col":"Perceived Helpfulness",".stack_var_col":"No answer","n":921,"y":921,"name":"Perceived Helpfulness"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Trust Dimension"},"categories":["Interpersonal Trust","Perceived Fairness","Perceived Helpfulness"]},"subtitle":{"text":"Comprehensive view of social trust dimensions with enhanced tooltips"},"legend":{"title":{"text":"Response Category"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#8c510a","#d8b365","#f6e8c3","darkgrey"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="labels-and-tooltips-reference">üè∑Ô∏è Labels and Tooltips Reference<a class="anchor" aria-label="anchor" href="#labels-and-tooltips-reference"></a>
</h2>
<div class="section level3">
<h3 id="summary-of-label-and-tooltip-options">Summary of Label and Tooltip Options<a class="anchor" aria-label="anchor" href="#summary-of-label-and-tooltip-options"></a>
</h3>
<p>The <code><a href="../reference/viz_stackedbars.html">viz_stackedbars()</a></code> function offers extensive
customization for labels and tooltips:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="39%">
<col width="27%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>x_label</code></td>
<td>X-axis title</td>
<td><code>"Question"</code></td>
</tr>
<tr class="even">
<td><code>y_label</code></td>
<td>Y-axis title (auto-set based on stacked_type)</td>
<td><code>"Percentage"</code></td>
</tr>
<tr class="odd">
<td><code>stack_label</code></td>
<td>Legend title</td>
<td><code>"Response Category"</code></td>
</tr>
<tr class="even">
<td><code>x_var_labels</code></td>
<td>Custom labels for each question</td>
<td><code>c("Trust", "Fairness")</code></td>
</tr>
<tr class="odd">
<td><code>tooltip_prefix</code></td>
<td>Text before value in tooltip</td>
<td><code>"Score: "</code></td>
</tr>
<tr class="even">
<td><code>tooltip_suffix</code></td>
<td>Text after value in tooltip</td>
<td>
<code>"%"</code>, <code>" respondents"</code>
</td>
</tr>
<tr class="odd">
<td><code>x_tooltip_suffix</code></td>
<td>Text after question name in tooltip</td>
<td><code>" question"</code></td>
</tr>
<tr class="even">
<td><code>show_var_tooltip</code></td>
<td>Show question name in tooltip</td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example with all label/tooltip options</span></span>
<span><span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_likert</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trust_1a"</span>, <span class="st">"fair_1a"</span><span class="op">)</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Trust"</span>, <span class="st">"Fairness"</span><span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Attitudes"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Attitude Measure"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Percent of Respondents"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response Level"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"% responded"</span>,</span>
<span>  show_var_tooltip <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `trust_1a` and `fair_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<div class="highchart html-widget html-fill-item" id="htmlwidget-3f27c09be0c60bb52829" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-3f27c09be0c60bb52829">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Attitudes"},"yAxis":{"title":{"text":"Percent of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Trust",".stack_var_col":"can't trust","n":623,"y":623,"name":"Trust"},{".x_var_col":"Fairness",".stack_var_col":"can't trust","n":797,"y":797,"name":"Fairness"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"Trust",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Trust"},{".x_var_col":"Fairness",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Fairness"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Trust",".stack_var_col":"depends","n":79,"y":79,"name":"Trust"},{".x_var_col":"Fairness",".stack_var_col":"depends","n":114,"y":114,"name":"Fairness"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Attitude Measure"},"categories":["Trust","Fairness"]},"legend":{"title":{"text":"Response Level"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="best-practices-and-tips">üí° Best Practices and Tips<a class="anchor" aria-label="anchor" href="#best-practices-and-tips"></a>
</h2>
<div class="section level3">
<h3 id="example-10-publication-ready-chart">Example 10: Publication-Ready Chart<a class="anchor" aria-label="anchor" href="#example-10-publication-ready-chart"></a>
</h3>
<p>Let‚Äôs create a fully customized, publication-ready chart.</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create the most polished example</span></span>
<span><span class="va">plot10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbars.html">viz_stackedbars</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_likert</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Interpersonal Trust\n('Can most people be trusted?')"</span>,</span>
<span>    <span class="st">"Perceived Fairness\n('Do people try to be fair?')"</span>,</span>
<span>    <span class="st">"Perceived Helpfulness\n('Are people helpful?')"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Capital Dimensions in American Society"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"General Social Survey Panel 2016 (N = 2,867 respondents)\nPercentage distribution of responses across social trust measures"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Social Trust Dimension"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response Category"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"% of respondents"</span>,</span>
<span>  x_tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_label_stack <span class="op">=</span> <span class="st">"No response"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#b2182b"</span>, <span class="st">"#ef8a62"</span>, <span class="st">"#fddbc7"</span>, <span class="st">"darkgrey"</span><span class="op">)</span>,</span>
<span>  show_var_tooltip <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `trust_1a` and `fair_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: `trust_1a` and `helpful_1a` have conflicting value labels.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">i</span> Labels for these values will be taken from `trust_1a`.</span></span>
<span><span class="co">## <span style="color: #BB0000;">x</span> Values: <span style="color: #0000BB;">1</span> and <span style="color: #0000BB;">2</span></span></span></code></pre>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot10</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-416566eb193bf50d04e6" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-416566eb193bf50d04e6">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Capital Dimensions in American Society"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Interpersonal Trust\n('Can most people be trusted?')",".stack_var_col":"can't trust","n":623,"y":623,"name":"Interpersonal Trust\n('Can most people be trusted?')"},{".x_var_col":"Perceived Fairness\n('Do people try to be fair?')",".stack_var_col":"can't trust","n":797,"y":797,"name":"Perceived Fairness\n('Do people try to be fair?')"},{".x_var_col":"Perceived Helpfulness\n('Are people helpful?')",".stack_var_col":"can't trust","n":917,"y":917,"name":"Perceived Helpfulness\n('Are people helpful?')"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"Interpersonal Trust\n('Can most people be trusted?')",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Interpersonal Trust\n('Can most people be trusted?')"},{".x_var_col":"Perceived Fairness\n('Do people try to be fair?')",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Perceived Fairness\n('Do people try to be fair?')"},{".x_var_col":"Perceived Helpfulness\n('Are people helpful?')",".stack_var_col":"can't be too careful","n":892,"y":892,"name":"Perceived Helpfulness\n('Are people helpful?')"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Interpersonal Trust\n('Can most people be trusted?')",".stack_var_col":"depends","n":79,"y":79,"name":"Interpersonal Trust\n('Can most people be trusted?')"},{".x_var_col":"Perceived Fairness\n('Do people try to be fair?')",".stack_var_col":"depends","n":114,"y":114,"name":"Perceived Fairness\n('Do people try to be fair?')"},{".x_var_col":"Perceived Helpfulness\n('Are people helpful?')",".stack_var_col":"depends","n":137,"y":137,"name":"Perceived Helpfulness\n('Are people helpful?')"}],"type":"column"},{"name":"No response","data":[{".x_var_col":"Interpersonal Trust\n('Can most people be trusted?')",".stack_var_col":"No response","n":921,"y":921,"name":"Interpersonal Trust\n('Can most people be trusted?')"},{".x_var_col":"Perceived Fairness\n('Do people try to be fair?')",".stack_var_col":"No response","n":928,"y":928,"name":"Perceived Fairness\n('Do people try to be fair?')"},{".x_var_col":"Perceived Helpfulness\n('Are people helpful?')",".stack_var_col":"No response","n":921,"y":921,"name":"Perceived Helpfulness\n('Are people helpful?')"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Social Trust Dimension"},"categories":["Interpersonal Trust\n('Can most people be trusted?')","Perceived Fairness\n('Do people try to be fair?')","Perceived Helpfulness\n('Are people helpful?')"]},"subtitle":{"text":"General Social Survey Panel 2016 (N = 2,867 respondents)\nPercentage distribution of responses across social trust measures"},"legend":{"title":{"text":"Response Category"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#b2182b","#ef8a62","#fddbc7","darkgrey"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="summary-and-best-practices">‚úÖ Summary and Best Practices<a class="anchor" aria-label="anchor" href="#summary-and-best-practices"></a>
</h2>
<div class="section level3">
<h3 id="key-features-demonstrated">‚úÖ Key Features Demonstrated<a class="anchor" aria-label="anchor" href="#key-features-demonstrated"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Multi-question visualization</strong> with automatic
wide-to-long data transformation</li>
<li>
<strong>Custom question labeling</strong> for more descriptive axis
labels</li>
<li>
<strong>Response mapping and ordering</strong> for consistent
presentation</li>
<li>
<strong>Missing value handling</strong> with explicit NA
categories</li>
<li>
<strong>Percentage vs.¬†count displays</strong> for different
analytical needs</li>
<li>
<strong>Demographic subgroup analysis</strong> for comparative
insights</li>
<li>
<strong>Survey battery analysis</strong> for related question
sets</li>
<li>
<strong>Publication-ready styling</strong> with comprehensive
customization</li>
</ol>
</div>
<div class="section level3">
<h3 id="best-practices-for-multi-question-charts">üéØ Best Practices for Multi-Question Charts<a class="anchor" aria-label="anchor" href="#best-practices-for-multi-question-charts"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Choose questions with similar response scales</li>
</ol>
<ul>
<li>Use questions that have the same or compatible response
categories</li>
<li>Consider mapping different scales to common categories when
appropriate</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Order questions logically</li>
</ol>
<ul>
<li>Group related concepts together</li>
<li>Consider ordering by typical response patterns (most positive to
least positive)</li>
<li>Place most important questions first</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Use appropriate stacking type</li>
</ol>
<ul>
<li>Use ‚Äúpercent‚Äù for comparing response patterns across questions</li>
<li>Use ‚Äúnormal‚Äù when absolute counts matter more than proportions</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Handle missing data thoughtfully</li>
</ol>
<ul>
<li>Decide whether missing patterns are substantively meaningful</li>
<li>Use include_na = TRUE when non-response patterns are important</li>
<li>Provide clear labels for missing categories</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>Choose colors carefully</li>
</ol>
<ul>
<li>Use consistent color schemes across related charts</li>
<li>Consider the meaning of response categories (positive/negative)</li>
<li>Ensure sufficient contrast between adjacent categories</li>
<li>Test for colorblind accessibility</li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>Customize tooltips for clarity</li>
</ol>
<ul>
<li>Include question text in tooltips when helpful</li>
<li>Use appropriate number formatting (percentages vs.¬†counts)</li>
<li>Provide context about sample sizes when relevant</li>
</ul>
</div>
<div class="section level3">
<h3 id="conclusion">üìö Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>The <code><a href="../reference/viz_stackedbars.html">viz_stackedbars()</a></code> function provides a powerful
solution for visualizing multiple Likert-type survey questions
simultaneously. Its key advantages include:</p>
<ul>
<li>
<strong>Automatic data transformation</strong> from wide to long
format</li>
<li>
<strong>Flexible question labeling</strong> for publication-ready
displays</li>
<li>
<strong>Comprehensive customization options</strong> for
professional presentations</li>
<li>
<strong>Interactive tooltips</strong> for enhanced data
exploration</li>
<li>
<strong>Consistent handling</strong> of survey data
complexities</li>
</ul>
<p>By leveraging the GSS Panel 2020 dataset, we‚Äôve demonstrated how this
function can reveal patterns in social attitudes, trust measures, and
other survey constructs. The ability to compare response distributions
across multiple related questions makes it an invaluable tool for survey
researchers, enabling them to communicate complex patterns in public
opinion and social attitudes effectively.</p>
<p>Whether you‚Äôre analyzing institutional confidence, social trust, life
satisfaction, or any other multi-item survey construct,
<code><a href="../reference/viz_stackedbars.html">viz_stackedbars()</a></code> provides the flexibility and polish
needed for both exploratory analysis and publication-ready
visualizations.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fabio Votta, Alexandra Pafford, Max Paulus, Ernesto de Le√≥n.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
