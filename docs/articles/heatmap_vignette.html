<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Creating Interactive Heatmaps with `viz_heatmap` ‚Ä¢ dashboardr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Creating Interactive Heatmaps with `viz_heatmap`">
<style>
/* Navbar logo */
.navbar-brand img {
  max-height: 30px;
  width: auto;
  object-fit: contain;
}
/* Home page logo - limit size */
.page-header .logo {
  max-width: 150px;
  height: auto;
}
/* Also target the img in the README content */
#dashboardr- img[src*="logo"] {
  max-width: 150px;
  height: auto;
  float: right;
  margin-left: 20px;
}
</style>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dashboardr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">üöÄ Getting Started</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üìñ Core Concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/content-collections.html">- Content</a></li>
    <li><a class="dropdown-item" href="../articles/pages.html">- Pages</a></li>
    <li><a class="dropdown-item" href="../articles/dashboards.html">- Dashboards</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/advanced-features.html">‚öôÔ∏è Advanced Features</a></li>
    <li><a class="dropdown-item" href="../articles/publishing_dashboards.html">üåê Publishing Dashboards</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üìä Visualization Types</h6></li>
    <li><a class="dropdown-item" href="../articles/bar_vignette.html">- Bar Charts</a></li>
    <li><a class="dropdown-item" href="../articles/timeline_vignette.html">- Timelines</a></li>
    <li><a class="dropdown-item" href="../articles/stackedbar_vignette.html">- Stacked Bars</a></li>
    <li><a class="dropdown-item" href="../articles/heatmap_vignette.html">- Heatmaps</a></li>
    <li><a class="dropdown-item" href="../articles/histogram_vignette.html">- Histograms</a></li>
    <li><a class="dropdown-item" href="../articles/density_vignette.html">- Density Plots</a></li>
    <li><a class="dropdown-item" href="../articles/boxplot_vignette.html">- Box Plots</a></li>
    <li><a class="dropdown-item" href="../articles/scatter_vignette.html">- Scatter Plots</a></li>
    <li><a class="dropdown-item" href="../articles/treemap_vignette.html">- Treemaps</a></li>
    <li><a class="dropdown-item" href="../articles/map_vignette.html">- Maps</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown--live-demos" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">üéØ Live Demos</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown--live-demos">
<li><a class="dropdown-item" href="../articles/demos.html">üìö About the Demos</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../live-demos/tutorial/index.html">üéì Tutorial Dashboard</a></li>
    <li><a class="dropdown-item" href="../live-demos/showcase/index.html">üöÄ Showcase Dashboard</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üé® Tabset Themes</h6></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/pills/index.html">   Pills</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/modern/index.html">   Modern</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/minimal/index.html">   Minimal</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/classic/index.html">   Classic</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/underline/index.html">   Underline</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/segmented/index.html">   Segmented</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../live-demos/overlay/index.html">üé≠ Loading Overlays</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="heatmap_vignette_files/htmltools-fill-0.5.9/fill.css" rel="stylesheet">
<script src="heatmap_vignette_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="heatmap_vignette_files/proj4js-2.3.15/proj4.js"></script><link href="heatmap_vignette_files/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="heatmap_vignette_files/highcharts-9.3.1/highcharts.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/highcharts-3d.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/highcharts-more.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/stock.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/map.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/data.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/exporting.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/drilldown.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/item-series.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/annotations.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/export-data.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/funnel.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/heatmap.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/treemap.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/sankey.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/organization.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/streamgraph.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/sunburst.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/vector.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/wordcloud.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/xrange.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/tilemap.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/venn.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/gantt.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/timeline.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/bullet.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/coloraxis.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/dumbbell.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/lollipop.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/series-label.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/plugins/motion.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/custom/reset.js"></script><script src="heatmap_vignette_files/highcharts-9.3.1/modules/boost.js"></script><script src="heatmap_vignette_files/highchart-binding-0.9.4/highchart.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Creating Interactive Heatmaps with `viz_heatmap`</h1>
                        <h4 data-toc-skip class="author">Alexandra
Pafford</h4>
            
            <h4 data-toc-skip class="date">2025-08-03</h4>
      

      <div class="d-none name"><code>heatmap_vignette.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="introduction">üìñ Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>Welcome to this guide on how to use the <code>viz_heatmap</code>
function as part of the <code>dashboardr</code> package. This guide
demonstrates how to use this function to generate interactive heatmaps.
In this demonstration, we will use the <code>gss_2020</code> dataset
from the <code>gssr</code> package to walk you through how to use the
function.</p>
<p>The <code>viz_heatmap</code> function is designed to simplify the
creation of highly customizable heatmaps from raw or aggregated data.
Heatmaps are excellent for visualizing the relationship between two
categorical variables and a continuous outcome, using color intensity to
represent values. This function was designed to aid communication
science researchers, and other social science researchers, to visualize
data formats common in this line of work, namely, survey data.</p>
<p>It handles common data preparation steps such as:</p>
<ul>
<li>Converting <code>haven_labelled</code> columns (e.g., from SPSS
imports) to R factors.</li>
<li>Mapping raw values to more descriptive labels.</li>
<li>Ordering categorical levels.</li>
<li>Explicitly including or excluding <code>NA</code> values as distinct
categories.</li>
<li>Aggregating <code>value_var</code> if multiple observations exist
for a given <code>(x, y)</code> cell.</li>
<li>Setting up titles, labels, tooltips, and color scales.</li>
</ul>
<p>This vignette demonstrates how to use the <code><a href="../reference/viz_heatmap.html">viz_heatmap()</a></code>
function with the General Social Survey (GSS) Panel 2020 dataset. The
GSS Panel 2020 dataset follows the same respondents across three waves
(2016, 2018, 2020), providing rich longitudinal data for understanding
social attitudes and demographic patterns.</p>
</div>
<div class="section level3">
<h3 id="getting-started">‚öôÔ∏è Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<p>First, let‚Äôs load the necessary libraries and the
<code>gss_2020</code> dataset.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kjhealy/gssr" class="external-link">gssr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jkunst.com/highcharter/" class="external-link">highcharter</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://favstats.github.io/dashboardr/">dashboardr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load GSS Panel 2020 data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-preparation">üìã Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h3>
<p>With any data analysis, the first step is to examine the data
(namely, the variables) that we‚Äôre working with.</p>
<p>Once we have an idea of what the data looks like, we then need to
prepare our data by creating some meaningful categorical variables.</p>
<p>To keep it straightforward, we‚Äôre going to work with the first wave
of data, demarcated by the ‚Äò_1a‚Äô suffix.</p>
<p>Let‚Äôs do so now:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check available _1a variables</span></span>
<span><span class="va">wave_1a_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"_1a$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Available _1a variables:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Available _1a variables:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">wave_1a_vars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span><span class="op">)</span>  <span class="co"># Show first 20</span></span>
<span><span class="co">#&gt;  [1] "wtssall_1a" "wtssnr_1a"  "vstrat_1a"  "vpsu_1a"    "year_1a"   </span></span>
<span><span class="co">#&gt;  [6] "id_1a"      "mar1_1a"    "mar2_1a"    "mar3_1a"    "mar4_1a"   </span></span>
<span><span class="co">#&gt; [11] "mar5_1a"    "mar6_1a"    "mar7_1a"    "mar8_1a"    "mar9_1a"   </span></span>
<span><span class="co">#&gt; [16] "mar10_1a"   "mar11_1a"   "mar12_1a"   "mar13_1a"   "mar14_1a"</span></span>
<span></span>
<span><span class="co"># Create a working dataset with key _1a variables</span></span>
<span><span class="va">gss_clean</span> <span class="op">&lt;-</span> <span class="va">gss_panel20</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Select relevant variables from wave 1a (2016)</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="co"># Demographics</span></span>
<span>    <span class="va">age_1a</span>, <span class="va">sex_1a</span>, <span class="va">race_1a</span>, <span class="va">degree_1a</span>, <span class="va">region_1a</span>,</span>
<span>    <span class="co"># Attitudes</span></span>
<span>    <span class="va">happy_1a</span>, <span class="va">trust_1a</span>, <span class="va">fair_1a</span>, <span class="va">helpful_1a</span>,</span>
<span>    <span class="co"># Economic</span></span>
<span>    <span class="va">income_1a</span>, <span class="va">class_1a</span>,</span>
<span>    <span class="co"># Political</span></span>
<span>    <span class="va">polviews_1a</span>, <span class="va">partyid_1a</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Remove rows where all key variables are missing</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">age_1a</span><span class="op">)</span> <span class="op">|</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">sex_1a</span><span class="op">)</span> <span class="op">|</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">race_1a</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Create age groups</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    age_group <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">age_1a</span> <span class="op">&gt;=</span> <span class="fl">18</span> <span class="op">&amp;</span> <span class="va">age_1a</span> <span class="op">&lt;=</span> <span class="fl">29</span> <span class="op">~</span> <span class="st">"18-29"</span>,</span>
<span>      <span class="va">age_1a</span> <span class="op">&gt;=</span> <span class="fl">30</span> <span class="op">&amp;</span> <span class="va">age_1a</span> <span class="op">&lt;=</span> <span class="fl">44</span> <span class="op">~</span> <span class="st">"30-44"</span>, </span>
<span>      <span class="va">age_1a</span> <span class="op">&gt;=</span> <span class="fl">45</span> <span class="op">&amp;</span> <span class="va">age_1a</span> <span class="op">&lt;=</span> <span class="fl">59</span> <span class="op">~</span> <span class="st">"45-59"</span>,</span>
<span>      <span class="va">age_1a</span> <span class="op">&gt;=</span> <span class="fl">60</span> <span class="op">&amp;</span> <span class="va">age_1a</span> <span class="op">&lt;=</span> <span class="fl">74</span> <span class="op">~</span> <span class="st">"60-74"</span>,</span>
<span>      <span class="va">age_1a</span> <span class="op">&gt;=</span> <span class="fl">75</span> <span class="op">~</span> <span class="st">"75+"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="co"># Create income groups</span></span>
<span>    income_group <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">income_1a</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Low"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">income_1a</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"Middle-Low"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">income_1a</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">9</span> <span class="op">~</span> <span class="st">"Middle"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">income_1a</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">12</span> <span class="op">~</span> <span class="st">"Middle-High"</span>, </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">income_1a</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">12</span> <span class="op">~</span> <span class="st">"High"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Check our created variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">$</span><span class="va">age_group</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 18-29 30-44 45-59 60-74   75+  &lt;NA&gt; </span></span>
<span><span class="co">#&gt;   481   737   780   598   261    10</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">$</span><span class="va">income_group</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         Low      Middle Middle-High  Middle-Low        &lt;NA&gt; </span></span>
<span><span class="co">#&gt;         100         229        2055          49         434</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-heatmap-examples">üìä Basic Heatmap Examples<a class="anchor" aria-label="anchor" href="#basic-heatmap-examples"></a>
</h2>
<div class="section level3">
<h3 id="example-1-average-age-by-education-and-gender">Example 1: Average Age by Education and Gender<a class="anchor" aria-label="anchor" href="#example-1-average-age-by-education-and-gender"></a>
</h3>
<p>Let‚Äôs create a heatmap showing the average age across education
levels and gender.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Prepare data for heatmap</span></span>
<span><span class="va">age_education_data</span> <span class="op">&lt;-</span> <span class="va">gss_clean</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">degree_1a</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">sex_1a</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">age_1a</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">degree_1a</span>, <span class="va">sex_1a</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>avg_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">age_1a</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">'drop'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Recode Variables</span></span>
<span><span class="va">sex_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"1"</span> <span class="op">=</span> <span class="st">"Male"</span>,</span>
<span>                <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Female"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">edu_map</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"0"</span> <span class="op">=</span> <span class="st">"High School or Less"</span>,</span>
<span>               <span class="st">"1"</span> <span class="op">=</span>  <span class="st">"High School"</span>,</span>
<span>               <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Associate/Junior College"</span>,</span>
<span>               <span class="st">"3"</span> <span class="op">=</span> <span class="st">"Bachelor's"</span>,</span>
<span>               <span class="st">"4"</span> <span class="op">=</span> <span class="st">"Master's or Higher"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create basic heatmap</span></span>
<span><span class="va">plot1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_heatmap.html">viz_heatmap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">age_education_data</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span>
<span>  y_var <span class="op">=</span> <span class="st">"sex_1a"</span>, </span>
<span>  value_var <span class="op">=</span> <span class="st">"avg_age"</span>,</span>
<span>  y_map_values <span class="op">=</span> <span class="va">sex_map</span>,</span>
<span>  x_map_values <span class="op">=</span> <span class="va">edu_map</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Average Age by Education Level and Gender"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"GSS Panel 2016 Wave"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Education Level"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Gender"</span>,</span>
<span>  value_label <span class="op">=</span> <span class="st">"Average Age"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#ffffff"</span>, <span class="st">"#2E86AB"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot1</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"hc_opts":{"chart":{"reflow":true,"type":"heatmap"},"title":{"text":"Average Age by Education Level and Gender"},"yAxis":{"title":{"text":"Gender"},"categories":["Female","Male"]},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"subtitle":{"text":"GSS Panel 2016 Wave"},"xAxis":{"categories":["Associate/Junior College","Bachelor's","High School","High School or Less","Master's or Higher"],"title":{"text":"Education Level"},"opposite":false},"colorAxis":{"min":46.76404494382022,"max":53.9618320610687,"stops":[[0,"#ffffff"],[1,"#2E86AB"]],"title":{"text":"Average Age"}},"series":[{"group":"group","data":[{".x_plot":"Associate/Junior College",".y_plot":"Female",".value_plot":47.94488188976378,"x":0,"y":0,"value":47.94488188976378,"xf":"Associate/Junior College","yf":"Female"},{".x_plot":"Associate/Junior College",".y_plot":"Male",".value_plot":46.76404494382022,"x":0,"y":1,"value":46.76404494382022,"xf":"Associate/Junior College","yf":"Male"},{".x_plot":"Bachelor's",".y_plot":"Female",".value_plot":48.52054794520548,"x":1,"y":0,"value":48.52054794520548,"xf":"Bachelor's","yf":"Female"},{".x_plot":"Bachelor's",".y_plot":"Male",".value_plot":47.64462809917355,"x":1,"y":1,"value":47.64462809917355,"xf":"Bachelor's","yf":"Male"},{".x_plot":"High School",".y_plot":"Female",".value_plot":49.29559748427672,"x":2,"y":0,"value":49.29559748427672,"xf":"High School","yf":"Female"},{".x_plot":"High School",".y_plot":"Male",".value_plot":46.95310136157337,"x":2,"y":1,"value":46.95310136157337,"xf":"High School","yf":"Male"},{".x_plot":"High School or Less",".y_plot":"Female",".value_plot":52.71270718232044,"x":3,"y":0,"value":52.71270718232044,"xf":"High School or Less","yf":"Female"},{".x_plot":"High School or Less",".y_plot":"Male",".value_plot":51.68493150684931,"x":3,"y":1,"value":51.68493150684931,"xf":"High School or Less","yf":"Male"},{".x_plot":"Master's or Higher",".y_plot":"Female",".value_plot":52.35675675675675,"x":4,"y":0,"value":52.35675675675675,"xf":"Master's or Higher","yf":"Female"},{".x_plot":"Master's or Higher",".y_plot":"Male",".value_plot":53.9618320610687,"x":4,"y":1,"value":53.9618320610687,"xf":"Master's or Higher","yf":"Male"}],"type":"heatmap","name":"Average Age","plotOptions":{"heatmap":{"dataLabels":{"enabled":true,"format":"{point.value}","color":"#000000","style":{"textOutline":"none"}},"nullColor":"transparent"}}}],"tooltip":{"formatter":"function() {\n        // Access categories using this.series.xAxis.categories and this.series.yAxis.categories\n        // this.point.x and this.point.y are the numerical indices\n        var x_cat = this.series.xAxis.categories[this.point.x];\n        var y_cat = this.series.yAxis.categories[this.point.y];\n        var value = this.point.value;\n\n        var value_str = Highcharts.numberFormat(value, 0); // Format value (e.g., 0 decimals)\n        if (value === null) {\n            value_str = 'N/A'; // Display N/A for null values in tooltip\n        }\n\n        return '<b>' + '' + x_cat + '<\/b><br/>' + // Using x_tooltip_prefix here\n               '<b>' + '' + y_cat + '<\/b><br/>' + // Using y_tooltip_prefix here\n               '<b>Average Age: <\/b>' + '' + value_str + '';\n      }","valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-2-income-distribution-with-custom-ordering">Example 2: Income Distribution with Custom Ordering<a class="anchor" aria-label="anchor" href="#example-2-income-distribution-with-custom-ordering"></a>
</h3>
<p>Let‚Äôs examine the relationship between age groups and education,
showing average income.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Prepare income data</span></span>
<span><span class="va">income_data</span> <span class="op">&lt;-</span> <span class="va">gss_clean</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">degree_1a</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">income_1a</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">age_group</span>, <span class="va">degree_1a</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>avg_income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">income_1a</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">'drop'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Recode Variables</span></span>
<span><span class="va">edu_map</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"0"</span> <span class="op">=</span> <span class="st">"High School or Less"</span>,</span>
<span>               <span class="st">"1"</span> <span class="op">=</span>  <span class="st">"High School"</span>,</span>
<span>               <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Associate/Junior College"</span>,</span>
<span>               <span class="st">"3"</span> <span class="op">=</span> <span class="st">"Bachelor's"</span>,</span>
<span>               <span class="st">"4"</span> <span class="op">=</span> <span class="st">"Master's or Higher"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define custom orders</span></span>
<span><span class="va">age_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"18-29"</span>, <span class="st">"30-44"</span>, <span class="st">"45-59"</span>, <span class="st">"60-74"</span>, <span class="st">"75+"</span><span class="op">)</span></span>
<span><span class="va">education_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High School or Less"</span>, <span class="st">"High School"</span>, <span class="st">"Associate/Junior College"</span>, <span class="st">"Bachelor's"</span>, <span class="st">"Master's or Higher"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create heatmap with custom ordering</span></span>
<span><span class="va">plot2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_heatmap.html">viz_heatmap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">income_data</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"age_group"</span>,</span>
<span>  y_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span>
<span>  y_map_values <span class="op">=</span> <span class="va">edu_map</span>,</span>
<span>  value_var <span class="op">=</span> <span class="st">"avg_income"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Average Income by Age Group and Education"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Higher values indicate higher income categories (2016)"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Age Group"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Education Level"</span>, </span>
<span>  value_label <span class="op">=</span> <span class="st">"Income Level"</span>,</span>
<span>  x_order <span class="op">=</span> <span class="va">age_order</span>,</span>
<span>  y_order <span class="op">=</span> <span class="va">education_order</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#fff7ec"</span>, <span class="st">"#fee8c8"</span>, <span class="st">"#fdd49e"</span>, <span class="st">"#fdbb84"</span>, <span class="st">"#fc8d59"</span>, <span class="st">"#ef6548"</span>, <span class="st">"#d7301f"</span><span class="op">)</span>,</span>
<span>  x_tooltip_suffix <span class="op">=</span> <span class="st">" years old"</span>,</span>
<span>  tooltip_labels_format <span class="op">=</span> <span class="st">"{point.value:.1f}"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot2</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"hc_opts":{"chart":{"reflow":true,"type":"heatmap"},"title":{"text":"Average Income by Age Group and Education"},"yAxis":{"title":{"text":"Education Level"},"categories":["High School or Less","High School","Associate/Junior College","Bachelor's","Master's or Higher"]},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"subtitle":{"text":"Higher values indicate higher income categories (2016)"},"xAxis":{"categories":["18-29","30-44","45-59","60-74","75+"],"title":{"text":"Age Group"},"opposite":false},"colorAxis":{"min":8.75,"max":11.92,"stops":[[0,"#fff7ec"],[0.1666666666666667,"#fee8c8"],[0.3333333333333333,"#fdd49e"],[0.5,"#fdbb84"],[0.6666666666666666,"#fc8d59"],[0.8333333333333334,"#ef6548"],[1,"#d7301f"]],"title":{"text":"Income Level"}},"series":[{"group":"group","data":[{".x_plot":"18-29",".y_plot":"High School or Less",".value_plot":8.75,"x":0,"y":0,"value":8.75,"xf":"18-29","yf":"High School or Less"},{".x_plot":"18-29",".y_plot":"High School",".value_plot":10.63018867924528,"x":0,"y":1,"value":10.63018867924528,"xf":"18-29","yf":"High School"},{".x_plot":"18-29",".y_plot":"Associate/Junior College",".value_plot":10.6969696969697,"x":0,"y":2,"value":10.6969696969697,"xf":"18-29","yf":"Associate/Junior College"},{".x_plot":"18-29",".y_plot":"Bachelor's",".value_plot":11.046875,"x":0,"y":3,"value":11.046875,"xf":"18-29","yf":"Bachelor's"},{".x_plot":"18-29",".y_plot":"Master's or Higher",".value_plot":11.25,"x":0,"y":4,"value":11.25,"xf":"18-29","yf":"Master's or Higher"},{".x_plot":"30-44",".y_plot":"High School or Less",".value_plot":9.794520547945206,"x":1,"y":0,"value":9.794520547945206,"xf":"30-44","yf":"High School or Less"},{".x_plot":"30-44",".y_plot":"High School",".value_plot":10.96529968454259,"x":1,"y":1,"value":10.96529968454259,"xf":"30-44","yf":"High School"},{".x_plot":"30-44",".y_plot":"Associate/Junior College",".value_plot":11.01754385964912,"x":1,"y":2,"value":11.01754385964912,"xf":"30-44","yf":"Associate/Junior College"},{".x_plot":"30-44",".y_plot":"Bachelor's",".value_plot":11.84375,"x":1,"y":3,"value":11.84375,"xf":"30-44","yf":"Bachelor's"},{".x_plot":"30-44",".y_plot":"Master's or Higher",".value_plot":11.68493150684932,"x":1,"y":4,"value":11.68493150684932,"xf":"30-44","yf":"Master's or Higher"},{".x_plot":"45-59",".y_plot":"High School or Less",".value_plot":10.08219178082192,"x":2,"y":0,"value":10.08219178082192,"xf":"45-59","yf":"High School or Less"},{".x_plot":"45-59",".y_plot":"High School",".value_plot":10.72910662824208,"x":2,"y":1,"value":10.72910662824208,"xf":"45-59","yf":"High School"},{".x_plot":"45-59",".y_plot":"Associate/Junior College",".value_plot":11.15384615384615,"x":2,"y":2,"value":11.15384615384615,"xf":"45-59","yf":"Associate/Junior College"},{".x_plot":"45-59",".y_plot":"Bachelor's",".value_plot":11.61475409836066,"x":2,"y":3,"value":11.61475409836066,"xf":"45-59","yf":"Bachelor's"},{".x_plot":"45-59",".y_plot":"Master's or Higher",".value_plot":11.70491803278689,"x":2,"y":4,"value":11.70491803278689,"xf":"45-59","yf":"Master's or Higher"},{".x_plot":"60-74",".y_plot":"High School or Less",".value_plot":9.387755102040817,"x":3,"y":0,"value":9.387755102040817,"xf":"60-74","yf":"High School or Less"},{".x_plot":"60-74",".y_plot":"High School",".value_plot":11,"x":3,"y":1,"value":11,"xf":"60-74","yf":"High School"},{".x_plot":"60-74",".y_plot":"Associate/Junior College",".value_plot":11.025,"x":3,"y":2,"value":11.025,"xf":"60-74","yf":"Associate/Junior College"},{".x_plot":"60-74",".y_plot":"Bachelor's",".value_plot":11.71590909090909,"x":3,"y":3,"value":11.71590909090909,"xf":"60-74","yf":"Bachelor's"},{".x_plot":"60-74",".y_plot":"Master's or Higher",".value_plot":11.8169014084507,"x":3,"y":4,"value":11.8169014084507,"xf":"60-74","yf":"Master's or Higher"},{".x_plot":"75+",".y_plot":"High School or Less",".value_plot":9.390243902439025,"x":4,"y":0,"value":9.390243902439025,"xf":"75+","yf":"High School or Less"},{".x_plot":"75+",".y_plot":"High School",".value_plot":10.90909090909091,"x":4,"y":1,"value":10.90909090909091,"xf":"75+","yf":"High School"},{".x_plot":"75+",".y_plot":"Associate/Junior College",".value_plot":11.6,"x":4,"y":2,"value":11.6,"xf":"75+","yf":"Associate/Junior College"},{".x_plot":"75+",".y_plot":"Bachelor's",".value_plot":11.13793103448276,"x":4,"y":3,"value":11.13793103448276,"xf":"75+","yf":"Bachelor's"},{".x_plot":"75+",".y_plot":"Master's or Higher",".value_plot":11.92,"x":4,"y":4,"value":11.92,"xf":"75+","yf":"Master's or Higher"}],"type":"heatmap","name":"Income Level","plotOptions":{"heatmap":{"dataLabels":{"enabled":true,"format":"{point.value:.1f}","color":"#000000","style":{"textOutline":"none"}},"nullColor":"transparent"}}}],"tooltip":{"formatter":"function() {\n        // Access categories using this.series.xAxis.categories and this.series.yAxis.categories\n        // this.point.x and this.point.y are the numerical indices\n        var x_cat = this.series.xAxis.categories[this.point.x];\n        var y_cat = this.series.yAxis.categories[this.point.y];\n        var value = this.point.value;\n\n        var value_str = Highcharts.numberFormat(value, 0); // Format value (e.g., 0 decimals)\n        if (value === null) {\n            value_str = 'N/A'; // Display N/A for null values in tooltip\n        }\n\n        return '<b>' + '' + x_cat + ' years old<\/b><br/>' + // Using x_tooltip_prefix here\n               '<b>' + '' + y_cat + '<\/b><br/>' + // Using y_tooltip_prefix here\n               '<b>Income Level: <\/b>' + '' + value_str + '';\n      }","valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="advanced-heatmap-features">‚ö° Advanced Heatmap Features<a class="anchor" aria-label="anchor" href="#advanced-heatmap-features"></a>
</h2>
<div class="section level3">
<h3 id="example-3-including-missing-values">Example 3: Including Missing Values<a class="anchor" aria-label="anchor" href="#example-3-including-missing-values"></a>
</h3>
<p>Let‚Äôs create a heatmap that explicitly shows missing data
patterns.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Create data with some missing values for demonstration</span></span>
<span><span class="va">happiness_data</span> <span class="op">&lt;-</span> <span class="va">gss_clean</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Keep some NAs to demonstrate include_na feature</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">race_1a</span>, <span class="va">class_1a</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    avg_happy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">happy_1a</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">'drop'</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Convert NaN to NA for demonstration</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>avg_happy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/is.finite.html" class="external-link">is.nan</a></span><span class="op">(</span><span class="va">avg_happy</span><span class="op">)</span>, <span class="cn">NA</span>, <span class="va">avg_happy</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">race_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"1"</span> <span class="op">=</span> <span class="st">"White"</span>,</span>
<span>                 <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Black"</span>,</span>
<span>                 <span class="st">"3"</span> <span class="op">=</span> <span class="st">"Other"</span></span>
<span>  </span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">class_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"1"</span><span class="op">=</span><span class="st">"Lower Class"</span>,</span>
<span>     <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Working Class"</span>,</span>
<span>     <span class="st">"3"</span> <span class="op">=</span> <span class="st">"Middle Class"</span>,</span>
<span>     <span class="st">"4"</span><span class="op">=</span><span class="st">"Upper Class"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create heatmap including NAs</span></span>
<span><span class="va">plot3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_heatmap.html">viz_heatmap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">happiness_data</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"race_1a"</span>,</span>
<span>  x_map_values <span class="op">=</span> <span class="va">race_map</span>,</span>
<span>  y_var <span class="op">=</span> <span class="st">"class_1a"</span>,</span>
<span>  y_map_values <span class="op">=</span> <span class="va">class_map</span>,</span>
<span>  value_var <span class="op">=</span> <span class="st">"avg_happy"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Average Happiness by Race and Social Class"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Including missing data patterns (2016)"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Race/Ethnicity"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Social Class"</span>,</span>
<span>  value_label <span class="op">=</span> <span class="st">"Happiness Level"</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_label_x <span class="op">=</span> <span class="st">"Race Not Specified"</span>,</span>
<span>  na_label_y <span class="op">=</span> <span class="st">"Class Not Specified"</span>, </span>
<span>  na_color <span class="op">=</span> <span class="st">"#cccccc"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#d7191c"</span>, <span class="st">"#fdae61"</span>, <span class="st">"#ffffbf"</span>, <span class="st">"#abdda4"</span>, <span class="st">"#2b83ba"</span><span class="op">)</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">"Happiness: "</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">" (1-3 scale)"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot3</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"hc_opts":{"chart":{"reflow":true,"type":"heatmap"},"title":{"text":"Average Happiness by Race and Social Class"},"yAxis":{"title":{"text":"Social Class"},"categories":["Lower Class","Middle Class","Upper Class","Working Class","Class Not Specified"]},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"subtitle":{"text":"Including missing data patterns (2016)"},"xAxis":{"categories":["Black","Other","White"],"title":{"text":"Race/Ethnicity"},"opposite":false},"colorAxis":{"min":1.446428571428571,"max":2.253731343283582,"stops":[[0,"#d7191c"],[0.25,"#fdae61"],[0.5,"#ffffbf"],[0.75,"#abdda4"],[1,"#2b83ba"]],"title":{"text":"Happiness Level"}},"series":[{"group":"group","data":[{".x_plot":"Black",".y_plot":"Lower Class",".value_plot":2.253731343283582,"x":0,"y":0,"value":2.253731343283582,"xf":"Black","yf":"Lower Class"},{".x_plot":"Black",".y_plot":"Middle Class",".value_plot":1.953125,"x":0,"y":1,"value":1.953125,"xf":"Black","yf":"Middle Class"},{".x_plot":"Black",".y_plot":"Upper Class",".value_plot":2,"x":0,"y":2,"value":2,"xf":"Black","yf":"Upper Class"},{".x_plot":"Black",".y_plot":"Working Class",".value_plot":1.948148148148148,"x":0,"y":3,"value":1.948148148148148,"xf":"Black","yf":"Working Class"},{".x_plot":"Black",".y_plot":"Class Not Specified",".value_plot":1.666666666666667,"x":0,"y":4,"value":1.666666666666667,"xf":"Black","yf":"Class Not Specified"},{".x_plot":"Other",".y_plot":"Lower Class",".value_plot":2.178571428571428,"x":1,"y":0,"value":2.178571428571428,"xf":"Other","yf":"Lower Class"},{".x_plot":"Other",".y_plot":"Middle Class",".value_plot":1.65625,"x":1,"y":1,"value":1.65625,"xf":"Other","yf":"Middle Class"},{".x_plot":"Other",".y_plot":"Upper Class",".value_plot":1.833333333333333,"x":1,"y":2,"value":1.833333333333333,"xf":"Other","yf":"Upper Class"},{".x_plot":"Other",".y_plot":"Working Class",".value_plot":1.833333333333333,"x":1,"y":3,"value":1.833333333333333,"xf":"Other","yf":"Working Class"},{".x_plot":"Other",".y_plot":"Class Not Specified",".value_plot":1.5,"x":1,"y":4,"value":1.5,"xf":"Other","yf":"Class Not Specified"},{".x_plot":"White",".y_plot":"Lower Class",".value_plot":2.243386243386243,"x":2,"y":0,"value":2.243386243386243,"xf":"White","yf":"Lower Class"},{".x_plot":"White",".y_plot":"Middle Class",".value_plot":1.73449401523395,"x":2,"y":1,"value":1.73449401523395,"xf":"White","yf":"Middle Class"},{".x_plot":"White",".y_plot":"Upper Class",".value_plot":1.446428571428571,"x":2,"y":2,"value":1.446428571428571,"xf":"White","yf":"Upper Class"},{".x_plot":"White",".y_plot":"Working Class",".value_plot":1.92568306010929,"x":2,"y":3,"value":1.92568306010929,"xf":"White","yf":"Working Class"},{".x_plot":"White",".y_plot":"Class Not Specified",".value_plot":2.058823529411764,"x":2,"y":4,"value":2.058823529411764,"xf":"White","yf":"Class Not Specified"}],"type":"heatmap","name":"Happiness Level","plotOptions":{"heatmap":{"dataLabels":{"enabled":true,"format":"{point.value}","color":"#000000","style":{"textOutline":"none"}},"nullColor":"#cccccc"}}}],"tooltip":{"formatter":"function() {\n        // Access categories using this.series.xAxis.categories and this.series.yAxis.categories\n        // this.point.x and this.point.y are the numerical indices\n        var x_cat = this.series.xAxis.categories[this.point.x];\n        var y_cat = this.series.yAxis.categories[this.point.y];\n        var value = this.point.value;\n\n        var value_str = Highcharts.numberFormat(value, 0); // Format value (e.g., 0 decimals)\n        if (value === null) {\n            value_str = 'N/A'; // Display N/A for null values in tooltip\n        }\n\n        return '<b>' + '' + x_cat + '<\/b><br/>' + // Using x_tooltip_prefix here\n               '<b>' + '' + y_cat + '<\/b><br/>' + // Using y_tooltip_prefix here\n               '<b>Happiness Level: <\/b>' + 'Happiness: ' + value_str + ' (1-3 scale)';\n      }","valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-4-regional-analysis-with-custom-colors">Example 4: Regional Analysis with Custom Colors<a class="anchor" aria-label="anchor" href="#example-4-regional-analysis-with-custom-colors"></a>
</h3>
<p>Let‚Äôs examine regional patterns in social attitudes.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Map Values</span></span>
<span><span class="va">edu_map</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"0"</span> <span class="op">=</span> <span class="st">"High School or Less"</span>,</span>
<span>               <span class="st">"1"</span> <span class="op">=</span>  <span class="st">"High School"</span>,</span>
<span>               <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Associate/Junior College"</span>,</span>
<span>               <span class="st">"3"</span> <span class="op">=</span> <span class="st">"Bachelor's"</span>,</span>
<span>               <span class="st">"4"</span> <span class="op">=</span> <span class="st">"Master's or Higher"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">region_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"1"</span> <span class="op">=</span> <span class="st">"New England"</span>,</span>
<span>                   <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Mid-Atlantic"</span>,</span>
<span>                   <span class="st">"3"</span> <span class="op">=</span> <span class="st">"East North Central"</span>,</span>
<span>                   <span class="st">"4"</span> <span class="op">=</span> <span class="st">"West North Central"</span>,</span>
<span>                   <span class="st">"5"</span> <span class="op">=</span> <span class="st">"South Atlantic"</span>,</span>
<span>                   <span class="st">"6"</span> <span class="op">=</span> <span class="st">"Deep South"</span>,</span>
<span>                   <span class="st">"7"</span> <span class="op">=</span> <span class="st">"West South Central"</span>,</span>
<span>                   <span class="st">"8"</span> <span class="op">=</span> <span class="st">"Mountain"</span>,</span>
<span>                   <span class="st">"9"</span> <span class="op">=</span> <span class="st">"West Coast"</span></span>
<span>  </span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create heatmap with custom styling</span></span>
<span><span class="va">plot5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_heatmap.html">viz_heatmap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_panel20</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"region_1a"</span>, </span>
<span>  y_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span>
<span>  y_map_values <span class="op">=</span> <span class="va">edu_map</span>,</span>
<span>  x_map_values <span class="op">=</span> <span class="va">region_map</span>,</span>
<span>  value_var <span class="op">=</span> <span class="st">"fair_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Perceived Fairness by Region and Education"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"US Region"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Education Level"</span>,</span>
<span>  value_label <span class="op">=</span> <span class="st">"Fairness Rating"</span>,</span>
<span>  <span class="co">#y_order = c("Lt High School", "High School", "Junior College", "Bachelor", "Graduate"),</span></span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#ffffcc"</span>, <span class="st">"#a1dab4"</span>, <span class="st">"#41b6c4"</span>, <span class="st">"#2c7fb8"</span>, <span class="st">"#253494"</span><span class="op">)</span>,</span>
<span>  na_color <span class="op">=</span> <span class="st">"#f0f0f0"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">" (1-3 scale)"</span>,</span>
<span>  x_tooltip_prefix <span class="op">=</span> <span class="st">"Region: "</span>,</span>
<span>  y_tooltip_prefix <span class="op">=</span> <span class="st">"Education: "</span>,</span>
<span>  tooltip_labels_format <span class="op">=</span> <span class="st">"{point.value:.2f}"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot5</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"hc_opts":{"chart":{"reflow":true,"type":"heatmap"},"title":{"text":"Perceived Fairness by Region and Education"},"yAxis":{"title":{"text":"Education Level"},"categories":["Associate/Junior College","Bachelor's","High School","High School or Less","Master's or Higher"]},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"subtitle":{"text":null},"xAxis":{"categories":["Deep South","East North Central","Mid-Atlantic","Mountain","New England","South Atlantic","West Coast","West North Central","West South Central"],"title":{"text":"US Region"},"opposite":false},"colorAxis":{"min":1.294117647058824,"max":2.222222222222222,"stops":[[0,"#ffffcc"],[0.25,"#a1dab4"],[0.5,"#41b6c4"],[0.75,"#2c7fb8"],[1,"#253494"]],"title":{"text":"Fairness Rating"}},"series":[{"group":"group","data":[{".x_plot":"Deep South",".y_plot":"Associate/Junior College",".value_plot":2,"x":0,"y":0,"value":2,"xf":"Deep South","yf":"Associate/Junior College"},{".x_plot":"Deep South",".y_plot":"Bachelor's",".value_plot":1.636363636363636,"x":0,"y":1,"value":1.636363636363636,"xf":"Deep South","yf":"Bachelor's"},{".x_plot":"Deep South",".y_plot":"High School",".value_plot":1.480519480519481,"x":0,"y":2,"value":1.480519480519481,"xf":"Deep South","yf":"High School"},{".x_plot":"Deep South",".y_plot":"High School or Less",".value_plot":1.411764705882353,"x":0,"y":3,"value":1.411764705882353,"xf":"Deep South","yf":"High School or Less"},{".x_plot":"Deep South",".y_plot":"Master's or Higher",".value_plot":1.866666666666667,"x":0,"y":4,"value":1.866666666666667,"xf":"Deep South","yf":"Master's or Higher"},{".x_plot":"East North Central",".y_plot":"Associate/Junior College",".value_plot":1.35,"x":1,"y":0,"value":1.35,"xf":"East North Central","yf":"Associate/Junior College"},{".x_plot":"East North Central",".y_plot":"Bachelor's",".value_plot":1.813333333333333,"x":1,"y":1,"value":1.813333333333333,"xf":"East North Central","yf":"Bachelor's"},{".x_plot":"East North Central",".y_plot":"High School",".value_plot":1.647727272727273,"x":1,"y":2,"value":1.647727272727273,"xf":"East North Central","yf":"High School"},{".x_plot":"East North Central",".y_plot":"High School or Less",".value_plot":1.464285714285714,"x":1,"y":3,"value":1.464285714285714,"xf":"East North Central","yf":"High School or Less"},{".x_plot":"East North Central",".y_plot":"Master's or Higher",".value_plot":1.852941176470588,"x":1,"y":4,"value":1.852941176470588,"xf":"East North Central","yf":"Master's or Higher"},{".x_plot":"Mid-Atlantic",".y_plot":"Associate/Junior College",".value_plot":1.636363636363636,"x":2,"y":0,"value":1.636363636363636,"xf":"Mid-Atlantic","yf":"Associate/Junior College"},{".x_plot":"Mid-Atlantic",".y_plot":"Bachelor's",".value_plot":1.704545454545455,"x":2,"y":1,"value":1.704545454545455,"xf":"Mid-Atlantic","yf":"Bachelor's"},{".x_plot":"Mid-Atlantic",".y_plot":"High School",".value_plot":1.705882352941176,"x":2,"y":2,"value":1.705882352941176,"xf":"Mid-Atlantic","yf":"High School"},{".x_plot":"Mid-Atlantic",".y_plot":"High School or Less",".value_plot":1.294117647058824,"x":2,"y":3,"value":1.294117647058824,"xf":"Mid-Atlantic","yf":"High School or Less"},{".x_plot":"Mid-Atlantic",".y_plot":"Master's or Higher",".value_plot":1.838709677419355,"x":2,"y":4,"value":1.838709677419355,"xf":"Mid-Atlantic","yf":"Master's or Higher"},{".x_plot":"Mountain",".y_plot":"Associate/Junior College",".value_plot":1.75,"x":3,"y":0,"value":1.75,"xf":"Mountain","yf":"Associate/Junior College"},{".x_plot":"Mountain",".y_plot":"Bachelor's",".value_plot":1.935483870967742,"x":3,"y":1,"value":1.935483870967742,"xf":"Mountain","yf":"Bachelor's"},{".x_plot":"Mountain",".y_plot":"High School",".value_plot":1.540229885057471,"x":3,"y":2,"value":1.540229885057471,"xf":"Mountain","yf":"High School"},{".x_plot":"Mountain",".y_plot":"High School or Less",".value_plot":1.411764705882353,"x":3,"y":3,"value":1.411764705882353,"xf":"Mountain","yf":"High School or Less"},{".x_plot":"Mountain",".y_plot":"Master's or Higher",".value_plot":2,"x":3,"y":4,"value":2,"xf":"Mountain","yf":"Master's or Higher"},{".x_plot":"New England",".y_plot":"Associate/Junior College",".value_plot":1.6,"x":4,"y":0,"value":1.6,"xf":"New England","yf":"Associate/Junior College"},{".x_plot":"New England",".y_plot":"Bachelor's",".value_plot":1.785714285714286,"x":4,"y":1,"value":1.785714285714286,"xf":"New England","yf":"Bachelor's"},{".x_plot":"New England",".y_plot":"High School",".value_plot":1.66,"x":4,"y":2,"value":1.66,"xf":"New England","yf":"High School"},{".x_plot":"New England",".y_plot":"High School or Less",".value_plot":1.454545454545455,"x":4,"y":3,"value":1.454545454545455,"xf":"New England","yf":"High School or Less"},{".x_plot":"New England",".y_plot":"Master's or Higher",".value_plot":2,"x":4,"y":4,"value":2,"xf":"New England","yf":"Master's or Higher"},{".x_plot":"South Atlantic",".y_plot":"Associate/Junior College",".value_plot":1.6875,"x":5,"y":0,"value":1.6875,"xf":"South Atlantic","yf":"Associate/Junior College"},{".x_plot":"South Atlantic",".y_plot":"Bachelor's",".value_plot":1.712121212121212,"x":5,"y":1,"value":1.712121212121212,"xf":"South Atlantic","yf":"Bachelor's"},{".x_plot":"South Atlantic",".y_plot":"High School",".value_plot":1.537688442211055,"x":5,"y":2,"value":1.537688442211055,"xf":"South Atlantic","yf":"High School"},{".x_plot":"South Atlantic",".y_plot":"High School or Less",".value_plot":1.485714285714286,"x":5,"y":3,"value":1.485714285714286,"xf":"South Atlantic","yf":"High School or Less"},{".x_plot":"South Atlantic",".y_plot":"Master's or Higher",".value_plot":1.947368421052632,"x":5,"y":4,"value":1.947368421052632,"xf":"South Atlantic","yf":"Master's or Higher"},{".x_plot":"West Coast",".y_plot":"Associate/Junior College",".value_plot":1.608695652173913,"x":6,"y":0,"value":1.608695652173913,"xf":"West Coast","yf":"Associate/Junior College"},{".x_plot":"West Coast",".y_plot":"Bachelor's",".value_plot":1.773584905660377,"x":6,"y":1,"value":1.773584905660377,"xf":"West Coast","yf":"Bachelor's"},{".x_plot":"West Coast",".y_plot":"High School",".value_plot":1.547826086956522,"x":6,"y":2,"value":1.547826086956522,"xf":"West Coast","yf":"High School"},{".x_plot":"West Coast",".y_plot":"High School or Less",".value_plot":1.675675675675676,"x":6,"y":3,"value":1.675675675675676,"xf":"West Coast","yf":"High School or Less"},{".x_plot":"West Coast",".y_plot":"Master's or Higher",".value_plot":1.875,"x":6,"y":4,"value":1.875,"xf":"West Coast","yf":"Master's or Higher"},{".x_plot":"West North Central",".y_plot":"Associate/Junior College",".value_plot":1.75,"x":7,"y":0,"value":1.75,"xf":"West North Central","yf":"Associate/Junior College"},{".x_plot":"West North Central",".y_plot":"Bachelor's",".value_plot":1.666666666666667,"x":7,"y":1,"value":1.666666666666667,"xf":"West North Central","yf":"Bachelor's"},{".x_plot":"West North Central",".y_plot":"High School",".value_plot":1.753246753246753,"x":7,"y":2,"value":1.753246753246753,"xf":"West North Central","yf":"High School"},{".x_plot":"West North Central",".y_plot":"High School or Less",".value_plot":1.444444444444444,"x":7,"y":3,"value":1.444444444444444,"xf":"West North Central","yf":"High School or Less"},{".x_plot":"West North Central",".y_plot":"Master's or Higher",".value_plot":2.222222222222222,"x":7,"y":4,"value":2.222222222222222,"xf":"West North Central","yf":"Master's or Higher"},{".x_plot":"West South Central",".y_plot":"Associate/Junior College",".value_plot":1.578947368421053,"x":8,"y":0,"value":1.578947368421053,"xf":"West South Central","yf":"Associate/Junior College"},{".x_plot":"West South Central",".y_plot":"Bachelor's",".value_plot":1.833333333333333,"x":8,"y":1,"value":1.833333333333333,"xf":"West South Central","yf":"Bachelor's"},{".x_plot":"West South Central",".y_plot":"High School",".value_plot":1.522935779816514,"x":8,"y":2,"value":1.522935779816514,"xf":"West South Central","yf":"High School"},{".x_plot":"West South Central",".y_plot":"High School or Less",".value_plot":1.352941176470588,"x":8,"y":3,"value":1.352941176470588,"xf":"West South Central","yf":"High School or Less"},{".x_plot":"West South Central",".y_plot":"Master's or Higher",".value_plot":1.916666666666667,"x":8,"y":4,"value":1.916666666666667,"xf":"West South Central","yf":"Master's or Higher"}],"type":"heatmap","name":"Fairness Rating","plotOptions":{"heatmap":{"dataLabels":{"enabled":true,"format":"{point.value:.2f}","color":"#000000","style":{"textOutline":"none"}},"nullColor":"#f0f0f0"}}}],"tooltip":{"formatter":"function() {\n        // Access categories using this.series.xAxis.categories and this.series.yAxis.categories\n        // this.point.x and this.point.y are the numerical indices\n        var x_cat = this.series.xAxis.categories[this.point.x];\n        var y_cat = this.series.yAxis.categories[this.point.y];\n        var value = this.point.value;\n\n        var value_str = Highcharts.numberFormat(value, 0); // Format value (e.g., 0 decimals)\n        if (value === null) {\n            value_str = 'N/A'; // Display N/A for null values in tooltip\n        }\n\n        return '<b>' + 'Region: ' + x_cat + '<\/b><br/>' + // Using x_tooltip_prefix here\n               '<b>' + 'Education: ' + y_cat + '<\/b><br/>' + // Using y_tooltip_prefix here\n               '<b>Fairness Rating: <\/b>' + '' + value_str + ' (1-3 scale)';\n      }","valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="labels-and-tooltips-reference">üè∑Ô∏è Labels and Tooltips Reference<a class="anchor" aria-label="anchor" href="#labels-and-tooltips-reference"></a>
</h3>
<p>Heatmaps support extensive label and tooltip customization:</p>
<table class="table">
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>x_label</code></td>
<td>X-axis title</td>
<td><code>"Age Group"</code></td>
</tr>
<tr class="even">
<td><code>y_label</code></td>
<td>Y-axis title</td>
<td><code>"Education Level"</code></td>
</tr>
<tr class="odd">
<td><code>value_label</code></td>
<td>Color legend title</td>
<td><code>"Average Score"</code></td>
</tr>
<tr class="even">
<td><code>tooltip_prefix</code></td>
<td>Text before value</td>
<td><code>"Score: "</code></td>
</tr>
<tr class="odd">
<td><code>tooltip_suffix</code></td>
<td>Text after value</td>
<td><code>" points"</code></td>
</tr>
<tr class="even">
<td><code>x_tooltip_prefix</code></td>
<td>Text before x in tooltip</td>
<td><code>"Age: "</code></td>
</tr>
<tr class="odd">
<td><code>x_tooltip_suffix</code></td>
<td>Text after x in tooltip</td>
<td><code>" years"</code></td>
</tr>
<tr class="even">
<td><code>y_tooltip_prefix</code></td>
<td>Text before y in tooltip</td>
<td><code>"Education: "</code></td>
</tr>
<tr class="odd">
<td><code>y_tooltip_suffix</code></td>
<td>Text after y in tooltip</td>
<td><code>level</code></td>
</tr>
<tr class="even">
<td><code>tooltip_labels_format</code></td>
<td>Number format</td>
<td><code>"{point.value:.1f}"</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Demonstrate all tooltip options</span></span>
<span><span class="fu"><a href="../reference/viz_heatmap.html">viz_heatmap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">income_data</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"age_group"</span>,</span>
<span>  y_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span>
<span>  y_map_values <span class="op">=</span> <span class="va">edu_map</span>,</span>
<span>  value_var <span class="op">=</span> <span class="st">"avg_income"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Income by Demographics"</span>,</span>
<span>  <span class="co"># Axis labels</span></span>
<span>  x_label <span class="op">=</span> <span class="st">"Age Group"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Education"</span>,</span>
<span>  value_label <span class="op">=</span> <span class="st">"Income Index"</span>,</span>
<span>  <span class="co"># Tooltip formatting</span></span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">"Income: "</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">" (scale 1-25)"</span>,</span>
<span>  x_tooltip_prefix <span class="op">=</span> <span class="st">"Age: "</span>,</span>
<span>  y_tooltip_prefix <span class="op">=</span> <span class="st">"Education: "</span>,</span>
<span>  tooltip_labels_format <span class="op">=</span> <span class="st">"{point.value:.1f}"</span>,</span>
<span>  x_order <span class="op">=</span> <span class="va">age_order</span>,</span>
<span>  y_order <span class="op">=</span> <span class="va">education_order</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-1fb4450895fe099f74a1" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"hc_opts":{"chart":{"reflow":true,"type":"heatmap"},"title":{"text":"Income by Demographics"},"yAxis":{"title":{"text":"Education"},"categories":["High School or Less","High School","Associate/Junior College","Bachelor's","Master's or Higher"]},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"subtitle":{"text":null},"xAxis":{"categories":["18-29","30-44","45-59","60-74","75+"],"title":{"text":"Age Group"},"opposite":false},"colorAxis":{"min":8.75,"max":11.92,"stops":[[0,"#FFFFFF"],[1,"#7CB5EC"]],"title":{"text":"Income Index"}},"series":[{"group":"group","data":[{".x_plot":"18-29",".y_plot":"High School or Less",".value_plot":8.75,"x":0,"y":0,"value":8.75,"xf":"18-29","yf":"High School or Less"},{".x_plot":"18-29",".y_plot":"High School",".value_plot":10.63018867924528,"x":0,"y":1,"value":10.63018867924528,"xf":"18-29","yf":"High School"},{".x_plot":"18-29",".y_plot":"Associate/Junior College",".value_plot":10.6969696969697,"x":0,"y":2,"value":10.6969696969697,"xf":"18-29","yf":"Associate/Junior College"},{".x_plot":"18-29",".y_plot":"Bachelor's",".value_plot":11.046875,"x":0,"y":3,"value":11.046875,"xf":"18-29","yf":"Bachelor's"},{".x_plot":"18-29",".y_plot":"Master's or Higher",".value_plot":11.25,"x":0,"y":4,"value":11.25,"xf":"18-29","yf":"Master's or Higher"},{".x_plot":"30-44",".y_plot":"High School or Less",".value_plot":9.794520547945206,"x":1,"y":0,"value":9.794520547945206,"xf":"30-44","yf":"High School or Less"},{".x_plot":"30-44",".y_plot":"High School",".value_plot":10.96529968454259,"x":1,"y":1,"value":10.96529968454259,"xf":"30-44","yf":"High School"},{".x_plot":"30-44",".y_plot":"Associate/Junior College",".value_plot":11.01754385964912,"x":1,"y":2,"value":11.01754385964912,"xf":"30-44","yf":"Associate/Junior College"},{".x_plot":"30-44",".y_plot":"Bachelor's",".value_plot":11.84375,"x":1,"y":3,"value":11.84375,"xf":"30-44","yf":"Bachelor's"},{".x_plot":"30-44",".y_plot":"Master's or Higher",".value_plot":11.68493150684932,"x":1,"y":4,"value":11.68493150684932,"xf":"30-44","yf":"Master's or Higher"},{".x_plot":"45-59",".y_plot":"High School or Less",".value_plot":10.08219178082192,"x":2,"y":0,"value":10.08219178082192,"xf":"45-59","yf":"High School or Less"},{".x_plot":"45-59",".y_plot":"High School",".value_plot":10.72910662824208,"x":2,"y":1,"value":10.72910662824208,"xf":"45-59","yf":"High School"},{".x_plot":"45-59",".y_plot":"Associate/Junior College",".value_plot":11.15384615384615,"x":2,"y":2,"value":11.15384615384615,"xf":"45-59","yf":"Associate/Junior College"},{".x_plot":"45-59",".y_plot":"Bachelor's",".value_plot":11.61475409836066,"x":2,"y":3,"value":11.61475409836066,"xf":"45-59","yf":"Bachelor's"},{".x_plot":"45-59",".y_plot":"Master's or Higher",".value_plot":11.70491803278689,"x":2,"y":4,"value":11.70491803278689,"xf":"45-59","yf":"Master's or Higher"},{".x_plot":"60-74",".y_plot":"High School or Less",".value_plot":9.387755102040817,"x":3,"y":0,"value":9.387755102040817,"xf":"60-74","yf":"High School or Less"},{".x_plot":"60-74",".y_plot":"High School",".value_plot":11,"x":3,"y":1,"value":11,"xf":"60-74","yf":"High School"},{".x_plot":"60-74",".y_plot":"Associate/Junior College",".value_plot":11.025,"x":3,"y":2,"value":11.025,"xf":"60-74","yf":"Associate/Junior College"},{".x_plot":"60-74",".y_plot":"Bachelor's",".value_plot":11.71590909090909,"x":3,"y":3,"value":11.71590909090909,"xf":"60-74","yf":"Bachelor's"},{".x_plot":"60-74",".y_plot":"Master's or Higher",".value_plot":11.8169014084507,"x":3,"y":4,"value":11.8169014084507,"xf":"60-74","yf":"Master's or Higher"},{".x_plot":"75+",".y_plot":"High School or Less",".value_plot":9.390243902439025,"x":4,"y":0,"value":9.390243902439025,"xf":"75+","yf":"High School or Less"},{".x_plot":"75+",".y_plot":"High School",".value_plot":10.90909090909091,"x":4,"y":1,"value":10.90909090909091,"xf":"75+","yf":"High School"},{".x_plot":"75+",".y_plot":"Associate/Junior College",".value_plot":11.6,"x":4,"y":2,"value":11.6,"xf":"75+","yf":"Associate/Junior College"},{".x_plot":"75+",".y_plot":"Bachelor's",".value_plot":11.13793103448276,"x":4,"y":3,"value":11.13793103448276,"xf":"75+","yf":"Bachelor's"},{".x_plot":"75+",".y_plot":"Master's or Higher",".value_plot":11.92,"x":4,"y":4,"value":11.92,"xf":"75+","yf":"Master's or Higher"}],"type":"heatmap","name":"Income Index","plotOptions":{"heatmap":{"dataLabels":{"enabled":true,"format":"{point.value:.1f}","color":"#000000","style":{"textOutline":"none"}},"nullColor":"transparent"}}}],"tooltip":{"formatter":"function() {\n        // Access categories using this.series.xAxis.categories and this.series.yAxis.categories\n        // this.point.x and this.point.y are the numerical indices\n        var x_cat = this.series.xAxis.categories[this.point.x];\n        var y_cat = this.series.yAxis.categories[this.point.y];\n        var value = this.point.value;\n\n        var value_str = Highcharts.numberFormat(value, 0); // Format value (e.g., 0 decimals)\n        if (value === null) {\n            value_str = 'N/A'; // Display N/A for null values in tooltip\n        }\n\n        return '<b>' + 'Age: ' + x_cat + '<\/b><br/>' + // Using x_tooltip_prefix here\n               '<b>' + 'Education: ' + y_cat + '<\/b><br/>' + // Using y_tooltip_prefix here\n               '<b>Income Index: <\/b>' + 'Income: ' + value_str + ' (scale 1-25)';\n      }","valueDecimals":0}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="summary-and-best-practices">üí° Summary and Best Practices<a class="anchor" aria-label="anchor" href="#summary-and-best-practices"></a>
</h2>
<div class="section level3">
<h3 id="key-features-demonstrated">‚úÖ Key Features Demonstrated<a class="anchor" aria-label="anchor" href="#key-features-demonstrated"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Basic heatmaps</strong> with continuous values mapped to
color intensity</li>
<li>
<strong>Custom ordering</strong> of categorical variables for
logical presentation</li>
<li>
<strong>Missing value handling</strong> with explicit NA categories
and custom colors</li>
<li>
<strong>Value mapping</strong> for cleaner, more readable
labels</li>
<li>
<strong>Custom color palettes</strong> for different data types and
emphasis</li>
<li>
<strong>Flexible aggregation</strong> using different functions
(mean, median)</li>
<li>
<strong>Longitudinal analysis</strong> showing change over time</li>
</ol>
</div>
<div class="section level3">
<h3 id="best-practices-for-heatmaps">üéØ Best Practices for Heatmaps<a class="anchor" aria-label="anchor" href="#best-practices-for-heatmaps"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Always check your data structure first!</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">your_data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">your_data</span><span class="op">$</span><span class="va">x_var</span>, <span class="va">your_data</span><span class="op">$</span><span class="va">y_var</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Consider your audience when choosing colors</span></span>
<span><span class="co"># - Use diverging palettes for data with meaningful zero/center point</span></span>
<span><span class="co"># - Use sequential palettes for data with natural ordering</span></span>
<span><span class="co"># - Ensure accessibility with colorblind-friendly palettes</span></span>
<span></span>
<span><span class="co"># 3. Handle missing data thoughtfully</span></span>
<span><span class="co"># - Decide whether to include or exclude missing categories</span></span>
<span><span class="co"># - Use appropriate colors for missing data (often gray or transparent)</span></span>
<span><span class="co"># - Document missing data patterns in subtitles</span></span>
<span></span>
<span><span class="co"># 4. Order categories logically</span></span>
<span><span class="co"># - Use natural ordering (e.g., age groups, education levels)</span></span>
<span><span class="co"># - Consider frequency-based ordering for nominal categories</span></span>
<span><span class="co"># - Place "Other" or "Missing" categories at the end</span></span>
<span></span>
<span><span class="co"># 5. Customize tooltips for clarity</span></span>
<span><span class="co"># - Include units and context</span></span>
<span><span class="co"># - Use prefixes/suffixes to clarify meaning</span></span>
<span><span class="co"># - Format numbers appropriately for your audience</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="conclusion">üìö Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>The <code><a href="../reference/viz_heatmap.html">viz_heatmap()</a></code> function provides a powerful and
flexible way to visualize bivariate relationships in survey data. By
leveraging the rich GSS Panel 2020 dataset, we‚Äôve demonstrated how
heatmaps can reveal patterns in:</p>
<ul>
<li>Demographic distributions</li>
<li>Attitude variations across groups<br>
</li>
<li>Regional and temporal patterns</li>
<li>Missing data structures</li>
</ul>
<p>The function‚Äôs extensive customization options allow for
publication-ready visualizations that can effectively communicate
complex social science findings to diverse audiences.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fabio Votta, Alexandra Pafford, Max Paulus, Ernesto de Le√≥n.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
