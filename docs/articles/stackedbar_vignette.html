<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating Interactive Stacked Bar Charts with `create_stackedbar` • dashboardr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating Interactive Stacked Bar Charts with `create_stackedbar`">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dashboardr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/heatmap_vignette.html">Creating Interactive Heatmaps with `create_heatmap`</a>
    </li>
    <li>
      <a href="../articles/stackedbar_vignette.html">Creating Interactive Stacked Bar Charts with `create_stackedbar`</a>
    </li>
    <li>
      <a href="../articles/stackedbars_vignette.html">Getting Started With `create_stackedbars()`</a>
    </li>
    <li>
      <a href="../articles/timeline_vignette.html">Getting Started With `create_timeline()`</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><link href="stackedbar_vignette_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="stackedbar_vignette_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="stackedbar_vignette_files/proj4js-2.3.15/proj4.js"></script><link href="stackedbar_vignette_files/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="stackedbar_vignette_files/highcharts-9.3.1/highcharts.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/highcharts-3d.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/highcharts-more.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/stock.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/map.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/data.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/exporting.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/drilldown.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/item-series.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/annotations.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/export-data.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/funnel.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/heatmap.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/treemap.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/sankey.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/organization.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/streamgraph.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/sunburst.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/vector.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/wordcloud.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/xrange.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/tilemap.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/venn.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/gantt.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/timeline.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/bullet.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/coloraxis.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/dumbbell.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/lollipop.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/series-label.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/plugins/motion.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/custom/reset.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/boost.js"></script><script src="stackedbar_vignette_files/highchart-binding-0.9.4/highchart.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating Interactive Stacked Bar Charts with
<code>create_stackedbar</code>
</h1>
                        <h4 data-toc-skip class="author">Alexandra
Pafford</h4>
            
            <h4 data-toc-skip class="date">2025-08-03</h4>
      

      <div class="hidden name"><code>stackedbar_vignette.Rmd</code></div>

    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>Welcome to this comprehensive guide on using the
<code>create_stackedbar</code> function from the <code>dashboardr</code>
package. This function is designed to create highly customizable
interactive stacked bar charts from survey data, making it particularly
valuable for communication science researchers and other social
scientists working with categorical data.</p>
<p>Stacked bar charts are excellent for visualizing the distribution of
categorical responses across different groups or demographics. They
allow you to see both the overall patterns and the composition within
each category, making them ideal for displaying survey responses,
demographic breakdowns, and attitude distributions.</p>
<p>The <code>create_stackedbar</code> function handles many common data
preparation tasks automatically, including:</p>
<ul>
<li>Converting <code>haven_labelled</code> columns (from SPSS imports)
to R factors</li>
<li>Mapping raw values to descriptive labels</li>
<li>Binning continuous variables into meaningful categories</li>
<li>Handling missing values explicitly or implicitly</li>
<li>Creating both count-based and percentage-based visualizations</li>
<li>Customizing colors, ordering, and interactive tooltips</li>
</ul>
<p>This vignette demonstrates the function’s capabilities using the
General Social Survey (GSS) Panel 2020 dataset, focusing on the 2016
wave (<code>_1a</code> variables).</p>
</div>
<div class="section level3">
<h3 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<p>First, let’s load the necessary libraries and examine our
dataset.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kjhealy/gssr" class="external-link">gssr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get(paste0(generic, ".", class), envir = get_method_env()) : </span></span>
<span><span class="co">#&gt;   object 'type_sum.accel' not found</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jkunst.com/highcharter/" class="external-link">highcharter</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">dashboardr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load GSS Panel 2020 data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-preparation">Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h3>
<p>Let’s prepare our working dataset using the 2020 wave variables.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a working dataset with key _1a variables from 2020</span></span>
<span><span class="va">gss_clean</span> <span class="op">&lt;-</span> <span class="va">gss_panel20</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="co"># Demographics</span></span>
<span>    <span class="va">age_1a</span>, <span class="va">sex_1a</span>, <span class="va">race_1a</span>, <span class="va">degree_1a</span>, <span class="va">region_1a</span>,</span>
<span>    <span class="co"># Attitudes and behaviors</span></span>
<span>    <span class="va">happy_1a</span>, <span class="va">trust_1a</span>, <span class="va">fair_1a</span>, <span class="va">helpful_1a</span>,</span>
<span>    <span class="va">polviews_1a</span>, <span class="va">partyid_1a</span>, <span class="va">attend_1a</span>,</span>
<span>    <span class="co"># Economic</span></span>
<span>    <span class="va">income_1a</span>, <span class="va">class_1a</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Remove completely empty rows</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_any</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">~</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the data structure</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 2,867</span></span>
<span><span class="co">#&gt; Columns: 14</span></span>
<span><span class="co">#&gt; $ age_1a      <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 47, 61, 72, 43, 55, 53, 50, 23, 45, 71, 33, 86, 32, 60…</span></span>
<span><span class="co">#&gt; $ sex_1a      <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 1, 1, 1, 2, 2, 2, 1, 2, 1, 1, 2, 2, 1, 2, 1, 2, 1, 2, …</span></span>
<span><span class="co">#&gt; $ race_1a     <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 1, 1, 1, 1, 1, 1, 1, 3, 2, 1, 2, 1, 2, 2, 1, 1, 1, 3, …</span></span>
<span><span class="co">#&gt; $ degree_1a   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 3, 1, 3, 1, 4, 2, 1, 1, 1, 2, 1, 1, 1, 1, 0, 1, 1, 0, …</span></span>
<span><span class="co">#&gt; $ region_1a   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, …</span></span>
<span><span class="co">#&gt; $ happy_1a    <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>     2,     2,     1,     2,     1,     1,     2,     1…</span></span>
<span><span class="co">#&gt; $ trust_1a    <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #BB0000;">NA(i)</span>,     3,     1, <span style="color: #BB0000;">NA(i)</span>,     1,     1, <span style="color: #BB0000;">NA(i)</span>,     2…</span></span>
<span><span class="co">#&gt; $ fair_1a     <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #BB0000;">NA(i)</span>,     1,     1, <span style="color: #BB0000;">NA(i)</span>,     2,     2, <span style="color: #BB0000;">NA(i)</span>,     1…</span></span>
<span><span class="co">#&gt; $ helpful_1a  <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #BB0000;">NA(i)</span>,     2,     2, <span style="color: #BB0000;">NA(i)</span>,     3,     1, <span style="color: #BB0000;">NA(i)</span>,     1…</span></span>
<span><span class="co">#&gt; $ polviews_1a <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>     4,     2,     6,     4,     3,     3,     3,     5…</span></span>
<span><span class="co">#&gt; $ partyid_1a  <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>     3,     2,     5,     5,     1,     1,     5,     2…</span></span>
<span><span class="co">#&gt; $ attend_1a   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 0, 0, 7, 6, 0, 0, 1, 5, 6, 0, 5, 3, 5, 6, 1, 8, 8, 8, …</span></span>
<span><span class="co">#&gt; $ income_1a   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #BB0000;">NA(n)</span>,    12,    12, <span style="color: #BB0000;">NA(n)</span>, <span style="color: #BB0000;">NA(n)</span>,    12, <span style="color: #BB0000;">NA(n)</span>,    12…</span></span>
<span><span class="co">#&gt; $ class_1a    <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>     3, <span style="color: #BB0000;">NA(d)</span>,     3,     3,     3,     3,     3,     2…</span></span>
<span></span>
<span><span class="co"># Examine some key variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">$</span><span class="va">degree_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    0    1    2    3    4 &lt;NA&gt; </span></span>
<span><span class="co">#&gt;  328 1461  216  536  318    8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">$</span><span class="va">happy_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1    2    3 &lt;NA&gt; </span></span>
<span><span class="co">#&gt;  806 1601  452    8</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-stacked-bar-charts">Basic Stacked Bar Charts<a class="anchor" aria-label="anchor" href="#basic-stacked-bar-charts"></a>
</h2>
<div class="section level3">
<h3 id="example-1-education-by-gender-count-based">Example 1: Education by Gender (Count-based)<a class="anchor" aria-label="anchor" href="#example-1-education-by-gender-count-based"></a>
</h3>
<p>Let’s start with a basic stacked bar chart showing educational
attainment by gender.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## TODO: there is a odd 5 chart</span></span>
<span><span class="co"># Create basic stacked bar chart</span></span>
<span><span class="va">plot1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_stackedbar.html">create_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"sex_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Educational Attainment by Gender"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"GSS Panel 2016 - Raw counts"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Highest Degree Completed"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Number of Respondents"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Gender"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"normal"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot1</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Educational Attainment by Gender"},"yAxis":{"title":{"text":"Number of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"normal","dataLabels":{"enabled":true,"format":"{point.y}","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"male","data":[{".x_var_col":"less than high school",".stack_var_col":"male","n":147,"y":147,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"male","n":662,"y":662,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"male","n":89,"y":89,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"male","n":243,"y":243,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"male","n":132,"y":132,"name":"graduate"},{".x_var_col":null,".stack_var_col":"male","n":3,"y":3,"name":null}],"type":"column"},{"name":"female","data":[{".x_var_col":"less than high school",".stack_var_col":"female","n":181,"y":181,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"female","n":799,"y":799,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"female","n":127,"y":127,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"female","n":293,"y":293,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"female","n":186,"y":186,"name":"graduate"},{".x_var_col":null,".stack_var_col":"female","n":5,"y":5,"name":null}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Highest Degree Completed"}},"subtitle":{"text":"GSS Panel 2016 - Raw counts"},"legend":{"title":{"text":"Gender"}},"tooltip":{"formatter":"function() {\n        var value = this.y;\n        return '<b>' + this.x + '<\/b><br/>' +\n               this.series.name + ': ' + value + '<br/>' +\n               'Total: ' + this.point.stackTotal;\n      }"}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-2-happiness-distribution-percentage-based">Example 2: Happiness Distribution (Percentage-based)<a class="anchor" aria-label="anchor" href="#example-2-happiness-distribution-percentage-based"></a>
</h3>
<p>Now let’s create a percentage-based stacked bar chart to show
happiness distribution across education levels.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## TODO: there is also an odd 5 chart</span></span>
<span></span>
<span><span class="co"># Define education order for logical display</span></span>
<span><span class="va">education_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lt High School"</span>, <span class="st">"High School"</span>, <span class="st">"Junior College"</span>, <span class="st">"Bachelor"</span>, <span class="st">"Graduate"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create percentage stacked bar chart</span></span>
<span><span class="va">plot2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_stackedbar.html">create_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"happy_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Happiness Distribution Across Education Levels"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Percentage breakdown within each education category"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Education Level"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Percentage of Respondents"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Happiness Level"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  x_order <span class="op">=</span> <span class="va">education_order</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Very Happy"</span>, <span class="st">"Pretty Happy"</span>, <span class="st">"Not Too Happy"</span><span class="op">)</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2E86AB"</span>, <span class="st">"#A23B72"</span>, <span class="st">"#F18F01"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot2</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Happiness Distribution Across Education Levels"},"yAxis":{"title":{"text":"Percentage of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"very happy","data":[{".x_var_col":"less than high school",".stack_var_col":"very happy","n":105,"y":105,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"very happy","n":361,"y":361,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"very happy","n":54,"y":54,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"very happy","n":176,"y":176,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"very happy","n":110,"y":110,"name":"graduate"}],"type":"column"},{"name":"pretty happy","data":[{".x_var_col":"less than high school",".stack_var_col":"pretty happy","n":137,"y":137,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"pretty happy","n":838,"y":838,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"pretty happy","n":130,"y":130,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"pretty happy","n":302,"y":302,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"pretty happy","n":191,"y":191,"name":"graduate"},{".x_var_col":null,".stack_var_col":"pretty happy","n":3,"y":3,"name":null}],"type":"column"},{"name":"not too happy","data":[{".x_var_col":"less than high school",".stack_var_col":"not too happy","n":85,"y":85,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"not too happy","n":259,"y":259,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"not too happy","n":31,"y":31,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"not too happy","n":58,"y":58,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"not too happy","n":17,"y":17,"name":"graduate"},{".x_var_col":null,".stack_var_col":"not too happy","n":2,"y":2,"name":null}],"type":"column"},{"name":null,"data":[{".x_var_col":"less than high school",".stack_var_col":null,"n":1,"y":1,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":null,"n":3,"y":3,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":null,"n":1,"y":1,"name":"associate/junior college"},{".x_var_col":null,".stack_var_col":null,"n":3,"y":3,"name":null}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Education Level"}},"subtitle":{"text":"Percentage breakdown within each education category"},"legend":{"title":{"text":"Happiness Level"}},"tooltip":{"formatter":"function() {\n        var value = this.percentage.toFixed(1);\n        return '<b>' + this.x + '<\/b><br/>' +\n               this.series.name + ': ' + value + '%<br/>' +\n               'Total: ' + 100;\n      }"},"colors":["#2E86AB","#A23B72","#F18F01"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="advanced-features">Advanced Features<a class="anchor" aria-label="anchor" href="#advanced-features"></a>
</h2>
<div class="section level3">
<h3 id="example-3-age-binning-with-political-views">Example 3: Age Binning with Political Views<a class="anchor" aria-label="anchor" href="#example-3-age-binning-with-political-views"></a>
</h3>
<p>Let’s demonstrate binning continuous variables by creating age groups
and examining political views.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, let's clean and prepare the age variable</span></span>
<span><span class="va">gss_clean_age</span> <span class="op">&lt;-</span> <span class="va">gss_clean</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Ensure age is numeric and remove missing values for this analysis</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">age_1a</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">polviews_1a</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="co"># Convert age to numeric if it isn't already</span></span>
<span>    age_numeric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">age_1a</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the cleaned data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Cleaned age summary:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cleaned age summary:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">gss_clean_age</span><span class="op">$</span><span class="va">age_numeric</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   18.00   34.00   50.00   49.26   62.00   89.00</span></span>
<span></span>
<span><span class="co"># Define age breaks and labels (adjusted if needed based on actual data range)</span></span>
<span><span class="va">age_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">gss_clean_age</span><span class="op">$</span><span class="va">age_numeric</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Age range in data:"</span>, <span class="va">age_range</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"to"</span>, <span class="va">age_range</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Age range in data: 18 to 89</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Adjust breaks to match actual data range</span></span>
<span><span class="va">age_breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">30</span>, <span class="fl">45</span>, <span class="fl">60</span>, <span class="fl">75</span>, <span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="va">age_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"18-29"</span>, <span class="st">"30-44"</span>, <span class="st">"45-59"</span>, <span class="st">"60-74"</span>, <span class="st">"75+"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Map political views to shorter labels</span></span>
<span><span class="va">polviews_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"Extremely Liberal"</span> <span class="op">=</span> <span class="st">"Ext Liberal"</span>,</span>
<span>  <span class="st">"Liberal"</span> <span class="op">=</span> <span class="st">"Liberal"</span>, </span>
<span>  <span class="st">"Slightly Liberal"</span> <span class="op">=</span> <span class="st">"Sl Liberal"</span>,</span>
<span>  <span class="st">"Moderate"</span> <span class="op">=</span> <span class="st">"Moderate"</span>,</span>
<span>  <span class="st">"Slightly Conservative"</span> <span class="op">=</span> <span class="st">"Sl Conservative"</span>,</span>
<span>  <span class="st">"Conservative"</span> <span class="op">=</span> <span class="st">"Conservative"</span>,</span>
<span>  <span class="st">"Extremely Conservative"</span> <span class="op">=</span> <span class="st">"Ext Conservative"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create chart with age binning and value mapping using the numeric age</span></span>
<span><span class="va">plot3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_stackedbar.html">create_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean_age</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"age_numeric"</span>,  <span class="co"># Use the numeric version</span></span>
<span>  stack_var <span class="op">=</span> <span class="st">"polviews_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Political Views by Age Group"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Distribution of political ideology across age cohorts"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Age Group"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Political Views"</span>,</span>
<span>  x_breaks <span class="op">=</span> <span class="va">age_breaks</span>,</span>
<span>  x_bin_labels <span class="op">=</span> <span class="va">age_labels</span>,</span>
<span>  stack_map_values <span class="op">=</span> <span class="va">polviews_map</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  x_tooltip_suffix <span class="op">=</span> <span class="st">" years"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#d7191c"</span>, <span class="st">"#fdae61"</span>, <span class="st">"#fee08b"</span>, <span class="st">"#e6f598"</span>, <span class="st">"#abdda4"</span>, <span class="st">"#66c2a5"</span>, <span class="st">"#2b83ba"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot3</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Political Views by Age Group"},"yAxis":{"title":{"text":"Percentage of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"conservative","data":[{".x_var_col":"18-29",".stack_var_col":"conservative","n":45,"y":45,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"conservative","n":84,"y":84,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"conservative","n":132,"y":132,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"conservative","n":104,"y":104,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"conservative","n":61,"y":61,"name":"75+"}],"type":"column"},{"name":"extremely conservative","data":[{".x_var_col":"18-29",".stack_var_col":"extremely conservative","n":11,"y":11,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"extremely conservative","n":30,"y":30,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"extremely conservative","n":31,"y":31,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"extremely conservative","n":28,"y":28,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"extremely conservative","n":20,"y":20,"name":"75+"}],"type":"column"},{"name":"extremely liberal","data":[{".x_var_col":"18-29",".stack_var_col":"extremely liberal","n":22,"y":22,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"extremely liberal","n":38,"y":38,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"extremely liberal","n":37,"y":37,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"extremely liberal","n":30,"y":30,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"extremely liberal","n":9,"y":9,"name":"75+"}],"type":"column"},{"name":"liberal","data":[{".x_var_col":"18-29",".stack_var_col":"liberal","n":75,"y":75,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"liberal","n":95,"y":95,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"liberal","n":80,"y":80,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"liberal","n":78,"y":78,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"liberal","n":21,"y":21,"name":"75+"}],"type":"column"},{"name":"moderate, middle of the road","data":[{".x_var_col":"18-29",".stack_var_col":"moderate, middle of the road","n":190,"y":190,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"moderate, middle of the road","n":274,"y":274,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"moderate, middle of the road","n":285,"y":285,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"moderate, middle of the road","n":193,"y":193,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"moderate, middle of the road","n":83,"y":83,"name":"75+"}],"type":"column"},{"name":"slightly conservative","data":[{".x_var_col":"18-29",".stack_var_col":"slightly conservative","n":53,"y":53,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"slightly conservative","n":96,"y":96,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"slightly conservative","n":118,"y":118,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"slightly conservative","n":79,"y":79,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"slightly conservative","n":35,"y":35,"name":"75+"}],"type":"column"},{"name":"slightly liberal","data":[{".x_var_col":"18-29",".stack_var_col":"slightly liberal","n":59,"y":59,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"slightly liberal","n":90,"y":90,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"slightly liberal","n":73,"y":73,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"slightly liberal","n":65,"y":65,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"slightly liberal","n":22,"y":22,"name":"75+"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Age Group"}},"subtitle":{"text":"Distribution of political ideology across age cohorts"},"legend":{"title":{"text":"Political Views"}},"tooltip":{"formatter":"function() {\n        var value = this.percentage.toFixed(1);\n        return '<b>' + this.x + ' years<\/b><br/>' +\n               this.series.name + ': ' + value + '%<br/>' +\n               'Total: ' + 100;\n      }"},"colors":["#d7191c","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#2b83ba"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-4-including-missing-values">Example 4: Including Missing Values<a class="anchor" aria-label="anchor" href="#example-4-including-missing-values"></a>
</h3>
<p>Let’s create a chart that explicitly shows missing data patterns.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Example 4: Including Missing Values</span></span>
<span></span>
<span><span class="co"># Let's create a chart that explicitly shows missing data patterns.</span></span>
<span></span>
<span><span class="co"># Create chart including NA values (using default "(Missing)" labels)</span></span>
<span><span class="va">plot4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_stackedbar.html">create_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"race_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"attend_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Religious Attendance by Race/Ethnicity"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Including non-responses as explicit categories"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Race/Ethnicity"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Religious Attendance Frequency"</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#8e0152"</span>, <span class="st">"#c51b7d"</span>, <span class="st">"#de77ae"</span>, <span class="st">"#f1b6da"</span>, <span class="st">"#fde0ef"</span>, </span>
<span>                   <span class="st">"#e6f5d0"</span>, <span class="st">"#b8e186"</span>, <span class="st">"#7fbc41"</span>, <span class="st">"#4d9221"</span>, <span class="st">"#276419"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot4</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Religious Attendance by Race/Ethnicity"},"yAxis":{"title":{"text":"Percentage of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"(Missing)","data":[{".x_var_col":"black",".stack_var_col":"(Missing)","n":6,"y":6,"name":"black"},{".x_var_col":"other",".stack_var_col":"(Missing)","n":2,"y":2,"name":"other"},{".x_var_col":"white",".stack_var_col":"(Missing)","n":9,"y":9,"name":"white"}],"type":"column"},{"name":"2-3 times a year","data":[{".x_var_col":"black",".stack_var_col":"2-3 times a year","n":60,"y":60,"name":"black"},{".x_var_col":"other",".stack_var_col":"2-3 times a year","n":30,"y":30,"name":"other"},{".x_var_col":"white",".stack_var_col":"2-3 times a year","n":160,"y":160,"name":"white"}],"type":"column"},{"name":"about once a month","data":[{".x_var_col":"black",".stack_var_col":"about once a month","n":31,"y":31,"name":"black"},{".x_var_col":"other",".stack_var_col":"about once a month","n":35,"y":35,"name":"other"},{".x_var_col":"white",".stack_var_col":"about once a month","n":124,"y":124,"name":"white"}],"type":"column"},{"name":"about once or twice a year","data":[{".x_var_col":"black",".stack_var_col":"about once or twice a year","n":49,"y":49,"name":"black"},{".x_var_col":"other",".stack_var_col":"about once or twice a year","n":29,"y":29,"name":"other"},{".x_var_col":"white",".stack_var_col":"about once or twice a year","n":307,"y":307,"name":"white"}],"type":"column"},{"name":"every week","data":[{".x_var_col":"black",".stack_var_col":"every week","n":100,"y":100,"name":"black"},{".x_var_col":"other",".stack_var_col":"every week","n":37,"y":37,"name":"other"},{".x_var_col":"white",".stack_var_col":"every week","n":344,"y":344,"name":"white"}],"type":"column"},{"name":"less than once a year","data":[{".x_var_col":"black",".stack_var_col":"less than once a year","n":19,"y":19,"name":"black"},{".x_var_col":"other",".stack_var_col":"less than once a year","n":15,"y":15,"name":"other"},{".x_var_col":"white",".stack_var_col":"less than once a year","n":139,"y":139,"name":"white"}],"type":"column"},{"name":"nearly every week","data":[{".x_var_col":"black",".stack_var_col":"nearly every week","n":27,"y":27,"name":"black"},{".x_var_col":"other",".stack_var_col":"nearly every week","n":17,"y":17,"name":"other"},{".x_var_col":"white",".stack_var_col":"nearly every week","n":82,"y":82,"name":"white"}],"type":"column"},{"name":"never","data":[{".x_var_col":"black",".stack_var_col":"never","n":83,"y":83,"name":"black"},{".x_var_col":"other",".stack_var_col":"never","n":58,"y":58,"name":"other"},{".x_var_col":"white",".stack_var_col":"never","n":582,"y":582,"name":"white"}],"type":"column"},{"name":"several times a week","data":[{".x_var_col":"black",".stack_var_col":"several times a week","n":60,"y":60,"name":"black"},{".x_var_col":"other",".stack_var_col":"several times a week","n":21,"y":21,"name":"other"},{".x_var_col":"white",".stack_var_col":"several times a week","n":129,"y":129,"name":"white"}],"type":"column"},{"name":"several times a year","data":[{".x_var_col":"black",".stack_var_col":"several times a year","n":55,"y":55,"name":"black"},{".x_var_col":"other",".stack_var_col":"several times a year","n":33,"y":33,"name":"other"},{".x_var_col":"white",".stack_var_col":"several times a year","n":224,"y":224,"name":"white"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Race/Ethnicity"}},"subtitle":{"text":"Including non-responses as explicit categories"},"legend":{"title":{"text":"Religious Attendance Frequency"}},"tooltip":{"formatter":"function() {\n        var value = this.percentage.toFixed(1);\n        return '<b>' + this.x + '<\/b><br/>' +\n               this.series.name + ': ' + value + '%<br/>' +\n               'Total: ' + 100;\n      }"},"colors":["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-5-custom-value-mapping">Example 5: Custom Value Mapping<a class="anchor" aria-label="anchor" href="#example-5-custom-value-mapping"></a>
</h3>
<p>Let’s demonstrate comprehensive value mapping for cleaner labels.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## TODO: there is also an odd 4 chart</span></span>
<span></span>
<span><span class="co"># Create mappings for cleaner display</span></span>
<span><span class="va">sex_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Male"</span> <span class="op">=</span> <span class="st">"Men"</span>, <span class="st">"Female"</span> <span class="op">=</span> <span class="st">"Women"</span><span class="op">)</span></span>
<span><span class="va">class_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"Lower Class"</span> <span class="op">=</span> <span class="st">"Lower"</span>,</span>
<span>  <span class="st">"Working Class"</span> <span class="op">=</span> <span class="st">"Working"</span>, </span>
<span>  <span class="st">"Middle Class"</span> <span class="op">=</span> <span class="st">"Middle"</span>,</span>
<span>  <span class="st">"Upper Class"</span> <span class="op">=</span> <span class="st">"Upper"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create chart with custom mappings</span></span>
<span><span class="va">plot5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_stackedbar.html">create_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"class_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"sex_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Gender Distribution Across Social Classes"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"With custom labels and ordering"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Self-Reported Social Class"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Gender"</span>,</span>
<span>  x_map_values <span class="op">=</span> <span class="va">class_map</span>,</span>
<span>  stack_map_values <span class="op">=</span> <span class="va">sex_map</span>,</span>
<span>  x_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lower"</span>, <span class="st">"Working"</span>, <span class="st">"Middle"</span>, <span class="st">"Upper"</span><span class="op">)</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Women"</span>, <span class="st">"Men"</span><span class="op">)</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"normal"</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">"Count: "</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#E07A5F"</span>, <span class="st">"#3D5A80"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot5</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-1fb4450895fe099f74a1" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Gender Distribution Across Social Classes"},"yAxis":{"title":{"text":"Number of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"normal","dataLabels":{"enabled":true,"format":"{point.y}","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"female","data":[{".x_var_col":"lower class",".stack_var_col":"female","n":173,"y":173,"name":"lower class"},{".x_var_col":"middle class",".stack_var_col":"female","n":616,"y":616,"name":"middle class"},{".x_var_col":"upper class",".stack_var_col":"female","n":41,"y":41,"name":"upper class"},{".x_var_col":"working class",".stack_var_col":"female","n":746,"y":746,"name":"working class"},{".x_var_col":null,".stack_var_col":"female","n":15,"y":15,"name":null}],"type":"column"},{"name":"male","data":[{".x_var_col":"lower class",".stack_var_col":"male","n":113,"y":113,"name":"lower class"},{".x_var_col":"middle class",".stack_var_col":"male","n":530,"y":530,"name":"middle class"},{".x_var_col":"upper class",".stack_var_col":"male","n":40,"y":40,"name":"upper class"},{".x_var_col":"working class",".stack_var_col":"male","n":584,"y":584,"name":"working class"},{".x_var_col":null,".stack_var_col":"male","n":9,"y":9,"name":null}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Self-Reported Social Class"}},"subtitle":{"text":"With custom labels and ordering"},"legend":{"title":{"text":"Gender"}},"tooltip":{"formatter":"function() {\n        var value = this.y;\n        return '<b>' + this.x + '<\/b><br/>' +\n               this.series.name + ': Count: ' + value + '<br/>' +\n               'Total: ' + this.point.stackTotal;\n      }"},"colors":["#E07A5F","#3D5A80"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="complex-analysis-examples">Complex Analysis Examples<a class="anchor" aria-label="anchor" href="#complex-analysis-examples"></a>
</h2>
<div class="section level3">
<h3 id="example-6-regional-patterns-in-trust">Example 6: Regional Patterns in Trust<a class="anchor" aria-label="anchor" href="#example-6-regional-patterns-in-trust"></a>
</h3>
<p>Let’s examine how trust levels vary across regions and social
classes.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## TODO: there is also an odd Series 4 chart</span></span>
<span></span>
<span><span class="co"># Create regional trust analysis</span></span>
<span><span class="va">plot6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_stackedbar.html">create_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"region_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"trust_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Trust Levels by US Region"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Regional variation in interpersonal trust"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"US Region"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Trust Level"</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Can Trust"</span>, <span class="st">"Can't Be Too Careful"</span>, <span class="st">"Depends"</span><span class="op">)</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2E8B57"</span>, <span class="st">"#DAA520"</span>, <span class="st">"#CD5C5C"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot6</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-10b3b7155e8045a1b2ad" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-10b3b7155e8045a1b2ad">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Trust Levels by US Region"},"yAxis":{"title":{"text":"Percentage of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"new england",".stack_var_col":"can't trust","n":47,"y":47,"name":"new england"},{".x_var_col":"middle atlantic",".stack_var_col":"can't trust","n":77,"y":77,"name":"middle atlantic"},{".x_var_col":"east north central",".stack_var_col":"can't trust","n":114,"y":114,"name":"east north central"},{".x_var_col":"west north central",".stack_var_col":"can't trust","n":48,"y":48,"name":"west north central"},{".x_var_col":"south atlantic",".stack_var_col":"can't trust","n":114,"y":114,"name":"south atlantic"},{".x_var_col":"east south atlantic",".stack_var_col":"can't trust","n":36,"y":36,"name":"east south atlantic"},{".x_var_col":"west south central",".stack_var_col":"can't trust","n":43,"y":43,"name":"west south central"},{".x_var_col":"mountain",".stack_var_col":"can't trust","n":52,"y":52,"name":"mountain"},{".x_var_col":"pacific",".stack_var_col":"can't trust","n":92,"y":92,"name":"pacific"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"new england",".stack_var_col":"can't be too careful","n":67,"y":67,"name":"new england"},{".x_var_col":"middle atlantic",".stack_var_col":"can't be too careful","n":133,"y":133,"name":"middle atlantic"},{".x_var_col":"east north central",".stack_var_col":"can't be too careful","n":206,"y":206,"name":"east north central"},{".x_var_col":"west north central",".stack_var_col":"can't be too careful","n":72,"y":72,"name":"west north central"},{".x_var_col":"south atlantic",".stack_var_col":"can't be too careful","n":250,"y":250,"name":"south atlantic"},{".x_var_col":"east south atlantic",".stack_var_col":"can't be too careful","n":98,"y":98,"name":"east south atlantic"},{".x_var_col":"west south central",".stack_var_col":"can't be too careful","n":156,"y":156,"name":"west south central"},{".x_var_col":"mountain",".stack_var_col":"can't be too careful","n":99,"y":99,"name":"mountain"},{".x_var_col":"pacific",".stack_var_col":"can't be too careful","n":163,"y":163,"name":"pacific"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"new england",".stack_var_col":"depends","n":9,"y":9,"name":"new england"},{".x_var_col":"middle atlantic",".stack_var_col":"depends","n":12,"y":12,"name":"middle atlantic"},{".x_var_col":"east north central",".stack_var_col":"depends","n":16,"y":16,"name":"east north central"},{".x_var_col":"west north central",".stack_var_col":"depends","n":10,"y":10,"name":"west north central"},{".x_var_col":"south atlantic",".stack_var_col":"depends","n":11,"y":11,"name":"south atlantic"},{".x_var_col":"east south atlantic",".stack_var_col":"depends","n":3,"y":3,"name":"east south atlantic"},{".x_var_col":"mountain",".stack_var_col":"depends","n":7,"y":7,"name":"mountain"},{".x_var_col":"pacific",".stack_var_col":"depends","n":11,"y":11,"name":"pacific"}],"type":"column"},{"name":null,"data":[{".x_var_col":"new england",".stack_var_col":null,"n":52,"y":52,"name":"new england"},{".x_var_col":"middle atlantic",".stack_var_col":null,"n":91,"y":91,"name":"middle atlantic"},{".x_var_col":"east north central",".stack_var_col":null,"n":166,"y":166,"name":"east north central"},{".x_var_col":"west north central",".stack_var_col":null,"n":63,"y":63,"name":"west north central"},{".x_var_col":"south atlantic",".stack_var_col":null,"n":175,"y":175,"name":"south atlantic"},{".x_var_col":"east south atlantic",".stack_var_col":null,"n":68,"y":68,"name":"east south atlantic"},{".x_var_col":"west south central",".stack_var_col":null,"n":98,"y":98,"name":"west south central"},{".x_var_col":"mountain",".stack_var_col":null,"n":77,"y":77,"name":"mountain"},{".x_var_col":"pacific",".stack_var_col":null,"n":131,"y":131,"name":"pacific"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"US Region"}},"subtitle":{"text":"Regional variation in interpersonal trust"},"legend":{"title":{"text":"Trust Level"}},"tooltip":{"formatter":"function() {\n        var value = this.percentage.toFixed(1);\n        return '<b>' + this.x + '<\/b><br/>' +\n               this.series.name + ': ' + value + '%<br/>' +\n               'Total: ' + 100;\n      }"},"colors":["#2E8B57","#DAA520","#CD5C5C"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-7-multi-level-analysis-with-income-binning">Example 7: Multi-level Analysis with Income Binning<a class="anchor" aria-label="anchor" href="#example-7-multi-level-analysis-with-income-binning"></a>
</h3>
<p>Let’s create income groups and examine their relationship with
happiness and gender.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co">## TODO: there is also an odd 12 chart, + the order is off?</span></span>
<span></span>
<span><span class="co"># First, let's examine the income variable</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">$</span><span class="va">income_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1    2    3    4    5    6    7    8    9   10   11   12 &lt;NA&gt; </span></span>
<span><span class="co">#&gt;   39   40   21   15   19   15   22   47  160  129  198 1728  434</span></span>
<span></span>
<span><span class="co"># Create income groups based on the GSS income categories</span></span>
<span><span class="co"># Note: GSS income is typically coded as categories, not continuous</span></span>
<span><span class="va">income_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"1"</span> <span class="op">=</span> <span class="st">"Under $1,000"</span>,</span>
<span>  <span class="st">"2"</span> <span class="op">=</span> <span class="st">"$1,000-2,999"</span>, </span>
<span>  <span class="st">"3"</span> <span class="op">=</span> <span class="st">"$3,000-3,999"</span>,</span>
<span>  <span class="st">"4"</span> <span class="op">=</span> <span class="st">"$4,000-4,999"</span>,</span>
<span>  <span class="st">"5"</span> <span class="op">=</span> <span class="st">"$5,000-5,999"</span>,</span>
<span>  <span class="st">"6"</span> <span class="op">=</span> <span class="st">"$6,000-6,999"</span>,</span>
<span>  <span class="st">"7"</span> <span class="op">=</span> <span class="st">"$7,000-7,999"</span>,</span>
<span>  <span class="st">"8"</span> <span class="op">=</span> <span class="st">"$8,000-9,999"</span>,</span>
<span>  <span class="st">"9"</span> <span class="op">=</span> <span class="st">"$10,000-12,499"</span>,</span>
<span>  <span class="st">"10"</span> <span class="op">=</span> <span class="st">"$12,500-14,999"</span>,</span>
<span>  <span class="st">"11"</span> <span class="op">=</span> <span class="st">"$15,000-17,499"</span>,</span>
<span>  <span class="st">"12"</span> <span class="op">=</span> <span class="st">"$17,500-19,999"</span>,</span>
<span>  <span class="st">"13"</span> <span class="op">=</span> <span class="st">"$20,000-22,499"</span>,</span>
<span>  <span class="st">"14"</span> <span class="op">=</span> <span class="st">"$22,500-24,999"</span>,</span>
<span>  <span class="st">"15"</span> <span class="op">=</span> <span class="st">"$25,000-29,999"</span>,</span>
<span>  <span class="st">"16"</span> <span class="op">=</span> <span class="st">"$30,000-34,999"</span>,</span>
<span>  <span class="st">"17"</span> <span class="op">=</span> <span class="st">"$35,000-39,999"</span>,</span>
<span>  <span class="st">"18"</span> <span class="op">=</span> <span class="st">"$40,000-49,999"</span>,</span>
<span>  <span class="st">"19"</span> <span class="op">=</span> <span class="st">"$50,000-59,999"</span>,</span>
<span>  <span class="st">"20"</span> <span class="op">=</span> <span class="st">"$60,000-74,999"</span>,</span>
<span>  <span class="st">"21"</span> <span class="op">=</span> <span class="st">"$75,000-89,999"</span>,</span>
<span>  <span class="st">"22"</span> <span class="op">=</span> <span class="st">"$90,000-109,999"</span>,</span>
<span>  <span class="st">"23"</span> <span class="op">=</span> <span class="st">"$110,000-129,999"</span>,</span>
<span>  <span class="st">"24"</span> <span class="op">=</span> <span class="st">"$130,000-149,999"</span>,</span>
<span>  <span class="st">"25"</span> <span class="op">=</span> <span class="st">"$150,000+"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create simplified income groups</span></span>
<span><span class="va">income_simple_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"1"</span> <span class="op">=</span> <span class="st">"Low"</span>, <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Low"</span>, <span class="st">"3"</span> <span class="op">=</span> <span class="st">"Low"</span>, <span class="st">"4"</span> <span class="op">=</span> <span class="st">"Low"</span>, <span class="st">"5"</span> <span class="op">=</span> <span class="st">"Low"</span>,</span>
<span>  <span class="st">"6"</span> <span class="op">=</span> <span class="st">"Low"</span>, <span class="st">"7"</span> <span class="op">=</span> <span class="st">"Low"</span>, <span class="st">"8"</span> <span class="op">=</span> <span class="st">"Low"</span>, <span class="st">"9"</span> <span class="op">=</span> <span class="st">"Low-Mid"</span>,</span>
<span>  <span class="st">"10"</span> <span class="op">=</span> <span class="st">"Low-Mid"</span>, <span class="st">"11"</span> <span class="op">=</span> <span class="st">"Low-Mid"</span>, <span class="st">"12"</span> <span class="op">=</span> <span class="st">"Low-Mid"</span>, <span class="st">"13"</span> <span class="op">=</span> <span class="st">"Low-Mid"</span>,</span>
<span>  <span class="st">"14"</span> <span class="op">=</span> <span class="st">"Low-Mid"</span>, <span class="st">"15"</span> <span class="op">=</span> <span class="st">"Middle"</span>, <span class="st">"16"</span> <span class="op">=</span> <span class="st">"Middle"</span>, <span class="st">"17"</span> <span class="op">=</span> <span class="st">"Middle"</span>,</span>
<span>  <span class="st">"18"</span> <span class="op">=</span> <span class="st">"Middle"</span>, <span class="st">"19"</span> <span class="op">=</span> <span class="st">"Mid-High"</span>, <span class="st">"20"</span> <span class="op">=</span> <span class="st">"Mid-High"</span>, <span class="st">"21"</span> <span class="op">=</span> <span class="st">"High"</span>,</span>
<span>  <span class="st">"22"</span> <span class="op">=</span> <span class="st">"High"</span>, <span class="st">"23"</span> <span class="op">=</span> <span class="st">"High"</span>, <span class="st">"24"</span> <span class="op">=</span> <span class="st">"High"</span>, <span class="st">"25"</span> <span class="op">=</span> <span class="st">"High"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create income-happiness analysis</span></span>
<span><span class="va">plot7</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_stackedbar.html">create_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"income_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"happy_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Happiness Distribution by Income Level"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Simplified income categories"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Income Level"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Happiness"</span>,</span>
<span>  x_map_values <span class="op">=</span> <span class="va">income_simple_map</span>,</span>
<span>  x_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"Low-Mid"</span>, <span class="st">"Middle"</span>, <span class="st">"Mid-High"</span>, <span class="st">"High"</span><span class="op">)</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Very Happy"</span>, <span class="st">"Pretty Happy"</span>, <span class="st">"Not Too Happy"</span><span class="op">)</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#1f77b4"</span>, <span class="st">"#ff7f0e"</span>, <span class="st">"#d62728"</span><span class="op">)</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot7</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-4018eef1a407a0df6b52" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-4018eef1a407a0df6b52">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Happiness Distribution by Income Level"},"yAxis":{"title":{"text":"Percentage of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"very happy","data":[{".x_var_col":"$1,000 to $2,999",".stack_var_col":"very happy","n":12,"y":12,"name":"$1,000 to $2,999"},{".x_var_col":"$10,000 to $14,999",".stack_var_col":"very happy","n":25,"y":25,"name":"$10,000 to $14,999"},{".x_var_col":"$15,000 to $19,999",".stack_var_col":"very happy","n":24,"y":24,"name":"$15,000 to $19,999"},{".x_var_col":"$20,000 to $24,999",".stack_var_col":"very happy","n":31,"y":31,"name":"$20,000 to $24,999"},{".x_var_col":"$25,000 or more",".stack_var_col":"very happy","n":539,"y":539,"name":"$25,000 or more"},{".x_var_col":"$3,000 to $3,999",".stack_var_col":"very happy","n":4,"y":4,"name":"$3,000 to $3,999"},{".x_var_col":"$4,000 to $4,999",".stack_var_col":"very happy","n":1,"y":1,"name":"$4,000 to $4,999"},{".x_var_col":"$5,000 to $5,999",".stack_var_col":"very happy","n":5,"y":5,"name":"$5,000 to $5,999"},{".x_var_col":"$6,000 to $6,999",".stack_var_col":"very happy","n":2,"y":2,"name":"$6,000 to $6,999"},{".x_var_col":"$7,000 to $7,999",".stack_var_col":"very happy","n":6,"y":6,"name":"$7,000 to $7,999"},{".x_var_col":"$8,000 to $9,999",".stack_var_col":"very happy","n":7,"y":7,"name":"$8,000 to $9,999"},{".x_var_col":"under $1,000",".stack_var_col":"very happy","n":3,"y":3,"name":"under $1,000"},{".x_var_col":null,".stack_var_col":"very happy","n":147,"y":147,"name":null}],"type":"column"},{"name":"pretty happy","data":[{".x_var_col":"$1,000 to $2,999",".stack_var_col":"pretty happy","n":18,"y":18,"name":"$1,000 to $2,999"},{".x_var_col":"$10,000 to $14,999",".stack_var_col":"pretty happy","n":86,"y":86,"name":"$10,000 to $14,999"},{".x_var_col":"$15,000 to $19,999",".stack_var_col":"pretty happy","n":62,"y":62,"name":"$15,000 to $19,999"},{".x_var_col":"$20,000 to $24,999",".stack_var_col":"pretty happy","n":117,"y":117,"name":"$20,000 to $24,999"},{".x_var_col":"$25,000 or more",".stack_var_col":"pretty happy","n":1013,"y":1013,"name":"$25,000 or more"},{".x_var_col":"$3,000 to $3,999",".stack_var_col":"pretty happy","n":10,"y":10,"name":"$3,000 to $3,999"},{".x_var_col":"$4,000 to $4,999",".stack_var_col":"pretty happy","n":9,"y":9,"name":"$4,000 to $4,999"},{".x_var_col":"$5,000 to $5,999",".stack_var_col":"pretty happy","n":9,"y":9,"name":"$5,000 to $5,999"},{".x_var_col":"$6,000 to $6,999",".stack_var_col":"pretty happy","n":7,"y":7,"name":"$6,000 to $6,999"},{".x_var_col":"$7,000 to $7,999",".stack_var_col":"pretty happy","n":11,"y":11,"name":"$7,000 to $7,999"},{".x_var_col":"$8,000 to $9,999",".stack_var_col":"pretty happy","n":23,"y":23,"name":"$8,000 to $9,999"},{".x_var_col":"under $1,000",".stack_var_col":"pretty happy","n":15,"y":15,"name":"under $1,000"},{".x_var_col":null,".stack_var_col":"pretty happy","n":221,"y":221,"name":null}],"type":"column"},{"name":"not too happy","data":[{".x_var_col":"$1,000 to $2,999",".stack_var_col":"not too happy","n":10,"y":10,"name":"$1,000 to $2,999"},{".x_var_col":"$10,000 to $14,999",".stack_var_col":"not too happy","n":49,"y":49,"name":"$10,000 to $14,999"},{".x_var_col":"$15,000 to $19,999",".stack_var_col":"not too happy","n":43,"y":43,"name":"$15,000 to $19,999"},{".x_var_col":"$20,000 to $24,999",".stack_var_col":"not too happy","n":50,"y":50,"name":"$20,000 to $24,999"},{".x_var_col":"$25,000 or more",".stack_var_col":"not too happy","n":174,"y":174,"name":"$25,000 or more"},{".x_var_col":"$3,000 to $3,999",".stack_var_col":"not too happy","n":7,"y":7,"name":"$3,000 to $3,999"},{".x_var_col":"$4,000 to $4,999",".stack_var_col":"not too happy","n":4,"y":4,"name":"$4,000 to $4,999"},{".x_var_col":"$5,000 to $5,999",".stack_var_col":"not too happy","n":5,"y":5,"name":"$5,000 to $5,999"},{".x_var_col":"$6,000 to $6,999",".stack_var_col":"not too happy","n":6,"y":6,"name":"$6,000 to $6,999"},{".x_var_col":"$7,000 to $7,999",".stack_var_col":"not too happy","n":5,"y":5,"name":"$7,000 to $7,999"},{".x_var_col":"$8,000 to $9,999",".stack_var_col":"not too happy","n":16,"y":16,"name":"$8,000 to $9,999"},{".x_var_col":"under $1,000",".stack_var_col":"not too happy","n":20,"y":20,"name":"under $1,000"},{".x_var_col":null,".stack_var_col":"not too happy","n":63,"y":63,"name":null}],"type":"column"},{"name":null,"data":[{".x_var_col":"$25,000 or more",".stack_var_col":null,"n":2,"y":2,"name":"$25,000 or more"},{".x_var_col":"$4,000 to $4,999",".stack_var_col":null,"n":1,"y":1,"name":"$4,000 to $4,999"},{".x_var_col":"$8,000 to $9,999",".stack_var_col":null,"n":1,"y":1,"name":"$8,000 to $9,999"},{".x_var_col":"under $1,000",".stack_var_col":null,"n":1,"y":1,"name":"under $1,000"},{".x_var_col":null,".stack_var_col":null,"n":3,"y":3,"name":null}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Income Level"}},"subtitle":{"text":"Simplified income categories"},"legend":{"title":{"text":"Happiness"}},"tooltip":{"formatter":"function() {\n        var value = this.percentage.toFixed(1);\n        return '<b>' + this.x + '<\/b><br/>' +\n               this.series.name + ': ' + value + '%<br/>' +\n               'Total: ' + 100;\n      }"},"colors":["#1f77b4","#ff7f0e","#d62728"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="summary-and-best-practices">Summary and Best Practices<a class="anchor" aria-label="anchor" href="#summary-and-best-practices"></a>
</h2>
<div class="section level3">
<h3 id="key-features-demonstrated">Key Features Demonstrated<a class="anchor" aria-label="anchor" href="#key-features-demonstrated"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Basic stacked bars</strong> with both count and percentage
displays</li>
<li>
<strong>Age binning</strong> for continuous variables</li>
<li>
<strong>Value mapping</strong> for cleaner, more descriptive
labels</li>
<li>
<strong>Custom ordering</strong> for logical presentation of
categories</li>
<li>
<strong>Missing value handling</strong> with explicit NA
categories</li>
<li>
<strong>Pre-aggregated data</strong> support for existing summary
tables</li>
<li>
<strong>Custom color palettes</strong> for different data types and
branding</li>
<li>
<strong>Comprehensive tooltips</strong> with prefixes, suffixes, and
formatting</li>
<li>
<strong>Flexible styling</strong> for different analytical
needs</li>
</ol>
</div>
<div class="section level3">
<h3 id="best-practices-for-stacked-bar-charts">Best Practices for Stacked Bar Charts<a class="anchor" aria-label="anchor" href="#best-practices-for-stacked-bar-charts"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Choose appropriate stacking type</span></span>
<span><span class="co"># - Use "normal" for comparing absolute counts across groups</span></span>
<span><span class="co"># - Use "percent" for comparing proportions within groups</span></span>
<span></span>
<span><span class="co"># 2. Order categories logically</span></span>
<span><span class="co"># - Use natural ordering for ordinal variables (e.g., Likert scales)</span></span>
<span><span class="co"># - Consider frequency-based ordering for nominal categories</span></span>
<span><span class="co"># - Place "Other" or "Missing" categories at the end</span></span>
<span></span>
<span><span class="co"># 3. Handle missing data thoughtfully</span></span>
<span><span class="co"># - Decide whether to include or exclude missing categories</span></span>
<span><span class="co"># - Use include_na = TRUE when missing patterns are meaningful</span></span>
<span><span class="co"># - Provide clear labels for missing categories</span></span>
<span></span>
<span><span class="co"># 4. Use appropriate colors</span></span>
<span><span class="co"># - Use diverging palettes for scales with meaningful center points</span></span>
<span><span class="co"># - Use qualitative palettes for nominal categories</span></span>
<span><span class="co"># - Ensure sufficient contrast between adjacent categories</span></span>
<span><span class="co"># - Consider colorblind accessibility</span></span>
<span></span>
<span><span class="co"># 5. Customize tooltips for clarity</span></span>
<span><span class="co"># - Include units and context in tooltips</span></span>
<span><span class="co"># - Use prefixes/suffixes to clarify meaning</span></span>
<span><span class="co"># - Format numbers appropriately for your audience</span></span>
<span></span>
<span><span class="co"># 6. Consider your audience</span></span>
<span><span class="co"># - Use descriptive labels rather than codes</span></span>
<span><span class="co"># - Provide clear titles and subtitles</span></span>
<span><span class="co"># - Include sample sizes in subtitles when relevant</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="common-use-cases">Common Use Cases<a class="anchor" aria-label="anchor" href="#common-use-cases"></a>
</h3>
<p>The <code>create_stackedbar</code> function is particularly useful
for:</p>
<ul>
<li>
<strong>Survey response analysis</strong>: Displaying Likert scale
responses across demographics</li>
<li>
<strong>Demographic breakdowns</strong>: Showing composition of
groups by various characteristics<br>
</li>
<li>
<strong>Attitude research</strong>: Comparing opinions across
different populations</li>
<li>
<strong>Market research</strong>: Analyzing customer segments and
preferences</li>
<li>
<strong>Educational research</strong>: Examining outcomes across
different groups</li>
<li>
<strong>Health surveys</strong>: Displaying health behaviors or
outcomes by demographics</li>
</ul>
</div>
<div class="section level3">
<h3 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>The <code><a href="../reference/create_stackedbar.html">create_stackedbar()</a></code> function provides a
comprehensive solution for creating publication-ready stacked bar charts
from survey data. Its extensive customization options, automatic data
handling capabilities, and interactive features make it an invaluable
tool for social science researchers.</p>
<p>Key advantages include:</p>
<ul>
<li>
<strong>Automatic data preparation</strong> for common survey data
formats</li>
<li>
<strong>Flexible binning and mapping</strong> for continuous and
coded variables</li>
<li>
<strong>Comprehensive missing data handling</strong> options</li>
<li>
<strong>Interactive tooltips</strong> for enhanced data
exploration</li>
<li>
<strong>Publication-ready styling</strong> with extensive
customization options</li>
<li><strong>Support for both raw and pre-aggregated data</strong></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
