<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Creating Interactive Stacked Bar Charts with `viz_stackedbar` ‚Ä¢ dashboardr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Creating Interactive Stacked Bar Charts with `viz_stackedbar`">
<style>
/* Navbar logo */
.navbar-brand img {
  max-height: 30px;
  width: auto;
  object-fit: contain;
}
/* Home page logo - limit size */
.page-header .logo {
  max-width: 150px;
  height: auto;
}
/* Also target the img in the README content */
#dashboardr- img[src*="logo"] {
  max-width: 150px;
  height: auto;
  float: right;
  margin-left: 20px;
}
</style>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dashboardr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">üöÄ Getting Started</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üìñ Core Concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/content-collections.html">- Content</a></li>
    <li><a class="dropdown-item" href="../articles/pages.html">- Pages</a></li>
    <li><a class="dropdown-item" href="../articles/dashboards.html">- Dashboards</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/advanced-features.html">‚öôÔ∏è Advanced Features</a></li>
    <li><a class="dropdown-item" href="../articles/publishing_dashboards.html">üåê Publishing Dashboards</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üìä Visualization Types</h6></li>
    <li><a class="dropdown-item" href="../articles/bar_vignette.html">- Bar Charts</a></li>
    <li><a class="dropdown-item" href="../articles/timeline_vignette.html">- Timelines</a></li>
    <li><a class="dropdown-item" href="../articles/stackedbar_vignette.html">- Stacked Bars</a></li>
    <li><a class="dropdown-item" href="../articles/heatmap_vignette.html">- Heatmaps</a></li>
    <li><a class="dropdown-item" href="../articles/histogram_vignette.html">- Histograms</a></li>
    <li><a class="dropdown-item" href="../articles/density_vignette.html">- Density Plots</a></li>
    <li><a class="dropdown-item" href="../articles/boxplot_vignette.html">- Box Plots</a></li>
    <li><a class="dropdown-item" href="../articles/scatter_vignette.html">- Scatter Plots</a></li>
    <li><a class="dropdown-item" href="../articles/treemap_vignette.html">- Treemaps</a></li>
    <li><a class="dropdown-item" href="../articles/map_vignette.html">- Maps</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown--live-demos" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">üéØ Live Demos</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown--live-demos">
<li><a class="dropdown-item" href="../articles/demos.html">üìö About the Demos</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../live-demos/tutorial/index.html">üéì Tutorial Dashboard</a></li>
    <li><a class="dropdown-item" href="../live-demos/showcase/index.html">üöÄ Showcase Dashboard</a></li>
    <li><a class="dropdown-item" href="../live-demos/sidebar-gss/explorer.html">üïπÔ∏è Sidebar Dashboard</a></li>
    <li><a class="external-link dropdown-item" href="https://www.digiqmonitor.nl/">üñ•Ô∏è DigIQ Monitor</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>üé® Tabset Themes</h6></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/pills/index.html">   Pills</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/modern/index.html">   Modern</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/minimal/index.html">   Minimal</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/classic/index.html">   Classic</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/underline/index.html">   Underline</a></li>
    <li><a class="dropdown-item" href="../live-demos/tabsets/segmented/index.html">   Segmented</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../live-demos/inputs/index.html">üéõÔ∏è Interactive Inputs</a></li>
    <li><a class="dropdown-item" href="../live-demos/sidebar/index.html">üìã Sidebar Filters</a></li>
    <li><a class="dropdown-item" href="../live-demos/overlay/index.html">üé≠ Loading Overlays</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../gallery/index.html">üñºÔ∏è Gallery</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="stackedbar_vignette_files/htmltools-fill-0.5.9/fill.css" rel="stylesheet">
<script src="stackedbar_vignette_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="stackedbar_vignette_files/proj4js-2.3.15/proj4.js"></script><link href="stackedbar_vignette_files/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="stackedbar_vignette_files/highcharts-9.3.1/highcharts.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/highcharts-3d.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/highcharts-more.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/stock.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/map.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/data.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/exporting.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/drilldown.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/item-series.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/annotations.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/export-data.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/funnel.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/heatmap.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/treemap.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/sankey.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/organization.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/streamgraph.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/sunburst.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/vector.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/wordcloud.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/xrange.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/tilemap.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/venn.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/gantt.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/timeline.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/bullet.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/coloraxis.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/dumbbell.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/lollipop.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/series-label.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/plugins/motion.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/custom/reset.js"></script><script src="stackedbar_vignette_files/highcharts-9.3.1/modules/boost.js"></script><script src="stackedbar_vignette_files/highchart-binding-0.9.4/highchart.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Creating Interactive Stacked Bar Charts with `viz_stackedbar`</h1>
                        <h4 data-toc-skip class="author">Alexandra
Pafford</h4>
            
            <h4 data-toc-skip class="date">2025-08-03</h4>
      

      <div class="d-none name"><code>stackedbar_vignette.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="introduction">üìñ Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>Welcome to this comprehensive guide on using the
<code>viz_stackedbar</code> function from the <code>dashboardr</code>
package. This unified function creates highly customizable interactive
stacked bar charts from survey data, supporting two powerful modes:</p>
<p><strong>Mode 1: Grouped/Crosstab Mode</strong> (use
<code>x_var</code> + <code>stack_var</code>)</p>
<ul>
<li>Shows how one variable breaks down by another (e.g., education by
gender)</li>
<li>Use when your data is in long/tidy format</li>
<li>Example:
<code>viz_stackedbar(data, x_var = "education", stack_var = "gender")</code>
</li>
</ul>
<p><strong>Mode 2: Multi-Variable/Battery Mode</strong> (use
<code>x_vars</code>)</p>
<ul>
<li>Compares response distributions across multiple survey
questions</li>
<li>Use when you have multiple columns with the same response scale
(e.g., Likert items)</li>
<li>Example:
<code>viz_stackedbar(data, x_vars = c("q1", "q2", "q3"))</code>
</li>
</ul>
<p>The function handles many common data preparation tasks
automatically, including:</p>
<ul>
<li>Converting <code>haven_labelled</code> columns (from SPSS imports)
to R factors</li>
<li>Mapping raw values to descriptive labels</li>
<li>Binning continuous variables into meaningful categories</li>
<li>Handling missing values explicitly or implicitly</li>
<li>Creating both count-based and percentage-based visualizations</li>
<li>Customizing colors, ordering, and interactive tooltips</li>
</ul>
<p>This vignette demonstrates both modes using the General Social Survey
(GSS) Panel 2020 dataset.</p>
</div>
<div class="section level3">
<h3 id="getting-started">‚öôÔ∏è Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<p>First, let‚Äôs load the necessary libraries and examine our data
set.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kjhealy/gssr" class="external-link">gssr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jkunst.com/highcharter/" class="external-link">highcharter</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://favstats.github.io/dashboardr/">dashboardr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load GSS Panel 2020 data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">gss_panel20</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-preparation">üìã Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h3>
<p>Let‚Äôs prepare our working dataset using the 2020 wave variables.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a working dataset with key _1a variables from 2020</span></span>
<span><span class="va">gss_clean</span> <span class="op">&lt;-</span> <span class="va">gss_panel20</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="co"># Demographics</span></span>
<span>    <span class="va">age_1a</span>, <span class="va">sex_1a</span>, <span class="va">race_1a</span>, <span class="va">degree_1a</span>, <span class="va">region_1a</span>,</span>
<span>    <span class="co"># Attitudes and behaviors</span></span>
<span>    <span class="va">happy_1a</span>, <span class="va">trust_1a</span>, <span class="va">fair_1a</span>, <span class="va">helpful_1a</span>,</span>
<span>    <span class="va">polviews_1a</span>, <span class="va">partyid_1a</span>, <span class="va">attend_1a</span>,</span>
<span>    <span class="co"># Economic</span></span>
<span>    <span class="va">income_1a</span>, <span class="va">class_1a</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Remove completely empty rows</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_any</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">~</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the data structure</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 2,867</span></span>
<span><span class="co">#&gt; Columns: 14</span></span>
<span><span class="co">#&gt; $ age_1a      <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 47<span style="color: #949494;">, </span>61<span style="color: #949494;">, </span>72<span style="color: #949494;">, </span>43<span style="color: #949494;">, </span>55<span style="color: #949494;">, </span>53<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>23<span style="color: #949494;">, </span>45<span style="color: #949494;">, </span>71<span style="color: #949494;">, </span>33<span style="color: #949494;">, </span>86<span style="color: #949494;">, </span>32<span style="color: #949494;">, </span>60‚Ä¶</span></span>
<span><span class="co">#&gt; $ sex_1a      <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>‚Ä¶</span></span>
<span><span class="co">#&gt; $ race_1a     <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>‚Ä¶</span></span>
<span><span class="co">#&gt; $ degree_1a   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 3<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>‚Ä¶</span></span>
<span><span class="co">#&gt; $ region_1a   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>‚Ä¶</span></span>
<span><span class="co">#&gt; $ happy_1a    <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>     2<span style="color: #949494;">, </span>    2<span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span>    2<span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span>    2<span style="color: #949494;">, </span>    1‚Ä¶</span></span>
<span><span class="co">#&gt; $ trust_1a    <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #BB0000;">NA(i)</span><span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span><span style="color: #BB0000;">NA(i)</span><span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span><span style="color: #BB0000;">NA(i)</span><span style="color: #949494;">, </span>    2‚Ä¶</span></span>
<span><span class="co">#&gt; $ fair_1a     <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #BB0000;">NA(i)</span><span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span><span style="color: #BB0000;">NA(i)</span><span style="color: #949494;">, </span>    2<span style="color: #949494;">, </span>    2<span style="color: #949494;">, </span><span style="color: #BB0000;">NA(i)</span><span style="color: #949494;">, </span>    1‚Ä¶</span></span>
<span><span class="co">#&gt; $ helpful_1a  <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #BB0000;">NA(i)</span><span style="color: #949494;">, </span>    2<span style="color: #949494;">, </span>    2<span style="color: #949494;">, </span><span style="color: #BB0000;">NA(i)</span><span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span><span style="color: #BB0000;">NA(i)</span><span style="color: #949494;">, </span>    1‚Ä¶</span></span>
<span><span class="co">#&gt; $ polviews_1a <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>     4<span style="color: #949494;">, </span>    2<span style="color: #949494;">, </span>    6<span style="color: #949494;">, </span>    4<span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    5‚Ä¶</span></span>
<span><span class="co">#&gt; $ partyid_1a  <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>     3<span style="color: #949494;">, </span>    2<span style="color: #949494;">, </span>    5<span style="color: #949494;">, </span>    5<span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span>    1<span style="color: #949494;">, </span>    5<span style="color: #949494;">, </span>    2‚Ä¶</span></span>
<span><span class="co">#&gt; $ attend_1a   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>7<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>‚Ä¶</span></span>
<span><span class="co">#&gt; $ income_1a   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #BB0000;">NA(n)</span><span style="color: #949494;">, </span>   12<span style="color: #949494;">, </span>   12<span style="color: #949494;">, </span><span style="color: #BB0000;">NA(n)</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA(n)</span><span style="color: #949494;">, </span>   12<span style="color: #949494;">, </span><span style="color: #BB0000;">NA(n)</span><span style="color: #949494;">, </span>   12‚Ä¶</span></span>
<span><span class="co">#&gt; $ class_1a    <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>     3<span style="color: #949494;">, </span><span style="color: #BB0000;">NA(d)</span><span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    3<span style="color: #949494;">, </span>    2‚Ä¶</span></span>
<span></span>
<span><span class="co"># Examine some key variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">$</span><span class="va">degree_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    0    1    2    3    4 &lt;NA&gt; </span></span>
<span><span class="co">#&gt;  328 1461  216  536  318    8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">$</span><span class="va">happy_1a</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1    2    3 &lt;NA&gt; </span></span>
<span><span class="co">#&gt;  806 1601  452    8</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-stacked-bar-charts">üìä Basic Stacked Bar Charts<a class="anchor" aria-label="anchor" href="#basic-stacked-bar-charts"></a>
</h2>
<div class="section level3">
<h3 id="example-1-education-by-gender-count-based">Example 1: Education by Gender (Count-based)<a class="anchor" aria-label="anchor" href="#example-1-education-by-gender-count-based"></a>
</h3>
<p>Let‚Äôs start with a basic stacked bar chart showing educational
attainment by gender.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create basic stacked bar chart</span></span>
<span><span class="va">plot1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"sex_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Educational Attainment by Gender"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"GSS Panel 2016 - Raw counts"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Highest Degree Completed"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Number of Respondents"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Gender"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"counts"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot1</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Educational Attainment by Gender"},"yAxis":{"title":{"text":"Number of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"normal","dataLabels":{"enabled":true,"format":"{point.y:.0f}","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"male","data":[{".x_var_col":"less than high school",".stack_var_col":"male","n":147,"y":147,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"male","n":662,"y":662,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"male","n":89,"y":89,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"male","n":243,"y":243,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"male","n":132,"y":132,"name":"graduate"}],"type":"column"},{"name":"female","data":[{".x_var_col":"less than high school",".stack_var_col":"female","n":181,"y":181,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"female","n":799,"y":799,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"female","n":127,"y":127,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"female","n":293,"y":293,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"female","n":186,"y":186,"name":"graduate"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Highest Degree Completed"},"categories":["less than high school","high school","associate/junior college","bachelor's","graduate"]},"subtitle":{"text":"GSS Panel 2016 - Raw counts"},"legend":{"title":{"text":"Gender"}},"tooltip":{"formatter":"function() {\n          var value = this.y;\n          var categoryLabel = this.point.category || this.series.chart.xAxis[0].categories[this.point.x] || this.x;\n          return '<b>' + categoryLabel + '<\/b><br/>' +\n                 this.series.name + ': ' + value + '<br/>' +\n                 'Total: ' + this.point.stackTotal;\n        }"}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-2-happiness-distribution-percentage-based">Example 2: Happiness Distribution (Percentage-based)<a class="anchor" aria-label="anchor" href="#example-2-happiness-distribution-percentage-based"></a>
</h3>
<p>Now let‚Äôs create a percentage-based stacked bar chart to show
happiness distribution across education levels.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define education order for logical display</span></span>
<span><span class="va">education_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"less than high school"</span>, <span class="st">"high school"</span>, <span class="st">"associate/junior college"</span>, <span class="st">"bachelor's"</span>, <span class="st">"graduate"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create percentage stacked bar chart</span></span>
<span><span class="va">plot2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"degree_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"happy_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Happiness Distribution Across Education Levels"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Percentage breakdown within each education category"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Education Level"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Percentage of Respondents"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Happiness Level"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  x_order <span class="op">=</span> <span class="va">education_order</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"very happy"</span>, <span class="st">"pretty happy"</span>, <span class="st">"not too happy"</span><span class="op">)</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2E86AB"</span>, <span class="st">"#A23B72"</span>, <span class="st">"#F18F01"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot2</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Happiness Distribution Across Education Levels"},"yAxis":{"title":{"text":"Percentage of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"very happy","data":[{".x_var_col":"less than high school",".stack_var_col":"very happy","n":105,"y":105,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"very happy","n":361,"y":361,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"very happy","n":54,"y":54,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"very happy","n":176,"y":176,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"very happy","n":110,"y":110,"name":"graduate"}],"type":"column"},{"name":"pretty happy","data":[{".x_var_col":"less than high school",".stack_var_col":"pretty happy","n":137,"y":137,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"pretty happy","n":838,"y":838,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"pretty happy","n":130,"y":130,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"pretty happy","n":302,"y":302,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"pretty happy","n":191,"y":191,"name":"graduate"}],"type":"column"},{"name":"not too happy","data":[{".x_var_col":"less than high school",".stack_var_col":"not too happy","n":85,"y":85,"name":"less than high school"},{".x_var_col":"high school",".stack_var_col":"not too happy","n":259,"y":259,"name":"high school"},{".x_var_col":"associate/junior college",".stack_var_col":"not too happy","n":31,"y":31,"name":"associate/junior college"},{".x_var_col":"bachelor's",".stack_var_col":"not too happy","n":58,"y":58,"name":"bachelor's"},{".x_var_col":"graduate",".stack_var_col":"not too happy","n":17,"y":17,"name":"graduate"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Education Level"},"categories":["less than high school","high school","associate/junior college","bachelor's","graduate"]},"subtitle":{"text":"Percentage breakdown within each education category"},"legend":{"title":{"text":"Happiness Level"}},"tooltip":{"formatter":"function() {\n          var value = this.percentage.toFixed(1);\n          var categoryLabel = this.point.category || this.series.chart.xAxis[0].categories[this.point.x] || this.x;\n          return '<b>' + categoryLabel + '<\/b><br/>' +\n                 this.series.name + ': ' + value + '%<br/>' +\n                 'Total: ' + 100;\n        }"},"colors":["#2E86AB","#A23B72","#F18F01"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="advanced-features">‚ö° Advanced Features<a class="anchor" aria-label="anchor" href="#advanced-features"></a>
</h2>
<div class="section level3">
<h3 id="example-3-age-binning-with-political-views">Example 3: Age Binning with Political Views<a class="anchor" aria-label="anchor" href="#example-3-age-binning-with-political-views"></a>
</h3>
<p>Let‚Äôs demonstrate binning continuous variables by creating age groups
and examining political views.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, let's clean and prepare the age variable</span></span>
<span><span class="va">gss_clean_age</span> <span class="op">&lt;-</span> <span class="va">gss_clean</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Ensure age is numeric and remove missing values for this analysis</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">age_1a</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">polviews_1a</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="co"># Convert age to numeric if it isn't already</span></span>
<span>    age_numeric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">age_1a</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the cleaned data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Cleaned age summary:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cleaned age summary:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">gss_clean_age</span><span class="op">$</span><span class="va">age_numeric</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   18.00   34.00   50.00   49.26   62.00   89.00</span></span>
<span></span>
<span><span class="co"># Define age breaks and labels (adjusted if needed based on actual data range)</span></span>
<span><span class="va">age_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">gss_clean_age</span><span class="op">$</span><span class="va">age_numeric</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Age range in data:"</span>, <span class="va">age_range</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"to"</span>, <span class="va">age_range</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Age range in data: 18 to 89</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Adjust breaks to match actual data range</span></span>
<span><span class="va">age_breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">30</span>, <span class="fl">45</span>, <span class="fl">60</span>, <span class="fl">75</span>, <span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="va">age_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"18-29"</span>, <span class="st">"30-44"</span>, <span class="st">"45-59"</span>, <span class="st">"60-74"</span>, <span class="st">"75+"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Map political views to shorter labels</span></span>
<span><span class="va">polviews_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"extremely liberal"</span> <span class="op">=</span> <span class="st">"Ext. Liberal"</span>,</span>
<span>  <span class="st">"liberal"</span> <span class="op">=</span> <span class="st">"Liberal"</span>, </span>
<span>  <span class="st">"slightly liberal"</span> <span class="op">=</span> <span class="st">"Sl. Liberal"</span>,</span>
<span>  <span class="st">"moderate, middle of the road"</span> <span class="op">=</span> <span class="st">"Moderate"</span>,</span>
<span>  <span class="st">"slightly conservative"</span> <span class="op">=</span> <span class="st">"Sl. Conservative"</span>,</span>
<span>  <span class="st">"conservative"</span> <span class="op">=</span> <span class="st">"Conservative"</span>,</span>
<span>  <span class="st">"extremely conservative"</span> <span class="op">=</span> <span class="st">"Ext. Conservative"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">polviews_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Ext. Liberal"</span>, <span class="st">"Liberal"</span>, <span class="st">"Sl. Liberal"</span>,</span>
<span>                       <span class="st">"Moderate"</span>, <span class="st">"Sl. Conservative"</span>, <span class="st">"Conservative"</span>, </span>
<span>                       <span class="st">"Ext. Conservative"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># Create chart with age binning and value mapping using the numeric age</span></span>
<span><span class="va">plot3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean_age</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"age_numeric"</span>,  <span class="co"># Use the numeric version</span></span>
<span>  stack_var <span class="op">=</span> <span class="st">"polviews_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Political Views by Age Group"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Distribution of political ideology across age cohorts"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Age Group"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Political Views"</span>,</span>
<span>  x_breaks <span class="op">=</span> <span class="va">age_breaks</span>,</span>
<span>  x_bin_labels <span class="op">=</span> <span class="va">age_labels</span>,</span>
<span>  stack_map_values <span class="op">=</span> <span class="va">polviews_map</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  x_tooltip_suffix <span class="op">=</span> <span class="st">" years"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#d7191c"</span>, <span class="st">"#fdae61"</span>, <span class="st">"#fee08b"</span>, <span class="st">"#e6f598"</span>, <span class="st">"#abdda4"</span>, <span class="st">"#66c2a5"</span>, <span class="st">"#2b83ba"</span><span class="op">)</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="va">polviews_order</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot3</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Political Views by Age Group"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"Ext. Liberal","data":[{".x_var_col":"18-29",".stack_var_col":"Ext. Liberal","n":22,"y":22,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"Ext. Liberal","n":38,"y":38,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"Ext. Liberal","n":37,"y":37,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"Ext. Liberal","n":30,"y":30,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"Ext. Liberal","n":9,"y":9,"name":"75+"}],"type":"column"},{"name":"Liberal","data":[{".x_var_col":"18-29",".stack_var_col":"Liberal","n":75,"y":75,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"Liberal","n":95,"y":95,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"Liberal","n":80,"y":80,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"Liberal","n":78,"y":78,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"Liberal","n":21,"y":21,"name":"75+"}],"type":"column"},{"name":"Sl. Liberal","data":[{".x_var_col":"18-29",".stack_var_col":"Sl. Liberal","n":59,"y":59,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"Sl. Liberal","n":90,"y":90,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"Sl. Liberal","n":73,"y":73,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"Sl. Liberal","n":65,"y":65,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"Sl. Liberal","n":22,"y":22,"name":"75+"}],"type":"column"},{"name":"Moderate","data":[{".x_var_col":"18-29",".stack_var_col":"Moderate","n":190,"y":190,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"Moderate","n":274,"y":274,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"Moderate","n":285,"y":285,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"Moderate","n":193,"y":193,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"Moderate","n":83,"y":83,"name":"75+"}],"type":"column"},{"name":"Sl. Conservative","data":[{".x_var_col":"18-29",".stack_var_col":"Sl. Conservative","n":53,"y":53,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"Sl. Conservative","n":96,"y":96,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"Sl. Conservative","n":118,"y":118,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"Sl. Conservative","n":79,"y":79,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"Sl. Conservative","n":35,"y":35,"name":"75+"}],"type":"column"},{"name":"Conservative","data":[{".x_var_col":"18-29",".stack_var_col":"Conservative","n":45,"y":45,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"Conservative","n":84,"y":84,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"Conservative","n":132,"y":132,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"Conservative","n":104,"y":104,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"Conservative","n":61,"y":61,"name":"75+"}],"type":"column"},{"name":"Ext. Conservative","data":[{".x_var_col":"18-29",".stack_var_col":"Ext. Conservative","n":11,"y":11,"name":"18-29"},{".x_var_col":"30-44",".stack_var_col":"Ext. Conservative","n":30,"y":30,"name":"30-44"},{".x_var_col":"45-59",".stack_var_col":"Ext. Conservative","n":31,"y":31,"name":"45-59"},{".x_var_col":"60-74",".stack_var_col":"Ext. Conservative","n":28,"y":28,"name":"60-74"},{".x_var_col":"75+",".stack_var_col":"Ext. Conservative","n":20,"y":20,"name":"75+"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Age Group"},"categories":["18-29","30-44","45-59","60-74","75+"]},"subtitle":{"text":"Distribution of political ideology across age cohorts"},"legend":{"title":{"text":"Political Views"}},"tooltip":{"formatter":"function() {\n          var value = this.percentage.toFixed(1);\n          var categoryLabel = this.point.category || this.series.chart.xAxis[0].categories[this.point.x] || this.x;\n          return '<b>' + categoryLabel + ' years<\/b><br/>' +\n                 this.series.name + ': ' + value + '%<br/>' +\n                 'Total: ' + 100;\n        }"},"colors":["#d7191c","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#2b83ba"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-4-including-missing-values">Example 4: Including Missing Values<a class="anchor" aria-label="anchor" href="#example-4-including-missing-values"></a>
</h3>
<p>Let‚Äôs create a chart that explicitly shows missing data patterns.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Example 4: Including Missing Values</span></span>
<span></span>
<span><span class="co"># Let's create a chart that explicitly shows missing data patterns.</span></span>
<span></span>
<span><span class="co"># Create chart including NA values (using default "(Missing)" labels)</span></span>
<span><span class="va">plot4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"race_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"attend_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Religious Attendance by Race/Ethnicity"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Including non-responses as explicit categories"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Race/Ethnicity"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Religious Attendance Frequency"</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#8e0152"</span>, <span class="st">"#c51b7d"</span>, <span class="st">"#de77ae"</span>, <span class="st">"#f1b6da"</span>, <span class="st">"#fde0ef"</span>, </span>
<span>                   <span class="st">"#e6f5d0"</span>, <span class="st">"#b8e186"</span>, <span class="st">"#7fbc41"</span>, <span class="st">"#4d9221"</span>, <span class="st">"#276419"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot4</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Religious Attendance by Race/Ethnicity"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"never","data":[{".x_var_col":"white",".stack_var_col":"never","n":582,"y":582,"name":"white"},{".x_var_col":"black",".stack_var_col":"never","n":83,"y":83,"name":"black"},{".x_var_col":"other",".stack_var_col":"never","n":58,"y":58,"name":"other"}],"type":"column"},{"name":"less than once a year","data":[{".x_var_col":"white",".stack_var_col":"less than once a year","n":139,"y":139,"name":"white"},{".x_var_col":"black",".stack_var_col":"less than once a year","n":19,"y":19,"name":"black"},{".x_var_col":"other",".stack_var_col":"less than once a year","n":15,"y":15,"name":"other"}],"type":"column"},{"name":"about once or twice a year","data":[{".x_var_col":"white",".stack_var_col":"about once or twice a year","n":307,"y":307,"name":"white"},{".x_var_col":"black",".stack_var_col":"about once or twice a year","n":49,"y":49,"name":"black"},{".x_var_col":"other",".stack_var_col":"about once or twice a year","n":29,"y":29,"name":"other"}],"type":"column"},{"name":"several times a year","data":[{".x_var_col":"white",".stack_var_col":"several times a year","n":224,"y":224,"name":"white"},{".x_var_col":"black",".stack_var_col":"several times a year","n":55,"y":55,"name":"black"},{".x_var_col":"other",".stack_var_col":"several times a year","n":33,"y":33,"name":"other"}],"type":"column"},{"name":"about once a month","data":[{".x_var_col":"white",".stack_var_col":"about once a month","n":124,"y":124,"name":"white"},{".x_var_col":"black",".stack_var_col":"about once a month","n":31,"y":31,"name":"black"},{".x_var_col":"other",".stack_var_col":"about once a month","n":35,"y":35,"name":"other"}],"type":"column"},{"name":"2-3 times a year","data":[{".x_var_col":"white",".stack_var_col":"2-3 times a year","n":160,"y":160,"name":"white"},{".x_var_col":"black",".stack_var_col":"2-3 times a year","n":60,"y":60,"name":"black"},{".x_var_col":"other",".stack_var_col":"2-3 times a year","n":30,"y":30,"name":"other"}],"type":"column"},{"name":"nearly every week","data":[{".x_var_col":"white",".stack_var_col":"nearly every week","n":82,"y":82,"name":"white"},{".x_var_col":"black",".stack_var_col":"nearly every week","n":27,"y":27,"name":"black"},{".x_var_col":"other",".stack_var_col":"nearly every week","n":17,"y":17,"name":"other"}],"type":"column"},{"name":"every week","data":[{".x_var_col":"white",".stack_var_col":"every week","n":344,"y":344,"name":"white"},{".x_var_col":"black",".stack_var_col":"every week","n":100,"y":100,"name":"black"},{".x_var_col":"other",".stack_var_col":"every week","n":37,"y":37,"name":"other"}],"type":"column"},{"name":"several times a week","data":[{".x_var_col":"white",".stack_var_col":"several times a week","n":129,"y":129,"name":"white"},{".x_var_col":"black",".stack_var_col":"several times a week","n":60,"y":60,"name":"black"},{".x_var_col":"other",".stack_var_col":"several times a week","n":21,"y":21,"name":"other"}],"type":"column"},{"name":"(Missing)","data":[{".x_var_col":"white",".stack_var_col":"(Missing)","n":9,"y":9,"name":"white"},{".x_var_col":"black",".stack_var_col":"(Missing)","n":6,"y":6,"name":"black"},{".x_var_col":"other",".stack_var_col":"(Missing)","n":2,"y":2,"name":"other"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Race/Ethnicity"},"categories":["white","black","other"]},"subtitle":{"text":"Including non-responses as explicit categories"},"legend":{"title":{"text":"Religious Attendance Frequency"}},"tooltip":{"formatter":"function() {\n          var value = this.percentage.toFixed(1);\n          var categoryLabel = this.point.category || this.series.chart.xAxis[0].categories[this.point.x] || this.x;\n          return '<b>' + categoryLabel + '<\/b><br/>' +\n                 this.series.name + ': ' + value + '%<br/>' +\n                 'Total: ' + 100;\n        }"},"colors":["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-5-custom-value-mapping">Example 5: Custom Value Mapping<a class="anchor" aria-label="anchor" href="#example-5-custom-value-mapping"></a>
</h3>
<p>Let‚Äôs demonstrate comprehensive value mapping for cleaner labels.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Create mappings for cleaner display</span></span>
<span><span class="va">sex_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"male"</span> <span class="op">=</span> <span class="st">"Men"</span>, <span class="st">"female"</span> <span class="op">=</span> <span class="st">"Women"</span><span class="op">)</span></span>
<span><span class="va">class_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"lower class"</span> <span class="op">=</span> <span class="st">"Lower"</span>,</span>
<span>  <span class="st">"working class"</span> <span class="op">=</span> <span class="st">"Working"</span>, </span>
<span>  <span class="st">"middle class"</span> <span class="op">=</span> <span class="st">"Middle"</span>,</span>
<span>  <span class="st">"upper class"</span> <span class="op">=</span> <span class="st">"Upper"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create chart with custom mappings</span></span>
<span><span class="va">plot5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_panel20</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"class_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"sex_1a"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Gender Distribution Across Social Classes"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"With custom labels and ordering"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Self-Reported Social Class"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Gender"</span>,</span>
<span>  x_map_values <span class="op">=</span> <span class="va">class_map</span>,</span>
<span>  stack_map_values <span class="op">=</span> <span class="va">sex_map</span>,</span>
<span>  x_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lower"</span>, <span class="st">"Working"</span>, <span class="st">"Middle"</span>, <span class="st">"Upper"</span><span class="op">)</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Women"</span>, <span class="st">"Men"</span><span class="op">)</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"counts"</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">"Count: "</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#E07A5F"</span>, <span class="st">"#3D5A80"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot5</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-1fb4450895fe099f74a1" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Gender Distribution Across Social Classes"},"yAxis":{"title":{"text":"Count"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"normal","dataLabels":{"enabled":true,"format":"{point.y:.0f}","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"Women","data":[{".x_var_col":"Lower",".stack_var_col":"Women","n":173,"y":173,"name":"Lower"},{".x_var_col":"Working",".stack_var_col":"Women","n":746,"y":746,"name":"Working"},{".x_var_col":"Middle",".stack_var_col":"Women","n":616,"y":616,"name":"Middle"},{".x_var_col":"Upper",".stack_var_col":"Women","n":41,"y":41,"name":"Upper"}],"type":"column"},{"name":"Men","data":[{".x_var_col":"Lower",".stack_var_col":"Men","n":113,"y":113,"name":"Lower"},{".x_var_col":"Working",".stack_var_col":"Men","n":584,"y":584,"name":"Working"},{".x_var_col":"Middle",".stack_var_col":"Men","n":530,"y":530,"name":"Middle"},{".x_var_col":"Upper",".stack_var_col":"Men","n":40,"y":40,"name":"Upper"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Self-Reported Social Class"},"categories":["Lower","Working","Middle","Upper"]},"subtitle":{"text":"With custom labels and ordering"},"legend":{"title":{"text":"Gender"}},"tooltip":{"formatter":"function() {\n          var value = this.y;\n          var categoryLabel = this.point.category || this.series.chart.xAxis[0].categories[this.point.x] || this.x;\n          return '<b>' + categoryLabel + '<\/b><br/>' +\n                 this.series.name + ': Count: ' + value + '<br/>' +\n                 'Total: ' + this.point.stackTotal;\n        }"},"colors":["#E07A5F","#3D5A80"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="complex-analysis-examples">üî¨ Complex Analysis Examples<a class="anchor" aria-label="anchor" href="#complex-analysis-examples"></a>
</h2>
<div class="section level3">
<h3 id="example-6-regional-patterns-in-trust">Example 6: Regional Patterns in Trust<a class="anchor" aria-label="anchor" href="#example-6-regional-patterns-in-trust"></a>
</h3>
<p>Let‚Äôs examine how trust levels vary across regions and social
classes.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Recode labels to fix the mistake</span></span>
<span><span class="va">trust_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"can't trust"</span> <span class="op">=</span> <span class="st">"Can Trust"</span>,</span>
<span>  <span class="st">"can't be too careful"</span> <span class="op">=</span> <span class="st">"Can't Be Too Careful"</span>,</span>
<span>  <span class="st">"depends"</span> <span class="op">=</span> <span class="st">"It Depends"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create regional trust analysis</span></span>
<span><span class="va">plot6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_panel20</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">"region_1a"</span>,</span>
<span>  stack_var <span class="op">=</span> <span class="st">"trust_1a"</span>,</span>
<span>  stack_map_values <span class="op">=</span> <span class="va">trust_map</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Do You Trust Strangers?"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Regional variation in interpersonal trust"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"US Region"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Trust Level"</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Can Trust"</span>, <span class="st">"Can't Be Too Careful"</span>, <span class="st">"It Depends"</span><span class="op">)</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2E8B57"</span>, <span class="st">"#CD5C5C"</span>, <span class="st">"#DAA520"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot6</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-10b3b7155e8045a1b2ad" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-10b3b7155e8045a1b2ad">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Do You Trust Strangers?"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"Can Trust","data":[{".x_var_col":"new england",".stack_var_col":"Can Trust","n":47,"y":47,"name":"new england"},{".x_var_col":"middle atlantic",".stack_var_col":"Can Trust","n":77,"y":77,"name":"middle atlantic"},{".x_var_col":"east north central",".stack_var_col":"Can Trust","n":114,"y":114,"name":"east north central"},{".x_var_col":"west north central",".stack_var_col":"Can Trust","n":48,"y":48,"name":"west north central"},{".x_var_col":"south atlantic",".stack_var_col":"Can Trust","n":114,"y":114,"name":"south atlantic"},{".x_var_col":"east south atlantic",".stack_var_col":"Can Trust","n":36,"y":36,"name":"east south atlantic"},{".x_var_col":"west south central",".stack_var_col":"Can Trust","n":43,"y":43,"name":"west south central"},{".x_var_col":"mountain",".stack_var_col":"Can Trust","n":52,"y":52,"name":"mountain"},{".x_var_col":"pacific",".stack_var_col":"Can Trust","n":92,"y":92,"name":"pacific"}],"type":"column"},{"name":"Can't Be Too Careful","data":[{".x_var_col":"new england",".stack_var_col":"Can't Be Too Careful","n":67,"y":67,"name":"new england"},{".x_var_col":"middle atlantic",".stack_var_col":"Can't Be Too Careful","n":133,"y":133,"name":"middle atlantic"},{".x_var_col":"east north central",".stack_var_col":"Can't Be Too Careful","n":206,"y":206,"name":"east north central"},{".x_var_col":"west north central",".stack_var_col":"Can't Be Too Careful","n":72,"y":72,"name":"west north central"},{".x_var_col":"south atlantic",".stack_var_col":"Can't Be Too Careful","n":250,"y":250,"name":"south atlantic"},{".x_var_col":"east south atlantic",".stack_var_col":"Can't Be Too Careful","n":98,"y":98,"name":"east south atlantic"},{".x_var_col":"west south central",".stack_var_col":"Can't Be Too Careful","n":156,"y":156,"name":"west south central"},{".x_var_col":"mountain",".stack_var_col":"Can't Be Too Careful","n":99,"y":99,"name":"mountain"},{".x_var_col":"pacific",".stack_var_col":"Can't Be Too Careful","n":163,"y":163,"name":"pacific"}],"type":"column"},{"name":"It Depends","data":[{".x_var_col":"new england",".stack_var_col":"It Depends","n":9,"y":9,"name":"new england"},{".x_var_col":"middle atlantic",".stack_var_col":"It Depends","n":12,"y":12,"name":"middle atlantic"},{".x_var_col":"east north central",".stack_var_col":"It Depends","n":16,"y":16,"name":"east north central"},{".x_var_col":"west north central",".stack_var_col":"It Depends","n":10,"y":10,"name":"west north central"},{".x_var_col":"south atlantic",".stack_var_col":"It Depends","n":11,"y":11,"name":"south atlantic"},{".x_var_col":"east south atlantic",".stack_var_col":"It Depends","n":3,"y":3,"name":"east south atlantic"},{".x_var_col":"mountain",".stack_var_col":"It Depends","n":7,"y":7,"name":"mountain"},{".x_var_col":"pacific",".stack_var_col":"It Depends","n":11,"y":11,"name":"pacific"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"US Region"},"categories":["new england","middle atlantic","east north central","west north central","south atlantic","east south atlantic","west south central","mountain","pacific"]},"subtitle":{"text":"Regional variation in interpersonal trust"},"legend":{"title":{"text":"Trust Level"}},"tooltip":{"formatter":"function() {\n          var value = this.percentage.toFixed(1);\n          var categoryLabel = this.point.category || this.series.chart.xAxis[0].categories[this.point.x] || this.x;\n          return '<b>' + categoryLabel + '<\/b><br/>' +\n                 this.series.name + ': ' + value + '%<br/>' +\n                 'Total: ' + 100;\n        }"},"colors":["#2E8B57","#CD5C5C","#DAA520"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="multi-variable-mode-comparing-survey-questions">üìä Multi-Variable Mode: Comparing Survey Questions<a class="anchor" aria-label="anchor" href="#multi-variable-mode-comparing-survey-questions"></a>
</h2>
<p>The <code>viz_stackedbar</code> function also supports comparing
multiple survey questions side-by-side. This is particularly useful for
visualizing survey batteries (sets of questions with the same response
scale).</p>
<div class="section level3">
<h3 id="example-7-basic-multi-variable-comparison">Example 7: Basic Multi-Variable Comparison<a class="anchor" aria-label="anchor" href="#example-7-basic-multi-variable-comparison"></a>
</h3>
<p>When you have multiple columns representing different questions with
the same response categories, use <code>x_vars</code> to compare
them:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the questions to compare</span></span>
<span><span class="va">social_questions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trust_1a"</span>, <span class="st">"fair_1a"</span>, <span class="st">"helpful_1a"</span><span class="op">)</span></span>
<span><span class="va">social_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Interpersonal Trust"</span>,</span>
<span>  <span class="st">"Fairness of Others"</span>,</span>
<span>  <span class="st">"Helpfulness of Others"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create multi-variable comparison chart</span></span>
<span><span class="va">plot7</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="va">social_labels</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Attitudes and Trust"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Distribution of responses across social attitude questions"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Social Attitude Dimension"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response Level"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot7</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-4018eef1a407a0df6b52" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-4018eef1a407a0df6b52">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Attitudes and Trust"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't trust","n":623,"y":623,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"can't trust","n":797,"y":797,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"can't trust","n":917,"y":917,"name":"Helpfulness of Others"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"can't be too careful","n":892,"y":892,"name":"Helpfulness of Others"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"depends","n":79,"y":79,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"depends","n":114,"y":114,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"depends","n":137,"y":137,"name":"Helpfulness of Others"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Social Attitude Dimension"},"categories":["Interpersonal Trust","Fairness of Others","Helpfulness of Others"]},"subtitle":{"text":"Distribution of responses across social attitude questions"},"legend":{"title":{"text":"Response Level"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-8-multi-variable-with-response-mapping">Example 8: Multi-Variable with Response Mapping<a class="anchor" aria-label="anchor" href="#example-8-multi-variable-with-response-mapping"></a>
</h3>
<p>You can standardize response labels across questions and customize
the display. It‚Äôs helpful to first check what the actual response values
are:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, examine what the actual response values are</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Unique trust responses:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Unique trust responses:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">$</span><span class="va">trust_1a</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA  "3" "1" "2"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nUnique fair responses:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Unique fair responses:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">gss_clean</span><span class="op">$</span><span class="va">fair_1a</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA  "1" "2" "3"</span></span></code></pre></div>
<p>Now create a mapping to standardize the labels:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create response mapping for cleaner labels</span></span>
<span><span class="va">response_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"can't trust"</span> <span class="op">=</span> <span class="st">"High Trust/Positive"</span>,</span>
<span>  <span class="st">"can't be too careful"</span> <span class="op">=</span> <span class="st">"Low Trust/Negative"</span>,</span>
<span>  <span class="st">"depends"</span> <span class="op">=</span> <span class="st">"Situational/Neutral"</span>,</span>
<span>  <span class="st">"would try to be fair"</span> <span class="op">=</span> <span class="st">"High Trust/Positive"</span>,</span>
<span>  <span class="st">"would take advantage of you"</span> <span class="op">=</span> <span class="st">"Low Trust/Negative"</span>,</span>
<span>  <span class="st">"try to be helpful"</span> <span class="op">=</span> <span class="st">"High Trust/Positive"</span>,</span>
<span>  <span class="st">"looking out for themselves"</span> <span class="op">=</span> <span class="st">"Low Trust/Negative"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define response order (from negative to positive)</span></span>
<span><span class="va">response_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low Trust/Negative"</span>, <span class="st">"Situational/Neutral"</span>, <span class="st">"High Trust/Positive"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create chart with custom mapping and ordering</span></span>
<span><span class="va">plot8</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="va">social_labels</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Trust Dimensions with Standardized Responses"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Responses mapped to consistent positive/negative categories"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Trust Dimension"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Trust Level"</span>,</span>
<span>  stack_map_values <span class="op">=</span> <span class="va">response_map</span>,</span>
<span>  stack_order <span class="op">=</span> <span class="va">response_order</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#d62728"</span>, <span class="st">"#ffbb78"</span>, <span class="st">"#2ca02c"</span><span class="op">)</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_label_stack <span class="op">=</span> <span class="st">"No Answer"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot8</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-5b1b2f4ad92281566982" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-5b1b2f4ad92281566982">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Trust Dimensions with Standardized Responses"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"Low Trust/Negative","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"Low Trust/Negative","n":1244,"y":1244,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"Low Trust/Negative","n":1028,"y":1028,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"Low Trust/Negative","n":892,"y":892,"name":"Helpfulness of Others"}],"type":"column"},{"name":"Situational/Neutral","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"Situational/Neutral","n":79,"y":79,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"Situational/Neutral","n":114,"y":114,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"Situational/Neutral","n":137,"y":137,"name":"Helpfulness of Others"}],"type":"column"},{"name":"High Trust/Positive","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"High Trust/Positive","n":623,"y":623,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"High Trust/Positive","n":797,"y":797,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"High Trust/Positive","n":917,"y":917,"name":"Helpfulness of Others"}],"type":"column"},{"name":"No Answer","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"No Answer","n":921,"y":921,"name":"Interpersonal Trust"},{".x_var_col":"Fairness of Others",".stack_var_col":"No Answer","n":928,"y":928,"name":"Fairness of Others"},{".x_var_col":"Helpfulness of Others",".stack_var_col":"No Answer","n":921,"y":921,"name":"Helpfulness of Others"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Trust Dimension"},"categories":["Interpersonal Trust","Fairness of Others","Helpfulness of Others"]},"subtitle":{"text":"Responses mapped to consistent positive/negative categories"},"legend":{"title":{"text":"Trust Level"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#d62728","#ffbb78","#2ca02c"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-9-single-variable-with-x_vars-compact-display">Example 9: Single Variable with x_vars (Compact Display)<a class="anchor" aria-label="anchor" href="#example-9-single-variable-with-x_vars-compact-display"></a>
</h3>
<p>The <code>x_vars</code> parameter also works with a single variable.
This is useful when you want the compact styling of multi-variable mode
for a single question:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Single variable with x_vars - great for compact horizontal displays</span></span>
<span><span class="va">plot9a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="st">"happy_1a"</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="st">"General Happiness"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Happiness Distribution"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Well-being Measure"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Happiness Level"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  horizontal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2E8B57"</span>, <span class="st">"#FFD700"</span>, <span class="st">"#CD5C5C"</span>, <span class="st">"grey"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot9a</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-25c3e940e6859592f801" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-25c3e940e6859592f801">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Happiness Distribution"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"bar":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"very happy","data":[{".x_var_col":"",".stack_var_col":"very happy","n":806,"y":806,"name":""}],"type":"bar"},{"name":"pretty happy","data":[{".x_var_col":"",".stack_var_col":"pretty happy","n":1601,"y":1601,"name":""}],"type":"bar"},{"name":"not too happy","data":[{".x_var_col":"",".stack_var_col":"not too happy","n":452,"y":452,"name":""}],"type":"bar"}],"xAxis":{"type":"category","title":{"text":"Well-being Measure"},"categories":""},"legend":{"title":{"text":"Happiness Level"},"reversed":true},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#2E8B57","#FFD700","#CD5C5C","grey"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-9b-horizontal-multi-variable-chart">Example 9b: Horizontal Multi-Variable Chart<a class="anchor" aria-label="anchor" href="#example-9b-horizontal-multi-variable-chart"></a>
</h3>
<p>For better readability with long labels, use horizontal
orientation:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Horizontal chart for survey battery</span></span>
<span><span class="va">plot9b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trust_1a"</span>, <span class="st">"fair_1a"</span>, <span class="st">"helpful_1a"</span><span class="op">)</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Can people be trusted?"</span>,</span>
<span>    <span class="st">"Are people generally fair?"</span>,</span>
<span>    <span class="st">"Are people generally helpful?"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Capital Dimensions"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"GSS Panel 2016"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  horizontal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#8c510a"</span>, <span class="st">"#d8b365"</span>, <span class="st">"#f6e8c3"</span>, <span class="st">"grey"</span><span class="op">)</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_label_stack <span class="op">=</span> <span class="st">"No response"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot9b</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-3f27c09be0c60bb52829" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-3f27c09be0c60bb52829">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Capital Dimensions"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"bar":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Can people be trusted?",".stack_var_col":"can't trust","n":623,"y":623,"name":"Can people be trusted?"},{".x_var_col":"Are people generally fair?",".stack_var_col":"can't trust","n":797,"y":797,"name":"Are people generally fair?"},{".x_var_col":"Are people generally helpful?",".stack_var_col":"can't trust","n":917,"y":917,"name":"Are people generally helpful?"}],"type":"bar"},{"name":"can't be too careful","data":[{".x_var_col":"Can people be trusted?",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Can people be trusted?"},{".x_var_col":"Are people generally fair?",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Are people generally fair?"},{".x_var_col":"Are people generally helpful?",".stack_var_col":"can't be too careful","n":892,"y":892,"name":"Are people generally helpful?"}],"type":"bar"},{"name":"depends","data":[{".x_var_col":"Can people be trusted?",".stack_var_col":"depends","n":79,"y":79,"name":"Can people be trusted?"},{".x_var_col":"Are people generally fair?",".stack_var_col":"depends","n":114,"y":114,"name":"Are people generally fair?"},{".x_var_col":"Are people generally helpful?",".stack_var_col":"depends","n":137,"y":137,"name":"Are people generally helpful?"}],"type":"bar"},{"name":"No response","data":[{".x_var_col":"Can people be trusted?",".stack_var_col":"No response","n":921,"y":921,"name":"Can people be trusted?"},{".x_var_col":"Are people generally fair?",".stack_var_col":"No response","n":928,"y":928,"name":"Are people generally fair?"},{".x_var_col":"Are people generally helpful?",".stack_var_col":"No response","n":921,"y":921,"name":"Are people generally helpful?"}],"type":"bar"}],"xAxis":{"type":"category","title":{"text":"Variable"},"categories":["Can people be trusted?","Are people generally fair?","Are people generally helpful?"]},"subtitle":{"text":"GSS Panel 2016"},"legend":{"title":{"text":null},"reversed":true},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#8c510a","#d8b365","#f6e8c3","grey"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-10-survey-battery-analysis">Example 10: Survey Battery Analysis<a class="anchor" aria-label="anchor" href="#example-10-survey-battery-analysis"></a>
</h3>
<p>Survey batteries are sets of related questions with the same response
scale. Here‚Äôs how to create a comprehensive battery analysis:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a social trust battery</span></span>
<span><span class="va">trust_battery</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trust_1a"</span>, <span class="st">"fair_1a"</span>, <span class="st">"helpful_1a"</span><span class="op">)</span></span>
<span><span class="va">trust_battery_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Interpersonal Trust"</span>,</span>
<span>  <span class="st">"Perceived Fairness"</span>,</span>
<span>  <span class="st">"Perceived Helpfulness"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a comprehensive battery analysis</span></span>
<span><span class="va">plot10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">trust_battery</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="va">trust_battery_labels</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Trust Battery - Complete Analysis"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Comprehensive view of social trust dimensions with enhanced tooltips"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Trust Dimension"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response Category"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">"Percentage: "</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"% of respondents"</span>,</span>
<span>  show_var_tooltip <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_label_stack <span class="op">=</span> <span class="st">"No answer"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#8c510a"</span>, <span class="st">"#d8b365"</span>, <span class="st">"#f6e8c3"</span>, <span class="st">"darkgrey"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot10</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-416566eb193bf50d04e6" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-416566eb193bf50d04e6">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Trust Battery - Complete Analysis"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't trust","n":623,"y":623,"name":"Interpersonal Trust"},{".x_var_col":"Perceived Fairness",".stack_var_col":"can't trust","n":797,"y":797,"name":"Perceived Fairness"},{".x_var_col":"Perceived Helpfulness",".stack_var_col":"can't trust","n":917,"y":917,"name":"Perceived Helpfulness"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Interpersonal Trust"},{".x_var_col":"Perceived Fairness",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Perceived Fairness"},{".x_var_col":"Perceived Helpfulness",".stack_var_col":"can't be too careful","n":892,"y":892,"name":"Perceived Helpfulness"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"depends","n":79,"y":79,"name":"Interpersonal Trust"},{".x_var_col":"Perceived Fairness",".stack_var_col":"depends","n":114,"y":114,"name":"Perceived Fairness"},{".x_var_col":"Perceived Helpfulness",".stack_var_col":"depends","n":137,"y":137,"name":"Perceived Helpfulness"}],"type":"column"},{"name":"No answer","data":[{".x_var_col":"Interpersonal Trust",".stack_var_col":"No answer","n":921,"y":921,"name":"Interpersonal Trust"},{".x_var_col":"Perceived Fairness",".stack_var_col":"No answer","n":928,"y":928,"name":"Perceived Fairness"},{".x_var_col":"Perceived Helpfulness",".stack_var_col":"No answer","n":921,"y":921,"name":"Perceived Helpfulness"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Trust Dimension"},"categories":["Interpersonal Trust","Perceived Fairness","Perceived Helpfulness"]},"subtitle":{"text":"Comprehensive view of social trust dimensions with enhanced tooltips"},"legend":{"title":{"text":"Response Category"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#8c510a","#d8b365","#f6e8c3","darkgrey"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="example-11-publication-ready-chart">Example 11: Publication-Ready Chart<a class="anchor" aria-label="anchor" href="#example-11-publication-ready-chart"></a>
</h3>
<p>Let‚Äôs create a fully customized, publication-ready chart:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create the most polished example</span></span>
<span><span class="va">plot11</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="va">social_questions</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Interpersonal Trust\n('Can most people be trusted?')"</span>,</span>
<span>    <span class="st">"Perceived Fairness\n('Do people try to be fair?')"</span>,</span>
<span>    <span class="st">"Perceived Helpfulness\n('Are people helpful?')"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Capital Dimensions in American Society"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"General Social Survey Panel 2016 (N = 2,867 respondents)\nPercentage distribution of responses across social trust measures"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Social Trust Dimension"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response Category"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"% of respondents"</span>,</span>
<span>  x_tooltip_suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  include_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_label_stack <span class="op">=</span> <span class="st">"No response"</span>,</span>
<span>  color_palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#b2182b"</span>, <span class="st">"#ef8a62"</span>, <span class="st">"#fddbc7"</span>, <span class="st">"darkgrey"</span><span class="op">)</span>,</span>
<span>  show_var_tooltip <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot11</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-72cbf064100ce560a04c" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-72cbf064100ce560a04c">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Capital Dimensions in American Society"},"yAxis":{"title":{"text":"Percentage"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Interpersonal Trust\n('Can most people be trusted?')",".stack_var_col":"can't trust","n":623,"y":623,"name":"Interpersonal Trust\n('Can most people be trusted?')"},{".x_var_col":"Perceived Fairness\n('Do people try to be fair?')",".stack_var_col":"can't trust","n":797,"y":797,"name":"Perceived Fairness\n('Do people try to be fair?')"},{".x_var_col":"Perceived Helpfulness\n('Are people helpful?')",".stack_var_col":"can't trust","n":917,"y":917,"name":"Perceived Helpfulness\n('Are people helpful?')"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"Interpersonal Trust\n('Can most people be trusted?')",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Interpersonal Trust\n('Can most people be trusted?')"},{".x_var_col":"Perceived Fairness\n('Do people try to be fair?')",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Perceived Fairness\n('Do people try to be fair?')"},{".x_var_col":"Perceived Helpfulness\n('Are people helpful?')",".stack_var_col":"can't be too careful","n":892,"y":892,"name":"Perceived Helpfulness\n('Are people helpful?')"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Interpersonal Trust\n('Can most people be trusted?')",".stack_var_col":"depends","n":79,"y":79,"name":"Interpersonal Trust\n('Can most people be trusted?')"},{".x_var_col":"Perceived Fairness\n('Do people try to be fair?')",".stack_var_col":"depends","n":114,"y":114,"name":"Perceived Fairness\n('Do people try to be fair?')"},{".x_var_col":"Perceived Helpfulness\n('Are people helpful?')",".stack_var_col":"depends","n":137,"y":137,"name":"Perceived Helpfulness\n('Are people helpful?')"}],"type":"column"},{"name":"No response","data":[{".x_var_col":"Interpersonal Trust\n('Can most people be trusted?')",".stack_var_col":"No response","n":921,"y":921,"name":"Interpersonal Trust\n('Can most people be trusted?')"},{".x_var_col":"Perceived Fairness\n('Do people try to be fair?')",".stack_var_col":"No response","n":928,"y":928,"name":"Perceived Fairness\n('Do people try to be fair?')"},{".x_var_col":"Perceived Helpfulness\n('Are people helpful?')",".stack_var_col":"No response","n":921,"y":921,"name":"Perceived Helpfulness\n('Are people helpful?')"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Social Trust Dimension"},"categories":["Interpersonal Trust\n('Can most people be trusted?')","Perceived Fairness\n('Do people try to be fair?')","Perceived Helpfulness\n('Are people helpful?')"]},"subtitle":{"text":"General Social Survey Panel 2016 (N = 2,867 respondents)\nPercentage distribution of responses across social trust measures"},"legend":{"title":{"text":"Response Category"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "},"colors":["#b2182b","#ef8a62","#fddbc7","darkgrey"]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="labels-and-tooltips-reference">üè∑Ô∏è Labels and Tooltips Reference<a class="anchor" aria-label="anchor" href="#labels-and-tooltips-reference"></a>
</h2>
<div class="section level3">
<h3 id="summary-of-label-and-tooltip-options">Summary of Label and Tooltip Options<a class="anchor" aria-label="anchor" href="#summary-of-label-and-tooltip-options"></a>
</h3>
<p>The <code><a href="../reference/viz_stackedbar.html">viz_stackedbar()</a></code> function offers extensive
customization for labels and tooltips:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="39%">
<col width="27%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>x_label</code></td>
<td>X-axis title</td>
<td><code>"Question"</code></td>
</tr>
<tr class="even">
<td><code>y_label</code></td>
<td>Y-axis title (auto-set based on stacked_type)</td>
<td><code>"Percentage"</code></td>
</tr>
<tr class="odd">
<td><code>stack_label</code></td>
<td>Legend title</td>
<td><code>"Response Category"</code></td>
</tr>
<tr class="even">
<td><code>x_var_labels</code></td>
<td>Custom labels for each question (multi-variable mode)</td>
<td><code>c("Trust", "Fairness")</code></td>
</tr>
<tr class="odd">
<td><code>tooltip_prefix</code></td>
<td>Text before value in tooltip</td>
<td><code>"Score: "</code></td>
</tr>
<tr class="even">
<td><code>tooltip_suffix</code></td>
<td>Text after value in tooltip</td>
<td>
<code>"%"</code>, <code>" respondents"</code>
</td>
</tr>
<tr class="odd">
<td><code>x_tooltip_suffix</code></td>
<td>Text after category name in tooltip</td>
<td><code>" question"</code></td>
</tr>
<tr class="even">
<td><code>show_var_tooltip</code></td>
<td>Show question name in tooltip (multi-variable mode)</td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example with all label/tooltip options</span></span>
<span><span class="fu"><a href="../reference/viz_stackedbar.html">viz_stackedbar</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gss_clean</span>,</span>
<span>  x_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trust_1a"</span>, <span class="st">"fair_1a"</span><span class="op">)</span>,</span>
<span>  x_var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Trust"</span>, <span class="st">"Fairness"</span><span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Social Attitudes"</span>,</span>
<span>  x_label <span class="op">=</span> <span class="st">"Attitude Measure"</span>,</span>
<span>  y_label <span class="op">=</span> <span class="st">"Percent of Respondents"</span>,</span>
<span>  stack_label <span class="op">=</span> <span class="st">"Response Level"</span>,</span>
<span>  stacked_type <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  tooltip_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  tooltip_suffix <span class="op">=</span> <span class="st">"% responded"</span>,</span>
<span>  show_var_tooltip <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="highchart html-widget html-fill-item" id="htmlwidget-d11fc4360aa0230696d7" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-d11fc4360aa0230696d7">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Social Attitudes"},"yAxis":{"title":{"text":"Percent of Respondents"},"type":"linear"},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"column":{"stacking":"percent","dataLabels":{"enabled":true,"format":"{point.percentage:.1f}%","style":{"textOutline":"none","fontSize":"10px"}}}},"series":[{"name":"can't trust","data":[{".x_var_col":"Trust",".stack_var_col":"can't trust","n":623,"y":623,"name":"Trust"},{".x_var_col":"Fairness",".stack_var_col":"can't trust","n":797,"y":797,"name":"Fairness"}],"type":"column"},{"name":"can't be too careful","data":[{".x_var_col":"Trust",".stack_var_col":"can't be too careful","n":1244,"y":1244,"name":"Trust"},{".x_var_col":"Fairness",".stack_var_col":"can't be too careful","n":1028,"y":1028,"name":"Fairness"}],"type":"column"},{"name":"depends","data":[{".x_var_col":"Trust",".stack_var_col":"depends","n":79,"y":79,"name":"Trust"},{".x_var_col":"Fairness",".stack_var_col":"depends","n":114,"y":114,"name":"Fairness"}],"type":"column"}],"xAxis":{"type":"category","title":{"text":"Attitude Measure"},"categories":["Trust","Fairness"]},"legend":{"title":{"text":"Response Level"}},"tooltip":{"useHTML":true,"formatter":"\n          function() {\n            // pull the variable label from the axis categories array\n            var v = this.series.chart.xAxis[0].categories[this.point.x];\n            // If category is empty/undefined (single variable case), use chart title instead\n            if (!v || v === '') {\n              v = this.series.chart.title ? this.series.chart.title.textStr : '';\n            }\n            // the response (series name)\n            var r = this.series.name;\n            // format as percentage if percent-stacked, else point.y\n            var val = (this.point.percentage !== undefined)\n                    ? Highcharts.numberFormat(this.point.percentage,1) + '%'\n                    : this.point.y;\n            return '<b>' + v + '<\/b><br/>' +\n                   r + ': <b>' + val + '<\/b>';\n          }\n        "}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"‚óÅ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="when-to-use-each-mode">When to Use Each Mode<a class="anchor" aria-label="anchor" href="#when-to-use-each-mode"></a>
</h3>
<table class="table">
<colgroup>
<col width="21%">
<col width="35%">
<col width="42%">
</colgroup>
<thead><tr class="header">
<th>Mode</th>
<th>Use Case</th>
<th>Parameters</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Grouped/Crosstab</strong></td>
<td>One variable broken down by another</td>
<td>
<code>x_var</code> + <code>stack_var</code>
</td>
</tr>
<tr class="even">
<td><strong>Multi-Variable</strong></td>
<td>Compare multiple questions side-by-side</td>
<td><code>x_vars</code></td>
</tr>
</tbody>
</table>
<p><strong>Use Grouped Mode when:</strong> - You want to show how
education levels differ by gender - You‚Äôre creating a cross-tabulation
visualization - Your data is already in long/tidy format</p>
<p><strong>Use Multi-Variable Mode when:</strong> - You‚Äôre comparing
multiple survey questions - Your questions share the same response
categories - You want to visualize a Likert scale battery</p>
</div>
</div>
<div class="section level2">
<h2 id="summary-and-best-practices">üí° Summary and Best Practices<a class="anchor" aria-label="anchor" href="#summary-and-best-practices"></a>
</h2>
<div class="section level3">
<h3 id="key-features-demonstrated">‚úÖ Key Features Demonstrated<a class="anchor" aria-label="anchor" href="#key-features-demonstrated"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Two flexible modes</strong>: Grouped/crosstab
(<code>x_var</code> + <code>stack_var</code>) and multi-variable
(<code>x_vars</code>)</li>
<li>
<strong>Basic stacked bars</strong> with both count and percentage
displays</li>
<li>
<strong>Age binning</strong> for continuous variables</li>
<li>
<strong>Value mapping</strong> for cleaner, more descriptive
labels</li>
<li>
<strong>Custom ordering</strong> for logical presentation of
categories</li>
<li>
<strong>Missing value handling</strong> with explicit NA
categories</li>
<li>
<strong>Multi-variable comparisons</strong> for survey batteries and
Likert scales</li>
<li>
<strong>Custom color palettes</strong> for different data types and
branding</li>
<li>
<strong>Comprehensive tooltips</strong> with prefixes, suffixes, and
formatting</li>
<li>
<strong>Horizontal orientation</strong> for better readability with
long labels</li>
</ol>
</div>
<div class="section level3">
<h3 id="best-practices-for-stacked-bar-charts">üéØ Best Practices for Stacked Bar Charts<a class="anchor" aria-label="anchor" href="#best-practices-for-stacked-bar-charts"></a>
</h3>
<div class="section level4">
<h4 id="general-guidelines">General Guidelines<a class="anchor" aria-label="anchor" href="#general-guidelines"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Choose appropriate stacking type</li>
</ol>
<ul>
<li>Use ‚Äúnormal‚Äù or ‚Äúcounts‚Äù for comparing absolute counts across
groups</li>
<li>Use ‚Äúpercent‚Äù for comparing proportions within groups</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Order categories logically</li>
</ol>
<ul>
<li>When remapping values, remember to use the variable names as in the
DataFrame</li>
<li>Use natural ordering for ordinal variables (e.g., Likert
scales)</li>
<li>Consider frequency-based ordering for nominal categories</li>
<li>Place ‚ÄúOther‚Äù or ‚ÄúMissing‚Äù categories at the end</li>
</ul>
</div>
<div class="section level4">
<h4 id="multi-variable-mode-best-practices">Multi-Variable Mode Best Practices<a class="anchor" aria-label="anchor" href="#multi-variable-mode-best-practices"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Choose questions with similar response scales</li>
</ol>
<ul>
<li>Use questions that have the same or compatible response
categories</li>
<li>Consider mapping different scales to common categories when
appropriate</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Order questions logically</li>
</ol>
<ul>
<li>Group related concepts together</li>
<li>Consider ordering by typical response patterns (most positive to
least positive)</li>
<li>Place most important questions first</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Use appropriate stacking type</li>
</ol>
<ul>
<li>Use ‚Äúpercent‚Äù for comparing response patterns across questions</li>
<li>Use ‚Äúcounts‚Äù when absolute counts matter more than proportions</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Handle missing data thoughtfully</li>
</ol>
<ul>
<li>Decide whether to include or exclude missing categories</li>
<li>Use include_na = TRUE when missing patterns are meaningful</li>
<li>Provide clear labels for missing categories</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Use appropriate colors</li>
</ol>
<ul>
<li>Use diverging palettes for scales with meaningful center points</li>
<li>Use qualitative palettes for nominal categories</li>
<li>Ensure sufficient contrast between adjacent categories</li>
<li>Consider colorblind accessibility</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>Customize tooltips for clarity</li>
</ol>
<ul>
<li>Include units and context in tooltips</li>
<li>Use prefixes/suffixes to clarify meaning</li>
<li>Format numbers appropriately for your audience</li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>Consider your audience</li>
</ol>
<ul>
<li>Use descriptive labels rather than codes</li>
<li>Provide clear titles and subtitles</li>
<li>Include sample sizes in subtitles when relevant</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="common-use-cases">üåç Common Use Cases<a class="anchor" aria-label="anchor" href="#common-use-cases"></a>
</h3>
<p>The <code>viz_stackedbar</code> function is particularly useful
for:</p>
<ul>
<li>
<strong>Survey response analysis</strong>: Displaying Likert scale
responses across demographics</li>
<li>
<strong>Demographic breakdowns</strong>: Showing composition of
groups by various characteristics<br>
</li>
<li>
<strong>Attitude research</strong>: Comparing opinions across
different populations</li>
<li>
<strong>Market research</strong>: Analyzing customer segments and
preferences</li>
<li>
<strong>Educational research</strong>: Examining outcomes across
different groups</li>
<li>
<strong>Health surveys</strong>: Displaying health behaviors or
outcomes by demographics</li>
</ul>
</div>
<div class="section level3">
<h3 id="conclusion">üìö Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>The <code><a href="../reference/viz_stackedbar.html">viz_stackedbar()</a></code> function provides a unified,
comprehensive solution for creating publication-ready stacked bar charts
from survey data. Its two flexible modes handle the most common
visualization needs:</p>
<ul>
<li>
<strong>Grouped/Crosstab Mode</strong> (<code>x_var</code> +
<code>stack_var</code>): Show how one variable breaks down by
another</li>
<li>
<strong>Multi-Variable Mode</strong> (<code>x_vars</code>): Compare
response distributions across multiple survey questions</li>
</ul>
<p>Key advantages include:</p>
<ul>
<li>
<strong>Unified interface</strong> - one function for both crosstabs
and survey batteries</li>
<li>
<strong>Automatic data preparation</strong> for common survey data
formats</li>
<li>
<strong>Smart mode detection</strong> based on the parameters you
provide</li>
<li>
<strong>Flexible binning and mapping</strong> for continuous and
coded variables</li>
<li>
<strong>Comprehensive missing data handling</strong> options</li>
<li>
<strong>Interactive tooltips</strong> for enhanced data
exploration</li>
<li>
<strong>Publication-ready styling</strong> with extensive
customization options</li>
</ul>
<p><strong>Note:</strong> If you were previously using
<code><a href="../reference/viz_stackedbars.html">viz_stackedbars()</a></code> for multi-variable comparisons, you can
now use <code><a href="../reference/viz_stackedbar.html">viz_stackedbar()</a></code> with the same parameters. The old
function still works but <code><a href="../reference/viz_stackedbar.html">viz_stackedbar()</a></code> is now the
recommended approach for all stacked bar chart needs.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fabio Votta, Alexandra Pafford, Max Paulus, Ernesto de Le√≥n.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
