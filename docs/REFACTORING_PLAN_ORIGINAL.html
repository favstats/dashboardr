<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Refactoring Plan for create_dashboard_new.R ‚Ä¢ dashboardr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png"><link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" sizes="any" href="favicon.ico"><link rel="manifest" href="site.webmanifest"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Inter-0.4.9/font.css" rel="stylesheet"><link href="deps/Fira_Code-0.4.9/font.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Refactoring Plan for create_dashboard_new.R"><meta property="og:image" content="https://favstats.github.io/dashboardr/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">dashboardr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/getting-started.html">Getting Started with dashboardr</a></li>
    <li><a class="dropdown-item" href="articles/advanced-features.html">Advanced Features in dashboardr</a></li>
    <li><a class="dropdown-item" href="articles/bar_vignette.html">Creating Bar Charts with create_bar()</a></li>
    <li><a class="dropdown-item" href="articles/timeline_vignette.html">Getting Started With `create_timeline()`</a></li>
    <li><a class="dropdown-item" href="articles/stackedbar_vignette.html">Creating Interactive Stacked Bar Charts with `create_stackedbar`</a></li>
    <li><a class="dropdown-item" href="articles/stackedbars_vignette.html">Getting Started With `create_stackedbars()`</a></li>
    <li><a class="dropdown-item" href="articles/heatmap_vignette.html">Creating Interactive Heatmaps with `create_heatmap`</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.svg" class="logo" alt=""><h1>Refactoring Plan for create_dashboard_new.R</h1>

    </div>

<div id="refactoring-plan-for-create_dashboard_newr" class="section level1">

<div class="section level2">
<h2 id="current-state">Current State<a class="anchor" aria-label="anchor" href="#current-state"></a></h2>
<ul><li>
<strong>Total lines:</strong> 6,080</li>
<li>
<strong>Total functions:</strong> 67</li>
<li>
<strong>Status:</strong> Massive monolithic file, hard to navigate and maintain</li>
</ul></div>
<div class="section level2">
<h2 id="goals">Goals<a class="anchor" aria-label="anchor" href="#goals"></a></h2>
<ol style="list-style-type: decimal"><li>Split into logical, manageable files (300-800 lines each)</li>
<li>Remove unused ‚ÄúAI slop‚Äù code</li>
<li>Maintain all functionality</li>
<li>Improve code organization and discoverability</li>
</ol><hr></div>
<div class="section level2">
<h2 id="clipboard-proposed-file-structure">üìã Proposed File Structure<a class="anchor" aria-label="anchor" href="#clipboard-proposed-file-structure"></a></h2>
<div class="section level3">
<h3 id="id_1-rutils_corer-150-lines">
<strong>1. R/utils_core.R</strong> (~150 lines)<a class="anchor" aria-label="anchor" href="#id_1-rutils_corer-150-lines"></a></h3>
<p><strong>Purpose:</strong> Core utility functions used throughout the package</p>
<p><strong>Functions:</strong> - <code>.pkg_root()</code> - Find package root - <code>.is_subpath()</code> - Check if path is subpath - <code>.resolve_output_dir()</code> - Resolve output directory - <code>.suggest_alternative()</code> - Suggest alternatives for typos - <code>.stop_with_hint()</code> - Error with helpful hint - <code>.stop_with_suggestion()</code> - Error with suggestion - <code><a href="reference/dot-serialize_arg.html">.serialize_arg()</a></code> - Serialize R arguments to strings</p>
<p><strong>Keep?</strong> ‚úÖ All actively used</p>
<hr></div>
<div class="section level3">
<h3 id="id_2-rutils_incrementalr-100-lines">
<strong>2. R/utils_incremental.R</strong> (~100 lines)<a class="anchor" aria-label="anchor" href="#id_2-rutils_incrementalr-100-lines"></a></h3>
<p><strong>Purpose:</strong> Incremental build system (hashing, manifest)</p>
<p><strong>Functions:</strong> - <code>.compute_hash()</code> - Compute MD5 hash - <code>.save_manifest()</code> - Save build manifest - <code>.load_manifest()</code> - Load build manifest - <code>.needs_rebuild()</code> - Check if page needs rebuild</p>
<p><strong>Keep?</strong> ‚úÖ All actively used</p>
<p><strong>Remove:</strong> - ‚ùå <code>.copy_template()</code> - UNUSED (only 1 reference = definition)</p>
<hr></div>
<div class="section level3">
<h3 id="id_3-rviz_collectionr-700-lines">
<strong>3. R/viz_collection.R</strong> (~700 lines)<a class="anchor" aria-label="anchor" href="#id_3-rviz_collectionr-700-lines"></a></h3>
<p><strong>Purpose:</strong> Visualization collection management</p>
<p><strong>Functions:</strong> - <code><a href="reference/create_viz.html">create_viz()</a></code> - Create viz collection - <code><a href="reference/combine_viz.html">combine_viz()</a></code> - Combine collections - <code><a href="reference/add_viz.html">add_viz()</a></code> - Add visualization - <code><a href="reference/add_vizzes.html">add_vizzes()</a></code> - Add multiple visualizations - <code><a href="reference/set_tabgroup_labels.html">set_tabgroup_labels()</a></code> - Set custom labels - <code><a href="reference/spec_viz.html">spec_viz()</a></code> - Create viz spec - <code>.parse_tabgroup()</code> - Parse tabgroup paths - <code>.sort_viz_by_tabgroup_hierarchy()</code> - Sort by hierarchy - <code><a href="reference/print.viz_collection.html">print.viz_collection()</a></code> - S3 print method</p>
<p><strong>Keep?</strong> ‚úÖ All core functionality</p>
<p><strong>Remove:</strong> - ‚ùå <code>.build_hierarchy_key()</code> - UNUSED (only 1 reference)</p>
<hr></div>
<div class="section level3">
<h3 id="id_4-rviz_processingr-800-lines">
<strong>4. R/viz_processing.R</strong> (~800 lines)<a class="anchor" aria-label="anchor" href="#id_4-rviz_processingr-800-lines"></a></h3>
<p><strong>Purpose:</strong> Process and organize visualizations into hierarchy</p>
<p><strong>Functions:</strong> - <code><a href="reference/dot-process_visualizations.html">.process_visualizations()</a></code> - Main processing logic - <code>.insert_into_hierarchy()</code> - Build hierarchy tree - <code>.tree_to_viz_list()</code> - Flatten tree to list - <code>.reorganize_nested_tabs_by_filter()</code> - Handle filtered nested tabs - <code>.merge_filtered_trees()</code> - Merge filter-based trees - <code>.get_filter_signature()</code> - Get filter signature - <code>.collect_unique_filters()</code> - Collect unique filters</p>
<p><strong>Keep?</strong> ‚úÖ All core hierarchy logic</p>
<p><strong>Remove:</strong> - ‚ùå <code>.get_filter_dataset_name()</code> - UNUSED (only 1 reference)</p>
<hr></div>
<div class="section level3">
<h3 id="id_5-rviz_generationr-900-lines">
<strong>5. R/viz_generation.R</strong> (~900 lines)<a class="anchor" aria-label="anchor" href="#id_5-rviz_generationr-900-lines"></a></h3>
<p><strong>Purpose:</strong> Generate QMD code for visualizations</p>
<p><strong>Functions:</strong> - <code>.generate_viz_from_specs()</code> - Generate viz QMD - <code>.generate_single_viz()</code> - Single viz chunk - <code><a href="reference/dot-generate_typed_viz.html">.generate_typed_viz()</a></code> - Type-specific viz - <code>.generate_function_viz()</code> - Function-based viz - <code>.generate_auto_viz()</code> - Auto viz - <code>.generate_tabgroup_viz()</code> - Tabgroup QMD - <code>.generate_tabgroup_viz_content()</code> - Tabgroup content - <code><a href="reference/dot-generate_chunk_label.html">.generate_chunk_label()</a></code> - Generate R chunk labels</p>
<p><strong>Keep?</strong> ‚úÖ All core generation logic</p>
<hr></div>
<div class="section level3">
<h3 id="id_6-rdashboard_projectr-500-lines">
<strong>6. R/dashboard_project.R</strong> (~500 lines)<a class="anchor" aria-label="anchor" href="#id_6-rdashboard_projectr-500-lines"></a></h3>
<p><strong>Purpose:</strong> Dashboard project creation and management</p>
<p><strong>Functions:</strong> - <code><a href="reference/create_dashboard.html">create_dashboard()</a></code> - Create dashboard project - <code><a href="reference/add_dashboard_page.html">add_dashboard_page()</a></code> - Add page to project - <code><a href="reference/print.dashboard_project.html">print.dashboard_project()</a></code> - S3 print method</p>
<p><strong>Keep?</strong> ‚úÖ Core project management</p>
<hr></div>
<div class="section level3">
<h3 id="id_7-rpage_generationr-600-lines">
<strong>7. R/page_generation.R</strong> (~600 lines)<a class="anchor" aria-label="anchor" href="#id_7-rpage_generationr-600-lines"></a></h3>
<p><strong>Purpose:</strong> Generate page content (QMD files)</p>
<p><strong>Functions:</strong> - <code>.generate_default_page_content()</code> - Default page QMD - <code><a href="reference/dot-generate_global_setup_chunk.html">.generate_global_setup_chunk()</a></code> - Setup chunk - <code><a href="reference/dot-process_template.html">.process_template()</a></code> - Process template files - <code>.substitute_template_vars()</code> - Substitute variables - <code>.process_viz_specs()</code> - Process viz specs in template</p>
<p><strong>Keep?</strong> ‚úÖ All page generation logic</p>
<hr></div>
<div class="section level3">
<h3 id="id_8-rquarto_ymlr-700-lines">
<strong>8. R/quarto_yml.R</strong> (~700 lines)<a class="anchor" aria-label="anchor" href="#id_8-rquarto_ymlr-700-lines"></a></h3>
<p><strong>Purpose:</strong> Generate _quarto.yml configuration</p>
<p><strong>Functions:</strong> - <code><a href="reference/dot-generate_quarto_yml.html">.generate_quarto_yml()</a></code> - Main YAML generation - <code>.generate_loading_overlay_chunk()</code> - Loading overlay - <code>.generate_tabset_color_scss()</code> - Tabset colors - <code><a href="reference/dot-check_for_icons.html">.check_for_icons()</a></code> - Check for icons - <code><a href="reference/dot-install_iconify_extension.html">.install_iconify_extension()</a></code> - Install iconify</p>
<p><strong>Keep?</strong> ‚úÖ All Quarto configuration logic</p>
<hr></div>
<div class="section level3">
<h3 id="id_9-rui_componentsr-300-lines">
<strong>9. R/ui_components.R</strong> (~300 lines)<a class="anchor" aria-label="anchor" href="#id_9-rui_componentsr-300-lines"></a></h3>
<p><strong>Purpose:</strong> UI helper components</p>
<p><strong>Functions:</strong> - <code><a href="reference/icon.html">icon()</a></code> - Icon helper - <code><a href="reference/card.html">card()</a></code> - Card component - <code><a href="reference/card_row.html">card_row()</a></code> - Card row layout - <code><a href="reference/md_text.html">md_text()</a></code> - Markdown text - <code><a href="reference/text_lines.html">text_lines()</a></code> - Text lines helper</p>
<p><strong>Keep?</strong> ‚úÖ All UI components</p>
<hr></div>
<div class="section level3">
<h3 id="id_10-rnavigationr-200-lines">
<strong>10. R/navigation.R</strong> (~200 lines)<a class="anchor" aria-label="anchor" href="#id_10-rnavigationr-200-lines"></a></h3>
<p><strong>Purpose:</strong> Navigation components</p>
<p><strong>Functions:</strong> - <code><a href="reference/sidebar_group.html">sidebar_group()</a></code> - Sidebar group - <code><a href="reference/navbar_section.html">navbar_section()</a></code> - Navbar section - <code><a href="reference/navbar_menu.html">navbar_menu()</a></code> - Navbar menu</p>
<p><strong>Keep?</strong> ‚úÖ All navigation components</p>
<hr></div>
<div class="section level3">
<h3 id="id_11-rdashboard_generationr-800-lines">
<strong>11. R/dashboard_generation.R</strong> (~800 lines)<a class="anchor" aria-label="anchor" href="#id_11-rdashboard_generationr-800-lines"></a></h3>
<p><strong>Purpose:</strong> Main dashboard generation and rendering</p>
<p><strong>Functions:</strong> - <code><a href="reference/generate_dashboard.html">generate_dashboard()</a></code> - Main generation function - <code>.render_dashboard()</code> - Quarto rendering - <code><a href="reference/dot-show_dashboard_summary.html">.show_dashboard_summary()</a></code> - Show summary</p>
<p><strong>Keep?</strong> ‚úÖ Core generation logic</p>
<hr></div>
<div class="section level3">
<h3 id="id_12-rprogress_displayr-150-lines">
<strong>12. R/progress_display.R</strong> (~150 lines)<a class="anchor" aria-label="anchor" href="#id_12-rprogress_displayr-150-lines"></a></h3>
<p><strong>Purpose:</strong> Progress display utilities</p>
<p><strong>Functions:</strong> - <code><a href="reference/dot-progress_msg.html">.progress_msg()</a></code> - Progress message - <code><a href="reference/dot-progress_step.html">.progress_step()</a></code> - Progress step - <code><a href="reference/dot-progress_header.html">.progress_header()</a></code> - Progress header - <code><a href="reference/dot-progress_section.html">.progress_section()</a></code> - Progress section - <code><a href="reference/dot-progress_bar.html">.progress_bar()</a></code> - Progress bar (currently unused but may be useful)</p>
<p><strong>Keep?</strong> ‚úÖ All progress functions (even <code>.progress_bar</code> for future use)</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="wastebasket-functions-to-remove-dead-code">üóëÔ∏è Functions to Remove (Dead Code)<a class="anchor" aria-label="anchor" href="#wastebasket-functions-to-remove-dead-code"></a></h2>
<ol style="list-style-type: decimal"><li>
<strong><code>.copy_template()</code></strong> (line ~165) - Never actually called</li>
<li>
<strong><code>.build_hierarchy_key()</code></strong> (line ~2040) - Never actually called<br></li>
<li>
<strong><code>.get_filter_dataset_name()</code></strong> (line ~4575) - Never actually called</li>
</ol><p><strong>Impact:</strong> Removing ~200 lines of dead code</p>
<hr></div>
<div class="section level2">
<h2 id="bar_chart-summary">üìä Summary<a class="anchor" aria-label="anchor" href="#bar_chart-summary"></a></h2>
<table class="table"><thead><tr><th>File</th>
<th>Lines</th>
<th>Functions</th>
<th>Purpose</th>
</tr></thead><tbody><tr><td><code>utils_core.R</code></td>
<td>~150</td>
<td>7</td>
<td>Core utilities</td>
</tr><tr><td><code>utils_incremental.R</code></td>
<td>~80</td>
<td>4</td>
<td>Incremental builds</td>
</tr><tr><td><code>viz_collection.R</code></td>
<td>~650</td>
<td>9</td>
<td>Viz management</td>
</tr><tr><td><code>viz_processing.R</code></td>
<td>~700</td>
<td>7</td>
<td>Hierarchy processing</td>
</tr><tr><td><code>viz_generation.R</code></td>
<td>~900</td>
<td>8</td>
<td>QMD generation</td>
</tr><tr><td><code>dashboard_project.R</code></td>
<td>~500</td>
<td>3</td>
<td>Project management</td>
</tr><tr><td><code>page_generation.R</code></td>
<td>~600</td>
<td>5</td>
<td>Page QMD generation</td>
</tr><tr><td><code>quarto_yml.R</code></td>
<td>~700</td>
<td>5</td>
<td>Quarto config</td>
</tr><tr><td><code>ui_components.R</code></td>
<td>~300</td>
<td>5</td>
<td>UI helpers</td>
</tr><tr><td><code>navigation.R</code></td>
<td>~200</td>
<td>3</td>
<td>Navigation</td>
</tr><tr><td><code>dashboard_generation.R</code></td>
<td>~800</td>
<td>3</td>
<td>Main generation</td>
</tr><tr><td><code>progress_display.R</code></td>
<td>~150</td>
<td>5</td>
<td>Progress UI</td>
</tr><tr><td><strong>TOTAL</strong></td>
<td><strong>~5,730</strong></td>
<td><strong>64</strong></td>
<td><strong>(removed 3 dead functions)</strong></td>
</tr></tbody></table><hr></div>
<div class="section level2">
<h2 id="dart-benefits">üéØ Benefits<a class="anchor" aria-label="anchor" href="#dart-benefits"></a></h2>
<ol style="list-style-type: decimal"><li>
<strong>Easier navigation:</strong> Find functions by category</li>
<li>
<strong>Better maintenance:</strong> Smaller files are easier to modify</li>
<li>
<strong>Clearer architecture:</strong> Logical separation of concerns</li>
<li>
<strong>Faster loading:</strong> R loads smaller files faster</li>
<li>
<strong>Better testing:</strong> Can test modules independently</li>
<li>
<strong>Less clutter:</strong> Remove 350+ lines of dead code</li>
</ol><hr></div>
<div class="section level2">
<h2 id="warning-migration-strategy">‚ö†Ô∏è Migration Strategy<a class="anchor" aria-label="anchor" href="#warning-migration-strategy"></a></h2>
<div class="section level3">
<h3 id="phase-1-preparation">Phase 1: Preparation<a class="anchor" aria-label="anchor" href="#phase-1-preparation"></a></h3>
<ol style="list-style-type: decimal"><li>Run full test suite to establish baseline</li>
<li>Create new file structure</li>
<li>Keep <code>create_dashboard_new.R</code> as backup</li>
</ol></div>
<div class="section level3">
<h3 id="phase-2-split-files">Phase 2: Split Files<a class="anchor" aria-label="anchor" href="#phase-2-split-files"></a></h3>
<ol style="list-style-type: decimal"><li>Extract functions in dependency order (utils first)</li>
<li>Update <code>@keywords internal</code> documentation</li>
<li>Add file-level documentation headers</li>
<li>Ensure all functions are properly exported/internal</li>
</ol></div>
<div class="section level3">
<h3 id="phase-3-validation">Phase 3: Validation<a class="anchor" aria-label="anchor" href="#phase-3-validation"></a></h3>
<ol style="list-style-type: decimal"><li>Run full test suite</li>
<li>Test all demo scripts</li>
<li>Check package load time</li>
<li>Verify all examples work</li>
</ol></div>
<div class="section level3">
<h3 id="phase-4-cleanup">Phase 4: Cleanup<a class="anchor" aria-label="anchor" href="#phase-4-cleanup"></a></h3>
<ol style="list-style-type: decimal"><li>Delete <code>create_dashboard_new.R</code>
</li>
<li>Update NAMESPACE if needed</li>
<li>Run <code><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">devtools::document()</a></code>
</li>
<li>Final test suite run</li>
</ol><hr></div>
</div>
<div class="section level2">
<h2 id="rocket-next-steps">üöÄ Next Steps<a class="anchor" aria-label="anchor" href="#rocket-next-steps"></a></h2>
<p><strong>Option A: Do it all now</strong> (~2 hours of careful work) - Split all files in one go - Run comprehensive tests - High risk but fast</p>
<p><strong>Option B: Incremental approach</strong> (~30 min per file, safer) - Split one category at a time - Test after each split - Lower risk, more time</p>
<p><strong>Recommendation:</strong> Option B - Safer for critical infrastructure</p>
<p><strong>Order:</strong> 1. Start with utilities (least dependent) 2. Then UI components (standalone) 3. Then navigation (standalone) 4. Then viz collection (used by others) 5. Then processing/generation (complex) 6. Finally dashboard generation (depends on all)</p>
<hr></div>
<div class="section level2">
<h2 id="mag-additional-cleanup-opportunities">üîç Additional Cleanup Opportunities<a class="anchor" aria-label="anchor" href="#mag-additional-cleanup-opportunities"></a></h2>
<ol style="list-style-type: decimal"><li>
<strong>Comment blocks:</strong> Remove excessive comment dividers</li>
<li>
<strong>Debug code:</strong> Remove any leftover debug <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> calls</li>
<li>
<strong>Duplicate docs:</strong> Some <code>@param</code> duplicated across functions</li>
<li>
<strong>Magic numbers:</strong> Extract to constants</li>
<li>
<strong>Long functions:</strong> Some functions &gt;200 lines could be split further</li>
</ol><hr><p><strong>Ready to proceed?</strong> Let me know if you want to: - A) Go with this plan as-is - B) Adjust the file organization - C) Start with a specific category first - D) Do it all in one shot</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

