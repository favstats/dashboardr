% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dashboard.R
\name{by_age}
\alias{by_age}
\title{Generate Bar Chart of Means by Age Groups}
\usage{
by_age(
  data,
  var1,
  var2,
  thevarlabs,
  thelabel = "<- 1: never     -     7: very often ->"
)
}
\arguments{
\item{data}{A data frame containing the survey data. Must include an \code{age_groups} column.}

\item{var1}{The starting variable name (unquoted) for the range of variables to be analyzed.}

\item{var2}{The ending variable name (unquoted) for the range of variables to be analyzed.}

\item{thevarlabs}{A character vector of labels for the variables. The order should
correspond to \code{var1:var2}.}

\item{thelabel}{A character string for the y-axis label.
Defaults to "<- 1: never     -     7: very often ->".}
}
\value{
A \code{highchart} object representing the grouped bar chart.
}
\description{
This function creates a grouped bar chart showing the means of
specified variables, broken down by age groups. Error bars
representing standard errors are included.
}
\details{
The function performs these steps:
1. Creates a mapping between variable names and \code{thevarlabs}.
2. Selects \code{var1:var2} and the \code{age_groups} column, then removes NAs.
3. Calculates mean, standard error, and count for each variable, grouped by \code{age_groups}.
4. Joins the variable labels.
5. Orders the variables based on the global \code{theorder} (set by \code{generate_general} or similar).
6. Generates a grouped column chart using \code{highcharter}:
- Columns represent mean values for each age group within each variable.
- Error bars (mean +/- SE) are linked to their respective columns.
- Y-axis is scaled from 1 to 7.
- A legend for age groups is displayed.
- A caption with N and error bar information is included.
}
\examples{
# Assuming 'survey_data' includes 'q1'-'q5', 'age_groups',
# and 'var_labels' corresponds to 'q1'-'q5'.
# `theorder` should exist from a previous call to `generate_general`.
# by_age(survey_data, q1, q5, var_labels)

Dependencies: dplyr, tidyr, highcharter, forcats
              (Note: `std.error` function needs to be defined;
              `theorder` global variable should exist)
}
