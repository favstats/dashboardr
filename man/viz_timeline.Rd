% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/viz_timeline.R
\name{viz_timeline}
\alias{viz_timeline}
\title{Create a Timeline Chart}
\usage{
viz_timeline(
  data,
  time_var,
  y_var,
  group_var = NULL,
  chart_type = "stacked_area",
  title = NULL,
  subtitle = NULL,
  x_label = NULL,
  y_label = NULL,
  y_max = NULL,
  y_min = NULL,
  color_palette = NULL,
  y_levels = NULL,
  y_breaks = NULL,
  y_bin_labels = NULL,
  y_map_values = NULL,
  y_filter = NULL,
  y_filter_combine = TRUE,
  y_filter_label = NULL,
  time_breaks = NULL,
  time_bin_labels = NULL,
  weight_var = NULL,
  include_na = FALSE,
  na_label_y = "(Missing)",
  na_label_group = "(Missing)",
  tooltip = NULL,
  tooltip_prefix = "",
  tooltip_suffix = ""
)
}
\arguments{
\item{data}{A data frame containing survey data with time and response variables.}

\item{time_var}{Character string. Name of the time variable (e.g., "year", "wave").}

\item{y_var}{Character string. Name of the response variable containing Likert responses.}

\item{group_var}{Optional character string. Name of grouping variable for separate series
(e.g., "gender", "education"). Creates separate lines/areas for each group.}

\item{chart_type}{Character string. Type of chart: "stacked_area" or "line".}

\item{title}{Optional main title for the chart.}

\item{subtitle}{Optional subtitle for the chart.}

\item{x_label}{Optional character string. Label for the x-axis. Defaults to time_var name.}

\item{y_label}{Optional character string. Label for the y-axis. Defaults to "Percentage".}

\item{y_max}{Optional numeric value. Maximum value for the Y-axis.}

\item{y_min}{Optional numeric value. Minimum value for the Y-axis.}

\item{color_palette}{Optional character vector of color hex codes for the series.}

\item{y_levels}{Optional character vector specifying order of response categories.}

\item{y_breaks}{Optional numeric vector for binning numeric response values
(e.g., \code{c(0, 2.5, 5, 7)} to create bins 0-2.5, 2.5-5, 5-7).}

\item{y_bin_labels}{Optional character vector of labels for response bins
(e.g., \code{c("Low (1-2)", "Medium (3-5)", "High (6-7)")}).}

\item{y_map_values}{Optional named list to rename response values for display
(e.g., \code{list("1" = "Correct", "0" = "Incorrect")}). Applied to legend labels and data.}

\item{y_filter}{Optional numeric or character vector specifying which response values to include.
For numeric responses, use a range like \code{5:7} to show only values 5, 6, and 7.
For categorical responses, use category names like \code{c("Agree", "Strongly Agree")}.
Applied BEFORE binning (filters raw values first, then bins the filtered data).}

\item{y_filter_combine}{Logical. When \code{y_filter} is used, should filtered values be combined
into a single percentage? Defaults to \code{TRUE} (show combined \% of all filtered values).
Set to \code{FALSE} to show separate lines for each filtered value.}

\item{y_filter_label}{Character string. Custom label for the filtered responses in the legend.
Only used when \code{y_filter} and \code{y_filter_combine = TRUE}.
If \code{NULL} (default) and \code{group_var} is provided, shows only group names in legend (e.g., "AgeGroup1").
If \code{NULL} and no \code{group_var}, uses auto-generated label (e.g., "5-7" for \code{y_filter = 5:7}).}

\item{time_breaks}{Optional numeric vector for binning continuous time variables.}

\item{time_bin_labels}{Optional character vector of labels for time bins.}

\item{tooltip}{A tooltip configuration created with \code{\link{tooltip}()},
OR a format string with \{placeholders\}. Available placeholders:
\code{\{x\}}, \code{\{y\}}, \code{\{value\}}, \code{\{series\}}, \code{\{percent\}}.
See \code{\link{tooltip}} for full customization options.}

\item{tooltip_prefix}{Optional string prepended to values in tooltip.}

\item{tooltip_suffix}{Optional string appended to values in tooltip.}
}
\value{
A highcharter plot object.
}
\description{
Creates interactive timeline visualizations showing changes in survey
responses over time. Supports multiple chart types including stacked areas,
line charts, and diverging bar charts.
}
\examples{
# Load GSS data
data(gss_all)

# Basic timeline - confidence in institutions over time
plot1 <- viz_timeline(
           data = gss_all,
           time_var = "year",
           y_var = "confinan",
           title = "Confidence in Financial Institutions Over Time",
           y_max = 100
           )
plot1

# Line chart by gender
plot2 <- viz_timeline(
   data = gss_all,
   time_var = "year",
   y_var = "happy",
   group_var = "sex",
   chart_type = "line",
   title = "Happiness Trends by Gender",
   y_levels = c("very happy", "pretty happy", "not too happy")
)
plot2

# Show only high responses (5-7 on a 1-7 scale) - COMBINED
plot3 <- viz_timeline(
   data = survey_data,
   time_var = "wave",
   y_var = "agreement",  # 1-7 scale
   group_var = "age_group",
   chart_type = "line",
   y_filter = 5:7,  # Show combined \% who responded 5-7
   title = "\% High Agreement (5-7) Over Time"
)
plot3

# Custom legend label
plot4 <- viz_timeline(
   data = survey_data,
   time_var = "wave",
   y_var = "agreement",
   group_var = "age_group",
   chart_type = "line",
   y_filter = 5:7,
   y_filter_label = "High Agreement",  # Custom label instead of "5-7"
   title = "High Agreement Trends"
)
plot4

# Show individual filtered values (not combined)
plot5 <- viz_timeline(
   data = survey_data,
   time_var = "wave",
   y_var = "agreement",
   chart_type = "line",
   y_filter = 5:7,
   y_filter_combine = FALSE,  # Show separate lines for 5, 6, 7
   title = "Individual High Responses"
)
plot5

# Custom styling with colors and labels
plot6 <- viz_timeline(
   data = survey_data,
   time_var = "wave_time_label",
   y_var = "agreement",
   group_var = "age_group",
   chart_type = "line",
   y_filter = 4:5,
   title = "High Agreement Over Time",
   subtitle = "By Age Group",
   x_label = "Survey Wave",
   y_label = "\% High Agreement",
   y_min = 0,
   y_max = 100,
   color_palette = c("#E41A1C", "#377EB8", "#4DAF4A", "#984EA3")
)
plot6

# Custom legend labels with y_map_values
plot7 <- viz_timeline(
   data = survey_data,
   time_var = "wave_time_label",
   y_var = "knowledge_item",
   chart_type = "line",
   y_filter = 1,
   y_map_values = list("1" = "Correct", "0" = "Incorrect"),
   title = "Knowledge Score Over Time",
   x_label = "Survey Wave",
   y_label = "\% Correct",
   y_min = 0,
   y_max = 100
)
plot7

}
